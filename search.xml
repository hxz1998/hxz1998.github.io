<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C++çš„é¡ºåºå®¹å™¨æ¯”è¾ƒ</title>
    <url>/2020/09/10/C++%E7%9A%84%E9%A1%BA%E5%BA%8F%E5%AE%B9%E5%99%A8%E6%AF%94%E8%BE%83/</url>
    <content><![CDATA[<p>å®¹å™¨å°±æ˜¯ç‰¹å®šç±»å‹å¯¹è±¡çš„é›†åˆï¼Œé¡ºåºå®¹å™¨ï¼ˆSequential Containerï¼‰æ˜¯ä¸€ç§æä¾›äº†å…ƒç´ é¡ºåºå­˜å‚¨è®¿é—®çš„æ•°æ®ç»“æ„ï¼Œé¡ºåºå­˜å‚¨æ„å‘³ç€åœ¨å­˜å‚¨æ–¹å¼ä¸Šä»…ä»…ä¾èµ–äºå…ˆååŠ å…¥å®¹å™¨çš„é¡ºåºã€‚åœ¨ <code>C++</code> çš„ <code>STL</code> ä¸­ï¼Œæä¾›äº† <code>vector, deque, list, forward_list, array</code> è¿™å‡ ç§å®¹å™¨ï¼Œå½“ç„¶è¿˜æœ‰ <code>string</code> ä¹Ÿå¯ä»¥è§†ä¸ºä¸€ç§å®¹å™¨ï¼Œåªä¸è¿‡åªèƒ½å­˜å‚¨ <code>char</code> ç±»å‹çš„æ•°æ®ã€‚</p>
<a id="more"></a>
<blockquote>
<p>  æœ¬æ–‡ä¸»è¦å‚è€ƒè‡ª <em>C++ Primer, 5th Edition</em>, [ç¾] Stanley B. Lippman / [ç¾] JosÃ©e Lajoie / [ç¾] Barbara E. Moo</p>
</blockquote>
<h1 id="1-é¡ºåºå®¹å™¨ç±»å‹"><a href="#1-é¡ºåºå®¹å™¨ç±»å‹" class="headerlink" title="1. é¡ºåºå®¹å™¨ç±»å‹"></a>1. é¡ºåºå®¹å™¨ç±»å‹</h1><p>åœ¨ <code>STL</code> ä¸­ï¼ˆæˆªè‡³ <code>C++11</code>ï¼Œæä¾›äº†å¦‚ä¸‹æ‰€ç¤ºå‡ ä¸ªé¡ºåºç±»å‹ï¼‰</p>
<ol>
<li><code>vector</code>ï¼šå¯å˜å¤§å°æ•°ç»„ã€‚æ”¯æŒ<strong>å¿«é€Ÿéšæœº</strong>è®¿é—®ã€‚åœ¨<strong>å°¾éƒ¨</strong>æ’å…¥å…ƒç´ è¾ƒå¿«ï¼Œä½†å…¶ä»–ä½ç½®æ’å…¥å¾ˆæ…¢ã€‚</li>
<li><code>deque</code>ï¼šåŒç«¯é˜Ÿåˆ—ã€‚æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚åœ¨å¤´éƒ¨ã€å°¾éƒ¨æ’å…¥å…ƒç´ éƒ½å¾ˆå¿«ã€‚</li>
<li><code>list</code>ï¼šåŒå‘é“¾è¡¨ã€‚<strong>ä»…</strong>æ”¯æŒ<strong>åŒå‘é¡ºåº</strong>è®¿é—®ã€‚åœ¨<strong>ä»»ä½•ä½ç½®</strong>åˆ é™¤ã€æ·»åŠ å…ƒç´ éƒ½å¾ˆå¿«ã€‚</li>
<li><code>forward_list</code>ï¼šå•å‘é“¾è¡¨ã€‚<strong>ä»…</strong>æ”¯æŒ<strong>ä»å¤´éƒ¨å¼€å§‹</strong>çš„é¡ºåºè®¿é—®ã€‚åœ¨é“¾è¡¨<strong>ä»»ä½•ä½ç½®</strong>æ’å…¥ã€åˆ é™¤å…ƒç´ éƒ½å¾ˆå¿«ã€‚</li>
<li><code>array</code>ï¼šå›ºå®šå¤§å°æ•°ç»„ã€‚æ”¯æŒ<strong>å¿«é€Ÿéšæœº</strong>è®¿é—®ï¼Œ<strong>ä¸èƒ½</strong>æ·»åŠ ã€åˆ é™¤å…ƒç´ ã€‚</li>
<li><code>string</code>ï¼šå’Œ <code>vector</code> ç±»ä¼¼ï¼Œåªä¸è¿‡åªèƒ½å­˜å‚¨ <code>char</code> ç±»å‹çš„æ•°æ®ã€‚</li>
</ol>
<h1 id="2-æ€§èƒ½åˆ†æ"><a href="#2-æ€§èƒ½åˆ†æ" class="headerlink" title="2. æ€§èƒ½åˆ†æ"></a>2. æ€§èƒ½åˆ†æ</h1><p>é™¤äº† <code>array</code> å®¹å™¨ä¹‹å¤–ï¼Œå…¶ä»–å®¹å™¨å‡æä¾›äº†é«˜æ•ˆçš„å†…å­˜ç®¡ç†ï¼Œå¯ä»¥åœ¨è®¡ç®—æœºèµ„æºå…è®¸çš„æƒ…å†µä¸‹ä»»æ„æ·»åŠ åˆ é™¤å…ƒç´ åˆ°å®¹å™¨ä¸­ã€‚å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºå­˜å‚¨ç­–ç•¥çš„ä¸åŒå’Œæ“ä½œæ¥å£çš„ä¸åŒï¼Œä»è€Œé—´æ¥å¯¼è‡´äº†ä¸åŒå®¹å™¨æœ‰ä¸åŒçš„æ€§èƒ½å’Œåº”ç”¨åœºåˆã€‚</p>
<p><code>string</code> å’Œ <code>vector</code> æ˜¯å­˜å‚¨åœ¨ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­çš„ï¼Œå› æ­¤å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„ç‰©ç†åœ°å€ä»è€Œå®ç°å¿«é€Ÿéšæœºè®¿é—®ã€‚ä½†æ˜¯ä¹Ÿæ­£æ˜¯å› ä¸ºå®ƒä»¬åœ¨è¿ç»­ç©ºé—´ä¸­å­˜å‚¨ï¼Œå½“éœ€è¦åœ¨ä¸­é—´ä½ç½® <code>i</code> æ’å…¥å…ƒç´ æ—¶ï¼Œéœ€è¦å°† <code>i + 1</code> åŠä»¥åçš„æ¯ä¸€ä¸ªå…ƒç´ å¹³ç§»åˆ°å®ƒä»¬çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç©ºå‡ºæ¥ <code>i</code> ä½ç½®æ‰å¯ä»¥æ’å…¥è¿›æ¥ä¿æŒç©ºé—´çš„è¿ç»­æ€§ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæœ‰æ—¶æ·»åŠ å…ƒç´ è¿›æ¥ï¼Œéœ€è¦<strong>æ‰©å®¹+æ‹·è´å…ƒç´ </strong>åˆ°æ–°å­˜å‚¨ç©ºé—´ä¸­ã€‚</p>
<p><code>list</code> å’Œ <code>forward_list</code> æ˜¯ä¸¤ä¸ªä½¿ç”¨<strong>é“¾è¡¨</strong>æ¥å®ç°çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬åœ¨æ·»åŠ å…ƒç´ æ—¶éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¿é—®æ—¶å´ä¸æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œéœ€è¦ä»å¤´éƒ¨ï¼ˆ<code>list</code>è¿˜æ”¯æŒä»å°¾éƒ¨å‘å¤´éƒ¨çš„æŸ¥æ‰¾ï¼‰å¼€å§‹é€ä¸ªéå†è®¿é—®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¿©æ•°æ®ç»“æ„åœ¨å­˜å‚¨æ¯ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéƒ½éœ€è¦é¢å¤–çš„ç©ºé—´æ¥ç»´æŒé“¾è¡¨ç»“æ„ã€‚</p>
<p><code>deque</code> æ˜¯ä¸€ä¸ªä¸ä»…æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œè€Œä¸”æ”¯æŒåœ¨å¤´éƒ¨å’Œå°¾éƒ¨é«˜æ•ˆçš„åˆ é™¤æˆ–æ·»åŠ å…ƒç´ ï¼Œåœ¨è¿™ä¸€ç‚¹å’Œ <code>list</code> ä¸ <code>forward_list</code> æ•ˆç‡ç›¸å½“ã€‚</p>
<p><code>forward_list</code> å’Œ <code>array</code> æ˜¯ <code>C++11</code> æ–°æ·»åŠ çš„ç±»å‹ï¼Œ<code>array</code> æ˜¯ä¸€ç§æ›´åŠ å®‰å…¨ã€æ˜“ç”¨çš„æ•°ç»„ç±»å‹ï¼Œåœ¨ç”¨æ³•ä¸Šå’Œå†…ç½®æ•°ç»„ç±»ä¼¼ï¼ˆå¹¶æ²¡æœ‰æ„Ÿè§‰åˆ°æœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«ï¼‰ã€‚<code>forward_list</code> æ˜¯å•é“¾è¡¨ï¼Œä¸ºäº†è¾¾åˆ°æœ€å¥½çš„æ€§èƒ½ï¼Œæ²¡æœ‰ç»´æŠ¤ <code>size</code> æ–¹æ³•ï¼Œå› æ­¤è®¡ç®—å®ƒçš„å¤§å°æ—¶ï¼Œåªèƒ½æ‰‹åŠ¨å®ç°ã€‚</p>
<blockquote>
<p>  ä¸€èˆ¬æ¥è¯´ï¼Œé™¤éæœ‰æ›´å¥½çš„ç†ç”±ï¼ˆä¾‹å¦‚éœ€è¦é«˜é¢‘ç‡ä¸­é—´å¢åŠ å…ƒç´ å’Œåˆ é™¤å…ƒç´ ï¼‰ï¼Œä½¿ç”¨ <code>vector</code> å°±æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ã€‚</p>
</blockquote>
<h1 id="3-å®¹å™¨é€‰æ‹©åŸºæœ¬åŸåˆ™"><a href="#3-å®¹å™¨é€‰æ‹©åŸºæœ¬åŸåˆ™" class="headerlink" title="3. å®¹å™¨é€‰æ‹©åŸºæœ¬åŸåˆ™"></a>3. å®¹å™¨é€‰æ‹©åŸºæœ¬åŸåˆ™</h1><ol>
<li>ä¸€èˆ¬é€‰ <code>vector</code> å°±å¯ä»¥å•¦ï¼Œé™¤éæœ‰æ›´å¥½ç†ç”±ã€‚</li>
<li>å¦‚æœç©ºé—´çš„é¢å¤–å¼€é”€å¾ˆé‡è¦ï¼Œä¸è¦ç”¨ <code>list</code> å’Œ <code>forward_list</code>ã€‚</li>
<li>å¦‚æœè¦æ±‚é«˜é¢‘ç‡éšæœºè®¿é—®å…ƒç´ ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>vector</code> å’Œ <code>deque</code> æ›´åŠ åˆé€‚ã€‚</li>
<li>å¦‚æœéœ€è¦åœ¨å®¹å™¨ä¸­é—´ä½ç½®æ’å…¥åˆ é™¤å…ƒç´ ï¼Œä½¿ç”¨ <code>list</code> å’Œ <code>forward_list</code> æ›´åŠ åˆé€‚ã€‚</li>
<li>å¦‚æœåªæœ‰åœ¨æœ€åˆè¾“å…¥é˜¶æ®µéœ€è¦æ’å…¥åˆ é™¤å…ƒç´ ï¼Œè€Œåç¨³å®šä¸‹æ¥ä»…ä»…éœ€è¦éšæœºè®¿é—®ï¼Œå¯ä»¥è¿™æ ·ï¼š<ol>
<li>å¦‚æœéœ€è¦åœ¨<strong>ä¸­é—´</strong>ä½ç½®æ’å…¥å…ƒç´ ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>list</code> æ¥æ„é€ è¾“å…¥é˜¶æ®µï¼Œå†æŠŠå®ƒæ”¾åˆ° <code>vector</code> ä¸­å»ã€‚</li>
<li>å¦‚æœ<strong>ä¸éœ€è¦åœ¨ä¸­é—´ä½ç½®</strong>æ’å…¥å…ƒç´ ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ <code>vector</code> ï¼ˆæˆ– <code>deque</code>ï¼‰å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨æœ«å°¾ï¼ˆæˆ–å¤´éƒ¨ï¼‰æ·»åŠ å…ƒç´ å°±å¾ˆæ–¹ä¾¿å‘€ã€‚</li>
</ol>
</li>
</ol>
<p>æ€»çš„æ¥è¯´ï¼Œå®¹å™¨æ“ä½œç±»å‹ï¼ˆè¯»å–æˆ–å¢åˆ ï¼‰çš„å æ¯”å†³å®šäº†å®¹å™¨ç±»å‹çš„é€‰æ‹©ï¼Œå› æ­¤ï¼Œåœ¨å¿…è¦æƒ…å†µä¸‹è¿›è¡Œæ€§èƒ½æµ‹è¯•ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©~</p>
<p>å¦‚æœè¿˜æ˜¯ä¸æ¸…æ¥šï¼Œé‚£ä¹ˆå°±ç”¨<strong>è¿­ä»£å™¨</strong>æ¥ä»£æ›¿ä¸‹æ ‡è®¿é—®ï¼Œå› ä¸ºè¿­ä»£å™¨æ˜¯ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œå¯ä»¥ä»»æ„æ›¿æ¢å…·ä½“å®ç°è€Œä¸å½±å“ç¨‹åºä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/10.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/10 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å¦‚æœåé¢éœ€è¦ï¼Œå¯ä»¥åªæ”¹ä¸€å¤„åœ°æ–¹ï¼Œå°±å®Œæˆäº†æ•´ä¸ªå®ç°ï¼Œå¦‚ï¼š</span></span><br><span class="line"><span class="comment">     *  vector&lt;int&gt; nums = &#123;1, 2, 3, 4, 5&#125;;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> iter = nums.<span class="built_in">begin</span>(); iter != nums.<span class="built_in">end</span>(); iter++)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; *iter &lt;&lt; <span class="string">&quot; &quot;</span>; <span class="comment">// &gt;: 1 2 3 4 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>STL</tag>
        <tag>å®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ä¸­push_backå’Œemplace_backçš„åŒºåˆ«</title>
    <url>/2020/09/02/CPP%E4%B8%ADpush-back%E5%92%8Cemplace-back%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>åœ¨ <code>C++11</code> ä¹‹åï¼Œ<code>vector</code> å®¹å™¨ä¸­æ·»åŠ äº†æ–°çš„æ–¹æ³•ï¼š<code>emplace_back()</code> ï¼Œå’Œ <code>push_back()</code> ä¸€æ ·çš„æ˜¯éƒ½æ˜¯åœ¨å®¹å™¨æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ è¿›å»ï¼Œä¸åŒçš„æ˜¯ <code>emplace_back()</code> åœ¨æ•ˆç‡ä¸Šç›¸æ¯”è¾ƒäº <code>push_back()</code> æœ‰äº†ä¸€å®šçš„æå‡ã€‚</p>
<a id="more"></a>
<h1 id="1-push-back-æ–¹æ³•"><a href="#1-push-back-æ–¹æ³•" class="headerlink" title="1. push_back() æ–¹æ³•"></a>1. <code>push_back()</code> æ–¹æ³•</h1><p>é¦–å…ˆåˆ†æè¾ƒä¸ºç®€å•ç›´è§‚çš„ <code>push_back()</code> æ–¹æ³•ã€‚å¯¹äº <code>push_back()</code> è€Œè¨€ï¼Œæœ€å¼€å§‹åªæœ‰ <code>void push_back( const T&amp; value );</code> è¿™ä¸ªå‡½æ•°å£°æ˜ï¼Œåæ¥ä» <code>C++11</code> ï¼Œæ–°åŠ äº†<code>void push_back( T&amp;&amp; value )</code> å‡½æ•°ï¼Œä»¥ä¸‹ä¸º <code>C++</code> ä¸­çš„æºç å®ç°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥ä¸‹ç¨‹åºæ¥è‡ªSTLæºç  bits/stl_vector.h</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @brief  Add data to the end of the %vector.</span></span><br><span class="line"><span class="comment"> *  @param  __x  Data to be added.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  This is a typical stack operation.  The function creates an</span></span><br><span class="line"><span class="comment"> *  element at the end of the %vector and assigns the given data</span></span><br><span class="line"><span class="comment"> *  to it.  Due to the nature of a %vector this operation can be</span></span><br><span class="line"><span class="comment"> *  done in constant time if the %vector has preallocated space</span></span><br><span class="line"><span class="comment"> *  available.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_back</span><span class="params">(<span class="keyword">const</span> value_type &amp;__x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;_M_impl._M_finish != <span class="keyword">this</span>-&gt;_M_impl._M_end_of_storage) &#123;</span><br><span class="line">        <span class="comment">// é¦–å…ˆåˆ¤æ–­å®¹å™¨æ»¡æ²¡æ»¡ï¼Œå¦‚æœæ²¡æ»¡é‚£ä¹ˆå°±æ„é€ æ–°çš„å…ƒç´ ï¼Œç„¶åæ’å…¥æ–°çš„å…ƒç´ </span></span><br><span class="line">        _Alloc_traits::construct(<span class="keyword">this</span>-&gt;_M_impl, <span class="keyword">this</span>-&gt;_M_impl._M_finish,</span><br><span class="line">                                 __x);</span><br><span class="line">        ++<span class="keyword">this</span>-&gt;_M_impl._M_finish; <span class="comment">// æ›´æ–°å½“å‰å®¹å™¨å†…å…ƒç´ æ•°é‡</span></span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// å¦‚æœæ»¡äº†ï¼Œé‚£ä¹ˆå°±é‡æ–°ç”³è¯·ç©ºé—´ï¼Œç„¶åæ‹·è´æ•°æ®ï¼Œæ¥ç€æ’å…¥æ–°æ•°æ® __x</span></span><br><span class="line">        _M_realloc_insert(<span class="built_in">end</span>(), __x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœ C++ ç‰ˆæœ¬ä¸º C++11 åŠä»¥ä¸Šï¼ˆä¹Ÿå°±æ˜¯ä» C++11 å¼€å§‹æ–°åŠ äº†è¿™ä¸ªæ–¹æ³•ï¼‰ï¼Œä½¿ç”¨ emplace_back() ä»£æ›¿</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __cplusplus &gt;= 201103L</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_back</span><span class="params">(value_type &amp;&amp;__x)</span> </span>&#123;</span><br><span class="line">    emplace_back(<span class="built_in">std</span>::<span class="built_in">move</span>(__x));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>C++20</code> ä¹‹åï¼Œå¯¹è¿™ä¸¤ä¸ªé‡è½½æ–¹æ³•è¿›è¡Œäº†ä¿®æ”¹ï¼Œå˜æˆäº† <code>constexpr void push_back( const T&amp; value );</code> ä»¥åŠ <code>constexpr void push_back( T&amp;&amp; value );</code> ã€‚è¯¦æƒ…å‚è€ƒ <code>http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1004r2.pdf</code> <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1004r2.pdf">ç‰ˆæœ¬ä¿®æ”¹è®¡åˆ’</a>ã€‚</p>
<h1 id="2-emplace-back-æ–¹æ³•"><a href="#2-emplace-back-æ–¹æ³•" class="headerlink" title="2. emplace_back() æ–¹æ³•"></a>2. <code>emplace_back()</code> æ–¹æ³•</h1><p><code>emplace_back()</code> æ˜¯ä» <code>C++11</code> èµ·æ–°å¢åˆ° <code>vector</code> ä¸­çš„æ–¹æ³•ï¼Œæœ€åˆçš„å‡½æ•°å£°æ˜ä¸ºï¼š </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt; class... Args &gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">emplace_back</span><span class="params">( Args&amp;&amp;... args )</span></span>;</span><br></pre></td></tr></table></figure>
<p>ä¹‹ååœ¨ <code>C++14</code> ä¹‹åï¼Œå°†æ— è¿”å›å€¼ <code>void</code> æ”¹ä¸ºäº†è¿”å›å¯¹æ’å…¥å…ƒç´ çš„å¼•ç”¨ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt; class... Args &gt;</span><br><span class="line"><span class="function">reference <span class="title">emplace_back</span><span class="params">( Args&amp;&amp;... args )</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>STL</code> æºç ä¸­ï¼Œå¯ä»¥çœ‹åˆ° <code>emplace_back()</code> çš„å®ç°æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥ä¸‹ç¨‹åºæ¥è‡ªSTLæºç  bits/vector.tcc</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp, <span class="keyword">typename</span> _Alloc&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... _Args&gt;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __cplusplus &gt; 201402L</span></span><br><span class="line"><span class="keyword">typename</span> <span class="built_in">vector</span>&lt;_Tp, _Alloc&gt;::reference</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="keyword">void</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="built_in">vector</span>&lt;_Tp, _Alloc&gt;::emplace_back(_Args &amp;&amp;... __args) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;_M_impl._M_finish != <span class="keyword">this</span>-&gt;_M_impl._M_end_of_storage) &#123;</span><br><span class="line">        <span class="comment">// åŒæ ·åˆ¤æ–­å®¹å™¨æ˜¯å¦æ»¡äº†ï¼Œæ²¡æ»¡çš„è¯ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¯¹å…ƒç´ è¿›è¡Œæ„é€ ï¼Œå¹¶æ‰§è¡Œç±»å‹è½¬æ¢</span></span><br><span class="line">        _Alloc_traits::construct(<span class="keyword">this</span>-&gt;_M_impl, <span class="keyword">this</span>-&gt;_M_impl._M_finish,</span><br><span class="line">                                 <span class="built_in">std</span>::forward&lt;_Args&gt;(__args)...);</span><br><span class="line">        ++<span class="keyword">this</span>-&gt;_M_impl._M_finish; <span class="comment">// æ›´æ–°å½“å‰å®¹å™¨å¤§å°</span></span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// æ»¡äº†çš„è¯é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ï¼Œå°†æ–°çš„å…ƒç´ ç»§ç»­æ„é€ è¿›æ¥ï¼Œå¹¶ä¸”è¿›è¡Œç±»å‹è½¬æ¢</span></span><br><span class="line">        _M_realloc_insert(<span class="built_in">end</span>(), <span class="built_in">std</span>::forward&lt;_Args&gt;(__args)...);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __cplusplus &gt; 201402L</span></span><br><span class="line">    <span class="keyword">return</span> back(); <span class="comment">// åœ¨ C++14ç‰ˆæœ¬ä¹‹åï¼Œæ·»åŠ è¿”å›å€¼ï¼Œè¿”å›æœ€åä¸€ä¸ªå…ƒç´ çš„å¼•ç”¨</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>å°† <code>emplace_back()</code> å’Œ <code>push_back()</code> ä¸­åŒºåˆ«æœ€å¤§çš„ç¨‹åºæ‹å‡ºæ¥çœ‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">_Alloc_traits::construct(<span class="keyword">this</span>-&gt;_M_impl, <span class="keyword">this</span>-&gt;_M_impl._M_finish,</span><br><span class="line">                                 <span class="built_in">std</span>::forward&lt;_Args&gt;(__args)...); <span class="comment">// emplace_back()</span></span><br><span class="line">_Alloc_traits::construct(<span class="keyword">this</span>-&gt;_M_impl, <span class="keyword">this</span>-&gt;_M_impl._M_finish,</span><br><span class="line">                                 __x);                            <span class="comment">// push_back()</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äº <code>std::forward()</code> å‡½æ•°è€Œè¨€ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢å‡½æ•°ï¼Œå®ƒçš„å£°æ˜å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥ä¸‹ç¨‹åºæ¥è‡ªSTLæºç  bits/move.h</span></span><br><span class="line"><span class="comment"> *  @brief  Forward an lvalue.</span></span><br><span class="line"><span class="comment"> *  @return The parameter cast to the specified type.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  This function is used to implement &quot;perfect forwarding&quot;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp&gt;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> _Tp &amp;&amp;<span class="title">forward</span><span class="params">(<span class="keyword">typename</span> <span class="built_in">std</span>::remove_reference&lt;_Tp&gt;::type &amp;<span class="keyword">__t</span>)</span> <span class="keyword">noexcept</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;_Tp &amp;&amp;&gt;(<span class="keyword">__t</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åœ¨å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸­ï¼Œå°†å‚æ•° <code>__t</code> ä¼ é€’ç»™å¯¹åº”ç±» <code>_Tp</code> çš„æ„é€ å‡½æ•°ï¼Œç„¶åè°ƒç”¨äº†è¯¥ç±»çš„æ„é€ å‡½æ•°ä»è€Œå®Œæˆå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ã€‚</strong></p>
<p>å› æ­¤ï¼Œåœ¨ <code>emplace_back()</code> å‡½æ•°ä¸­ï¼Œæ˜¯æ”¯æŒç›´æ¥å°†æ„é€ å‡½æ•°æ‰€éœ€çš„å‚æ•°ä¼ é€’è¿‡å»ï¼Œç„¶åæ„å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å‡ºæ¥ï¼Œç„¶åå¡«å……åˆ°å®¹å™¨å°¾éƒ¨çš„ã€‚</p>
<h1 id="3-ç›´è§‚åŒºåˆ«"><a href="#3-ç›´è§‚åŒºåˆ«" class="headerlink" title="3. ç›´è§‚åŒºåˆ«"></a>3. ç›´è§‚åŒºåˆ«</h1><p>å£°æ˜ä¸€ä¸ª <code>Person</code> ç±»ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªå­—æ®µ <code>_age</code> ï¼Œåœ¨å®¹å™¨ä¸­å­˜å‚¨è¯¥ç±»çš„å¯¹è±¡ï¼Œæ–¹ä¾¿äºæŸ¥çœ‹æ•´ä¸ªå‡½æ•°è°ƒç”¨è¿‡ç¨‹ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> _age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Person(<span class="keyword">int</span> age) : _age(age) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Construct a person.&quot;</span> &lt;&lt; _age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Person(<span class="keyword">const</span> Person &amp;p) : _age(p._age) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Copy-Construct&quot;</span> &lt;&lt; _age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Person(<span class="keyword">const</span> Person &amp;&amp;p) <span class="keyword">noexcept</span>: _age(p._age) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Move-Construct&quot;</span> &lt;&lt; _age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆä½¿ç”¨ <code>push_back()</code> æ–¹æ³•æ·»åŠ åˆ›å»ºå¥½çš„å…ƒç´ ï¼Œå¯ä»¥çœ‹å‡ºä½¿ç”¨åˆ°äº†<strong>æ‹·è´æ„é€ å‡½æ•°</strong>ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Person&gt; person;</span><br><span class="line">    <span class="keyword">auto</span> p = Person(<span class="number">1</span>); <span class="comment">// &gt;: Construct a person.1</span></span><br><span class="line">    person.push_back(p);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &gt;: Copy-Construct1 å› ä¸ºå®¹å™¨æ‰©å®¹ï¼Œéœ€è¦æŠŠå‰é¢çš„å…ƒç´ é‡æ–°æ·»åŠ è¿›æ¥ï¼Œå› æ­¤éœ€è¦æ‹·è´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†ä½¿ç”¨ <code>emplace_back()</code> å‡½æ•°æ·»åŠ å…ƒç´ è¿›æ¥ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Person&gt; person;</span><br><span class="line">    <span class="keyword">auto</span> p = Person(<span class="number">1</span>); <span class="comment">// &gt;: Construct a person.1</span></span><br><span class="line">    person.emplace_back(<span class="built_in">move</span>(p)); <span class="comment">// &gt;: Move-Construct1</span></span><br><span class="line">    person.emplace_back(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &gt;: Construct a person.2  // æ„å»ºä¸€ä¸ªæ–°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * &gt;: Move-Construct1       // æ‹·è´ä¹‹å‰çš„å…ƒç´ è¿‡æ¥ï¼Œè¿™ä¸ªæ—¶å€™ç”¨çš„æ˜¯ Person(const Person &amp;&amp;p)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ç›´æ¥ä½¿ç”¨<strong>æ„é€ å‚æ•°åˆ—è¡¨</strong>æ¥æ·»åŠ å…ƒç´ çš„æ–¹æ³•ï¼Œå®ƒä¼šä½¿ç”¨åˆ°äº†ç§»åŠ¨æ„é€ å‡½æ•° <code>move</code> ã€‚è¿™ä¹Ÿæ˜¯ <code>emplace_back()</code> æ–¹æ³•çš„ä¸€å¤§ç‰¹è‰²ã€‚</p>
<h1 id="4-æ€§èƒ½åˆ†æ"><a href="#4-æ€§èƒ½åˆ†æ" class="headerlink" title="4. æ€§èƒ½åˆ†æ"></a>4. æ€§èƒ½åˆ†æ</h1><p><code>emplace_back()</code> å‡½æ•°åœ¨åŸç†ä¸Šæ¯” <code>push_back()</code> æœ‰äº†ä¸€å®šçš„æ”¹è¿›ï¼ŒåŒ…æ‹¬åœ¨å†…å­˜ä¼˜åŒ–æ–¹é¢å’Œè¿è¡Œæ•ˆç‡æ–¹é¢ã€‚å†…å­˜ä¼˜åŒ–ä¸»è¦ä½“ç°åœ¨ä½¿ç”¨äº†<strong>å°±åœ°æ„é€ ï¼ˆç›´æ¥åœ¨å®¹å™¨å†…æ„é€ å¯¹è±¡ï¼Œä¸ç”¨æ‹·è´ä¸€ä¸ªå¤åˆ¶å“å†ä½¿ç”¨ï¼‰+å¼ºåˆ¶ç±»å‹è½¬æ¢</strong>çš„æ–¹æ³•æ¥å®ç°ï¼Œåœ¨è¿è¡Œæ•ˆç‡æ–¹é¢ï¼Œç”±äºçœå»äº†æ‹·è´æ„é€ è¿‡ç¨‹ï¼Œå› æ­¤ä¹Ÿæœ‰ä¸€å®šçš„æå‡ã€‚</p>
<p>ä»¥ä¸‹ç¨‹åºæºç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/3.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/3 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> _age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Person(<span class="keyword">int</span> age) : _age(age) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Construct a person.&quot;</span> &lt;&lt; _age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Person(<span class="keyword">const</span> Person &amp;p) : _age(p._age) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Copy-Construct&quot;</span> &lt;&lt; _age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Person(<span class="keyword">const</span> Person &amp;&amp;p) <span class="keyword">noexcept</span>: _age(p._age) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Move-Construct&quot;</span> &lt;&lt; _age &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEST_EMPLACE_BACK</span></span><br><span class="line"><span class="comment">//#define TEST_PUSH_BACK</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Person&gt; person;</span><br><span class="line">    <span class="keyword">auto</span> p = Person(<span class="number">1</span>); <span class="comment">// &gt;: Construct a person.1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> TEST_EMPLACE_BACK</span></span><br><span class="line">    person.emplace_back(<span class="built_in">move</span>(p)); <span class="comment">// &gt;: Move-Construct1</span></span><br><span class="line">    person.emplace_back(<span class="number">2</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &gt;: Construct a person.2  // æ„å»ºä¸€ä¸ªæ–°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * &gt;: Move-Construct1       // æ‹·è´ä¹‹å‰çš„å…ƒç´ è¿‡æ¥ï¼Œè¿™ä¸ªæ—¶å€™ç”¨çš„æ˜¯ Person(const Person &amp;&amp;p)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> TEST_PUSH_BACK</span></span><br><span class="line">    person.push_back(p);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &gt;: Copy-Construct1 å› ä¸ºå®¹å™¨æ‰©å®¹ï¼Œéœ€è¦æŠŠå‰é¢çš„å…ƒç´ é‡æ–°æ·»åŠ è¿›æ¥ï¼Œå› æ­¤éœ€è¦æ‹·è´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>STL</tag>
        <tag>æºç åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ä¸­çš„lambdaè¡¨è¾¾å¼æ¢ç©¶</title>
    <url>/2020/08/30/CPP%E4%B8%AD%E7%9A%84lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8E%A2%E7%A9%B6/</url>
    <content><![CDATA[<p>åœ¨ <code>C++11</code> åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œ<code>C++</code> æä¾›äº† <code>lambda</code> è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯ä¸€ç§æ–¹ä¾¿äº†å‚æ•°ä¼ é€’å’Œå®šä¹‰åŒ¿åå‡½æ•°çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•é€šå¸¸ç”¨äºå°è£…ç®—æ³•ã€æ‰§è¡Œå¼‚æ­¥æ–¹æ³• ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯”è¾ƒé€‚ç”¨äºå°‘é‡çš„ä»£ç ã€‚ä»¥ä¸‹åŸæ–‡ï¼š</p>
<blockquote>
<p>In C++11 and later, a lambda expressionâ€”often called a <em>lambda</em>â€”is a convenient way of defining an anonymous function object (a <em>closure</em>) right at the location where it is invoked or passed as an argument to a function. Typically lambdas are used to encapsulate a few lines of code that are passed to algorithms or asynchronous methods. This article defines what lambdas are, compares them to other programming techniques, describes their advantages, and provides a basic example. </p>
</blockquote>
<a id="more"></a>
<h1 id="1-Lambda-è¡¨è¾¾å¼çš„ç»„æˆ"><a href="#1-Lambda-è¡¨è¾¾å¼çš„ç»„æˆ" class="headerlink" title="1. Lambda è¡¨è¾¾å¼çš„ç»„æˆ"></a>1. <code>Lambda</code> è¡¨è¾¾å¼çš„ç»„æˆ</h1><p>å…ˆå¯¹ <code>lambda</code> è¡¨è¾¾å¼æœ‰ä¸€ä¸ªç›´è§‚çš„è®¤è¯†ï¼Œå‚è€ƒä¸‹é¢ç¨‹åºï¼Œè¯¥ç¨‹åºå®Œæˆçš„æ˜¯å°†è¾“å…¥çš„æ•°ç»„ <code>nums</code> æŒ‰ç…§ç»å¯¹å€¼å¤§å°è¿›è¡Œå‡åºæ’åˆ—ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">10</span>&#125;;</span><br><span class="line">    <span class="built_in">std</span>::sort(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) <span class="keyword">mutable</span> <span class="keyword">throw</span>() -&gt; <span class="keyword">bool</span> &#123;</span><br><span class="line">        <span class="comment">// lambda è¡¨è¾¾å¼å‡½æ•°ä½“ï¼Œåœ¨è¿™é‡Œåšåˆ°äº†å°†è¾“å…¥æ•°ç»„å‡åºæ’åˆ—</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">std</span>::<span class="built_in">abs</span>(a) &lt; <span class="built_in">std</span>::<span class="built_in">abs</span>(b));</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : nums) <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="comment">// &gt;: 1 -1 2 3 4 5 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠ›å¼€è¾¹è¾¹è§’è§’ï¼Œå•ç‹¬æ‹¿å‡ºæœ€é‡è¦çš„ä¸€éƒ¨åˆ†æ¥å­¦ä¹ ï¼Œ<code>[](int a, int b) mutable throw() -&gt; bool&#123; // statement &#125;</code> å°±æ˜¯ <code>lambda</code> è¡¨è¾¾å¼æœ€åŸå§‹çš„å†…å®¹ã€‚åœ¨è¯¥è¡¨è¾¾å¼ä¸­ï¼Œæ¯ä¸€éƒ¨åˆ†çš„å«ä¹‰å¦‚ä¸‹å™è¿°ï¼š</p>
<ol>
<li><code>[]</code> æ•è·å­å¥ï¼šç”¨æ¥æ•è·<strong>å‘¨å›´èŒƒå›´</strong>ä¸­å‡ºç°çš„å˜é‡ï¼Œä¹Ÿè¢«ç§°ä¸º<strong>å¼•å¯¼</strong>å­å¥ï¼Œå¯ä»¥åœ¨å…¶ä¸­å£°æ˜è·å–çš„å˜é‡æ˜¯æŒ‰<strong>å€¼</strong>è®¿é—®è¿˜æ˜¯<strong>å¼•ç”¨</strong>æ¥è®¿é—®<del>ï¼Œé»˜è®¤å€¼ä¸º <code>&amp;</code> ï¼Œä¸Šæ–‡ä¸­çš„ä¾‹å­å’Œ <code>[&amp;]</code> æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œ</del>å…·ä½“ä¾‹å­è§ä¸‹æ–‡ã€‚</li>
<li><code>()</code> å‚æ•°åˆ—è¡¨ï¼šç”¨æ¥è·å–å‚æ•°ï¼Œå¯¹äºä¸€ä¸ªä¸€èˆ¬çš„ <code>lambda</code> å‡½æ•°ï¼Œä½¿ç”¨èµ·æ¥å’Œä¸€èˆ¬çš„æŒ‡é’ˆå‡½æ•°æ²¡æœ‰åŒºåˆ«ï¼Œä¹Ÿæ˜¯éœ€è¦æœ‰å‚æ•°åˆ—è¡¨çš„ï¼Œå…·ä½“ä¾‹å­è§ä¸‹æ–‡ã€‚</li>
<li><code>mutable</code> å¯å˜ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼šä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ <code>lambda</code> ä½“ä¸­è°ƒç”¨è¿ç®—ç¬¦çš„å˜é‡ï¼Œéƒ½æ˜¯ä»¥ <code>const value</code> æ¥ä½¿ç”¨çš„ï¼ŒåŠ ä¸Šè¿™ä¸ª <code>mutable</code> ä¹‹åï¼Œäººå®¶å˜æˆäº†å˜é‡æ¥ä½¿ç”¨ï¼Œå…·ä½“æ —å­è§ä¸‹æ–‡ã€‚</li>
<li><code>throw()</code> å¼‚å¸¸ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼šå’Œæ™®é€šå‡½æ•°ä¸€æ ·æ ·ï¼Œ<code>lambda</code> å‡½æ•°ä¹Ÿå¯èƒ½å¼•å‘å¼‚å¸¸ï¼Œå¦‚æœä¸ä¼šå¼•å‘å¼‚å¸¸çš„è¯ï¼Œç›´æ¥å£°æ˜ <code>noexcept</code> å°±å¯ä»¥å•¦~</li>
<li><code>-&gt; bool</code> è¿”å›ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼šç»§ç»­å’Œæ™®é€šå‡½æ•°ä¸€æ ·</li>
<li><code>&#123;// statement &#125;</code> <code>lambda</code> ä½“ï¼šå’Œä¸€èˆ¬çš„å‡½æ•°ä½“ä¸€æ ·ã€‚</li>
</ol>
<p>ä¸éš¾å‘ç°ï¼Œ<code>lambda</code> å‡½æ•°å’Œä¸€èˆ¬çš„å‡½æ•°æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼ŒåŸºæœ¬ä¸Šåªæœ‰åœ¨å¤´éƒ¨ä½ç½®æœ‰ç‰¹æ®Šè¯­æ³•ã€‚</p>
<h1 id="2-æ•è·è¯­å¥çš„ä½¿ç”¨-amp-å¯å˜è§„èŒƒ-mutable"><a href="#2-æ•è·è¯­å¥çš„ä½¿ç”¨-amp-å¯å˜è§„èŒƒ-mutable" class="headerlink" title="2. æ•è·è¯­å¥çš„ä½¿ç”¨ &amp; å¯å˜è§„èŒƒ mutable"></a>2. æ•è·è¯­å¥çš„ä½¿ç”¨ &amp; å¯å˜è§„èŒƒ <code>mutable</code></h1><p>æ‹¿å‡ºæ —å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">1</span>; <span class="comment">// åœ¨ä¸Šæ–‡ä¸­å£°æ˜å¥½å˜é‡ num</span></span><br><span class="line">    <span class="keyword">auto</span> f = [n = num]() &#123; <span class="comment">// åœ¨ä¸‹æ–‡ä¸­é€šè¿‡ æ•è·[] æ¥è·å– numï¼Œå¹¶åœ¨ lambda å‡½æ•°ä½“ä¸­è¿›è¡Œä½¿ç”¨</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// std::cout &lt;&lt; ++num &lt;&lt; std::endl; // é”™è¯¯çš„ä½¿ç”¨ï¼Œå› ä¸º num æ˜¯ä¸å¯å˜çš„å¸¸é‡</span></span><br><span class="line">    &#125;;</span><br><span class="line">    f(); <span class="comment">// &gt;: 1</span></span><br><span class="line">    <span class="keyword">auto</span> m = [num]() <span class="keyword">mutable</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ++num &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// å°†å†…éƒ¨å˜é‡å£°æ˜æˆ mutable å¯å˜ç±»å‹ï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹å†…éƒ¨å˜é‡</span></span><br><span class="line">    &#125;;</span><br><span class="line">    m(); <span class="comment">// &gt;: 2</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// &gt;: 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><del><code>mutable</code> å¯å˜å£°æ˜ä¼˜åŠ¿åœ¨äºå¯ä»¥åœ¨å†…éƒ¨ç›´æ¥æ”¹å˜å¤–éƒ¨å˜é‡ï¼Œç›¸å½“äºä½¿ç”¨äº† <code>[&amp;num]</code> å¼•ç”¨æ–¹æ³•ã€‚</del></p>
<p><strong>2020å¹´9æœˆ1æ—¥ ä¿®æ­£ï¼š</strong> åœ¨ <code>C++14</code> åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>capture</code> è¯­å¥ä»å‘¨å›´ï¼ˆSurrounding Scopeï¼‰æ•è·å˜é‡ï¼Œåœ¨ <code>[]</code> å­å¥ä¸­æŒ‡å®šè¦æ•è·å“ªäº›å˜é‡ï¼Œä»¥åŠæŒ‰ç…§ä½•ç§æ–¹å¼ä½¿ç”¨å®ƒä»¬ã€‚å’Œæ™®é€šè¯­æ³•ä¸€æ ·ï¼Œå¸¦æœ‰ <code>ï¼†</code> å‰ç¼€çš„å˜é‡å¯ä»¥é€šè¿‡<strong>å¼•ç”¨</strong>è¿›è¡Œè®¿é—®ï¼Œè€Œæ²¡æœ‰å‰ç¼€ <code>ï¼†</code> çš„å˜é‡å¯ä»¥é€šè¿‡å€¼è¿›è¡Œè®¿é—®ã€‚<strong>è€Œç©ºçš„æ•è·å­å¥[]è¡¨ç¤º <code>lambda</code> è¡¨è¾¾å¼çš„ä¸»ä½“åœ¨é—­åŒ…èŒƒå›´å†…ä¸è®¿é—®å¤–éƒ¨ä»»ä½•å˜é‡ã€‚</strong> å½“ç„¶~ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„æ•è·æ¨¡å¼æ¥æŒ‡ç¤ºå¦‚ä½•æ•è· <code>lambda</code> ä¸­å¼•ç”¨çš„ä»»ä½•å¤–éƒ¨å˜é‡ï¼š<code>[ï¼†]</code> è¡¨ç¤ºå‘¨å›´æ‰€æœ‰å˜é‡éƒ½æ˜¯é€šè¿‡å¼•ç”¨æ•è·çš„ï¼Œè€Œ <code>[=]</code> æ„å‘³ç€å®ƒä»¬æŒ‰å€¼æ‰€æ•è·ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>lambda</code>çš„å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦æ˜¯<strong>å¸¸é‡å€¼</strong>ï¼Œä½†æ˜¯ä½¿ç”¨ <code>mutable</code> å…³é”®å­—å¯ä»¥ä¿®æ”¹é»˜è®¤å€¼ï¼Œ<code>mutable</code> ä½¿ <code>lambda</code> è¡¨è¾¾å¼çš„å‡½æ•°ä½“å¯ä»¥ä¿®æ”¹æŒ‰å€¼æ•è·çš„å˜é‡ã€‚</p>
<h1 id="3-å‚æ•°åˆ—è¡¨"><a href="#3-å‚æ•°åˆ—è¡¨" class="headerlink" title="3. å‚æ•°åˆ—è¡¨"></a>3. å‚æ•°åˆ—è¡¨</h1><p>å†æ‹¿å‡ºä¸€ä¸ªæ —å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> y = [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; y(<span class="number">3</span>, <span class="number">2</span>); <span class="comment">// &gt;: 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¿™é‡Œå¼€å§‹ï¼Œä¹Ÿå°±æ˜¯å‚æ•°åˆ—è¡¨å¼€å§‹ï¼Œåé¢çš„å†…å®¹éƒ½æ˜¯å¯é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯å¦‚æœä¸ºç©ºï¼Œé‚£ä¹ˆå°±ç›´æ¥<strong>çœç•¥</strong>ä¸å†™å³å¯ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> empty = [] &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Wow!ç©ºçš„~&quot;</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// å•¥ä¹Ÿæ²¡æœ‰åªæœ‰ä¸ªå‡½æ•°ä½“&#125;;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    empty(); <span class="comment">// &gt;: Wow!ç©ºçš„~</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="4-ç‰¹æ®Šç”¨æ³•"><a href="#4-ç‰¹æ®Šç”¨æ³•" class="headerlink" title="4. ç‰¹æ®Šç”¨æ³•"></a>4. ç‰¹æ®Šç”¨æ³•</h1><h2 id="4-1-èŠ±é‡Œèƒ¡å“¨çš„-lambda-åµŒå¥—"><a href="#4-1-èŠ±é‡Œèƒ¡å“¨çš„-lambda-åµŒå¥—" class="headerlink" title="4.1 èŠ±é‡Œèƒ¡å“¨çš„ lambda åµŒå¥—"></a>4.1 èŠ±é‡Œèƒ¡å“¨çš„ <code>lambda</code> åµŒå¥—</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸¤å±‚ lambda åµŒå¥—ï¼Œçœ‹èµ·æ¥æŒºèŠ±é‡Œèƒ¡å“¨</span></span><br><span class="line">    <span class="keyword">auto</span> embed_embed_lambda = [](<span class="keyword">int</span> a) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; - - &quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> [](<span class="keyword">int</span> c) &#123; <span class="keyword">return</span> c / <span class="number">2</span>; &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; embed_embed_lambda(<span class="number">2</span>)(<span class="number">2</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// &gt;: 2 - - 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-é«˜é˜¶-lambda-å‡½æ•°"><a href="#4-2-é«˜é˜¶-lambda-å‡½æ•°" class="headerlink" title="4.2 é«˜é˜¶ lambda å‡½æ•°"></a>4.2 é«˜é˜¶ <code>lambda</code> å‡½æ•°</h2><p>é«˜é˜¶å‡½æ•°æ˜¯æŒ‡ï¼Œé‡‡ç”¨å¦ä¸€ä¸ª <code>lambda</code> è¡¨è¾¾å¼ä½œä¸ºå…¶å‚æ•°æˆ–è¿”å› <code>lambda</code> è¡¨è¾¾å¼çš„ <code>lambda</code> è¡¨è¾¾å¼ï¼ˆä¸çŸ¥ä¸è§‰æƒ³èµ·äº†ä¿„ç½—æ–¯å¥—å¨ƒğŸ¤”ï¼‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å› function å¯¹è±¡çš„ lambda è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">auto</span> get_function = [](<span class="keyword">int</span> x) -&gt; <span class="built_in">std</span>::function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> [=](<span class="keyword">int</span> y) &#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ function ä¸ºå¯¹è±¡ä½œä¸ºå…¶å‚æ•°çš„ lambda è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">auto</span> param_function = [](<span class="keyword">const</span> <span class="built_in">std</span>::function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; &amp;f, <span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">return</span> f(n) * <span class="number">2</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> ans = param_function(get_function(<span class="number">2</span>), <span class="number">3</span>); <span class="comment">// x = 2, n = 3</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5.  æ€»ç»“"></a>5.  æ€»ç»“</h1><p>å†™åˆ°æ­¤å¤„ï¼Œå…³äº <code>C++</code> çš„ <code>lambda</code> è¯­æ³•è§„èŒƒå’Œç”¨æ³•å·²ç»å­¦ä¹ äº†ä¸€å°éƒ¨åˆ†ï¼Œå®ƒä½œä¸ºä¸€ç§æ–¹ä¾¿çµæ´»çš„æ–¹æ³•éšç”¨éšå­¦ä¹Ÿæ˜¯é˜”ä»¥çš„ã€‚</p>
<blockquote>
<p>å› ä¸ºå‚æ•°ç±»å‹å’Œå‡½æ•°æ¨¡æ¿å‚æ•°ä¸€æ ·å¯ä»¥è¢«æ¨å¯¼è€Œæ— éœ€å’Œå…·ä½“å‚æ•°ç±»å‹è€¦åˆï¼Œæœ‰åˆ©äºé‡æ„ä»£ç ï¼›å’Œä½¿ç”¨autoå£°æ˜å˜é‡çš„ä½œç”¨ç±»ä¼¼ï¼Œå®ƒä¹Ÿå…è®¸é¿å…ä¹¦å†™è¿‡äºå¤æ‚çš„å‚æ•°ç±»å‹ã€‚ç‰¹åˆ«åœ°ï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡å‡ºå‚æ•°ç±»å‹ä½¿å¾—ä½¿ç”¨é«˜é˜¶å‡½æ•°å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹ç¨‹åºæºç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/8/30.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/8/30 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">10</span>&#125;;</span><br><span class="line">    <span class="built_in">std</span>::sort(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), [&amp;](<span class="keyword">int</span> a, <span class="keyword">int</span> b) <span class="keyword">mutable</span> <span class="keyword">throw</span>() -&gt; <span class="keyword">bool</span> &#123;</span><br><span class="line">        <span class="comment">// lambda è¡¨è¾¾å¼å‡½æ•°ä½“ï¼Œåœ¨è¿™é‡Œåšåˆ°äº†å°†è¾“å…¥æ•°ç»„å‡åºæ’åˆ—</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">std</span>::<span class="built_in">abs</span>(a) &lt; <span class="built_in">std</span>::<span class="built_in">abs</span>(b));</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : nums) <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="comment">// &gt;: 1 -1 2 3 4 5 10</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">1</span>; <span class="comment">// åœ¨ä¸Šæ–‡ä¸­å£°æ˜å¥½å˜é‡ num</span></span><br><span class="line">    <span class="keyword">auto</span> f = [n = num]() &#123; <span class="comment">// åœ¨ä¸‹æ–‡ä¸­é€šè¿‡ æ•è·[] æ¥è·å– numï¼Œå¹¶åœ¨ lambda å‡½æ•°ä½“ä¸­è¿›è¡Œä½¿ç”¨</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// std::cout &lt;&lt; ++num &lt;&lt; std::endl; // é”™è¯¯çš„ä½¿ç”¨ï¼Œå› ä¸º num æ˜¯ä¸å¯å˜çš„å¸¸é‡</span></span><br><span class="line">    &#125;;</span><br><span class="line">    f(); <span class="comment">// &gt;: 1</span></span><br><span class="line">    <span class="keyword">auto</span> m = [num]() <span class="keyword">mutable</span> &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ++num &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// å°†å†…éƒ¨å˜é‡å£°æ˜æˆ mutable å¯å˜ç±»å‹ï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹å†…éƒ¨å˜é‡</span></span><br><span class="line">    &#125;;</span><br><span class="line">    m(); <span class="comment">// &gt;: 2</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// &gt;: 2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> y = [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; y(<span class="number">3</span>, <span class="number">2</span>); <span class="comment">// &gt;: 5</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> empty = [] &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Wow!ç©ºçš„~&quot;</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// å•¥ä¹Ÿæ²¡æœ‰åªæœ‰ä¸ªå‡½æ•°ä½“&#125;;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    empty(); <span class="comment">// &gt;: Wow!ç©ºçš„~</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åç›´æ¥ä½¿ç”¨ (5, 3)</span></span><br><span class="line">    <span class="keyword">int</span> n = [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123; <span class="keyword">return</span> a + b; &#125;(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// &gt;: 8</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸¤å±‚ lambda åµŒå¥—ï¼Œçœ‹èµ·æ¥æŒºèŠ±é‡Œèƒ¡å“¨</span></span><br><span class="line">    <span class="keyword">auto</span> embed_embed_lambda = [](<span class="keyword">int</span> a) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; - - &quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> [](<span class="keyword">int</span> c) &#123; <span class="keyword">return</span> c / <span class="number">2</span>; &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; embed_embed_lambda(<span class="number">2</span>)(<span class="number">2</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// &gt;: 2 - - 1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å› function å¯¹è±¡çš„ lambda è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">auto</span> get_function = [](<span class="keyword">int</span> x) -&gt; <span class="built_in">std</span>::function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> [=](<span class="keyword">int</span> y) &#123; <span class="keyword">return</span> x + y; &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ function ä¸ºå¯¹è±¡ä½œä¸ºå…¶å‚æ•°çš„ lambda è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">auto</span> param_function = [](<span class="keyword">const</span> <span class="built_in">std</span>::function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; &amp;f, <span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">return</span> f(n) * <span class="number">2</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> ans = param_function(get_function(<span class="number">2</span>), <span class="number">3</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>Lambda</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ä¸­çš„unordered_mapå’Œmapçš„åŒºåˆ«</title>
    <url>/2020/09/01/CPP%E4%B8%AD%E7%9A%84unordered-map%E5%92%8Cmap%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p><code>unordered_map</code> ç±»æ¨¡æ¿å’Œ <code>map</code> ç±»æ¨¡æ¿éƒ½æ˜¯æè¿°äº†è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼šå®ƒæ˜¯ç”± <code>std::pair&lt;const Key, value&gt;</code> ç»„æˆçš„å¯å˜é•¿å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨ä¸­æ¯ä¸ªå…ƒç´ å­˜å‚¨ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ <code>key</code> - <code>value</code> å¯¹ã€‚</p>
<a id="more"></a>
<h1 id="1-unordered-map"><a href="#1-unordered-map" class="headerlink" title="1. unordered_map"></a>1. <code>unordered_map</code></h1><p>åœ¨å¤´æ–‡ä»¶ä¸Šï¼Œå¼•å…¥ <code>&lt;unordered_map&gt;</code> æ¥ä½¿ç”¨å®ƒã€‚å¯¹äº <code>unordered_map</code> è€Œè¨€ï¼Œæœ€å¤§çš„ç‰¹ç‚¹åœ¨äºå†…éƒ¨å®ç°ä¸Šï¼Œä½¿ç”¨åˆ°äº†<strong>å“ˆå¸Œè¡¨</strong>ï¼ˆæ•£åˆ—è¡¨ã€<code>hash_table</code> ï¼‰æ¥è¿›è¡Œæ˜ å°„å­˜å‚¨ï¼Œå®ƒçš„æ¨¡æ¿ç±»å£°æ˜åŠå…¶å‚æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¨‹åºæ¥è‡ªSTLæºç  bits/unordered_map.h</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Key,  <span class="comment">// key ç±»å‹ </span></span><br><span class="line">        <span class="keyword">typename</span> _Tp,    <span class="comment">// value ç±»å‹</span></span><br><span class="line">        <span class="keyword">typename</span> _Hash = hash &lt;_Key&gt;,     <span class="comment">// å“ˆå¸Œå‡½æ•°</span></span><br><span class="line">        <span class="keyword">typename</span> _Pred = equal_to &lt;_Key&gt;, <span class="comment">// ç”¨äºæ¯”è¾ƒä¸¤è€…æ˜¯å¦ç›¸åŒçš„å‡½æ•°</span></span><br><span class="line">        <span class="keyword">typename</span> _Alloc = allocator &lt;<span class="built_in">std</span>::<span class="built_in">pair</span>&lt;<span class="keyword">const</span> _Key, _Tp&gt;&gt;&gt; <span class="comment">// åˆ†é…å™¨ï¼Œæè¿°äº†å®¹å™¨åœ¨å†…å­˜ç®¡ç†ä¸Šçš„ç»†èŠ‚ï¼Œä¸åº”è¯¥è‡ªå·±æ¥å¤„ç†ï¼Œé™¤éå†™è‡ªå·±çš„å®¹å™¨</span></span><br><span class="line">class <span class="built_in">unordered_map</span> &#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>unordered_map</code> å†…éƒ¨ï¼Œä½¿ç”¨çš„ <code>Hash Table</code> å¯¹æ•°æ®è¿›è¡Œç»„ç»‡ï¼Œé€šè¿‡æŠŠé”®å€¼ <code>key</code> æ˜ å°„åˆ° <code>hash</code> è¡¨ä¸­çš„ä¸€ä¸ªä½ç½®è¿›è¡Œè®¿é—®ï¼Œæ ¹æ® <code>hash</code> å‡½æ•°çš„ç‰¹ç‚¹ï¼Œ <code>unordered_map</code> å¯¹äºå…ƒç´ æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ° <code>O(1)</code> ï¼Œä½†æ˜¯ï¼Œå®ƒçš„å…ƒç´ æ’åˆ—æ˜¯æ— åºçš„ã€‚å…·ä½“ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">    <span class="comment">// é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ— åº mapï¼Œå®ƒçš„ key ä½¿ç”¨ int ç±»å‹ï¼Œvalue ä½¿ç”¨ string ç±»å‹</span></span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt; unorderedMap;    </span><br><span class="line">   </span><br><span class="line">    <span class="comment">// ä¸‰ç§æ’å…¥æ–°å…ƒç´ çš„æ–¹æ³•ï¼Œâ€œèŒ´â€å­—æœ‰ä¸‰ç§å†™æ³•~</span></span><br><span class="line">    unorderedMap.insert(<span class="built_in">make_pair</span>(<span class="number">0</span>, <span class="string">&quot;Alice&quot;</span>)); </span><br><span class="line">    unorderedMap[<span class="number">1</span>] = <span class="string">&quot;Bob&quot;</span>;</span><br><span class="line">    unorderedMap.insert(<span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt;::value_type(<span class="number">2</span>, <span class="string">&quot;Candy&quot;</span>));</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å¯¹å†…éƒ¨å…ƒç´ æŒ¨ä¸ªè¾“å‡º</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> iter = unorderedMap.<span class="built_in">begin</span>(); iter != unorderedMap.<span class="built_in">end</span>(); iter++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; iter-&gt;first &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; iter-&gt;second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * &gt;: è¾“å‡ºå¦‚ä¸‹ï¼Œå¯ä»¥å¾—çŸ¥å®ƒä»¬åœ¨ key çš„æ’åºä¸Šå¹¶æ²¡æœ‰é¡ºåº</span></span><br><span class="line"><span class="comment">         * 2 - Candy</span></span><br><span class="line"><span class="comment">         * 0 - Alice</span></span><br><span class="line"><span class="comment">         * 1 - Bob</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <code>unordered_map</code> ç”±äºå»ºç«‹äº†å“ˆå¸Œè¡¨ï¼Œæ‰€ä»¥å®ƒåœ¨æœ€å¼€å§‹å»ºç«‹çš„æ—¶å€™æ¯”è¾ƒè€—æ—¶é—´ï¼Œä½†æ˜¯å®ƒæŸ¥è¯¢é€Ÿåº¦å¿«å‘€~ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨ <code>unordered_map</code> æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<h1 id="2-map"><a href="#2-map" class="headerlink" title="2. map"></a>2. <code>map</code></h1><p>å¯¹äº <code>map</code> è€Œè¨€ï¼Œé¦–å…ˆåœ¨å¤´æ–‡ä»¶ä¸Šï¼Œå¼•ç”¨ <code>&lt;map&gt;</code> è¿›æ¥ï¼Œç„¶åä½¿ç”¨ã€‚å®ƒçš„ç±»æ¨¡æ¿å£°æ˜ä»¥åŠéƒ¨åˆ†å‡½æ•°å£°æ˜å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¨‹åºæ¥è‡ªC++æºç  bits/stl_map.h</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Key,  <span class="comment">// key ç±»å‹</span></span><br><span class="line">        <span class="keyword">typename</span> _Tp,    <span class="comment">// value ç±»å‹</span></span><br><span class="line">        <span class="keyword">typename</span> _Compare = <span class="built_in">std</span>::less&lt;_Key&gt;, <span class="comment">// ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line">        <span class="keyword">typename</span> _Alloc = <span class="built_in">std</span>::allocator&lt;<span class="built_in">std</span>::<span class="built_in">pair</span>&lt;<span class="keyword">const</span> _Key, _Tp&gt; &gt; &gt; <span class="comment">// åˆ†é…å™¨ï¼ŒåŒæ ·çš„æè¿°äº†å®¹å™¨åœ¨å†…å­˜ç®¡ç†ä¸Šçš„ç»†èŠ‚ï¼Œä¸åº”è¯¥è‡ªå·±æ¥å¤„ç†ï¼Œé™¤éå†™è‡ªå·±çš„å®¹å™¨</span></span><br><span class="line">class <span class="built_in">map</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">/// å°†ä¸€ä¸ªçº¢é»‘æ ‘è½¬æ¢æˆ [multi]map.</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> __gnu_cxx::__alloc_traits&lt;_Alloc&gt;::<span class="keyword">template</span></span><br><span class="line">    rebind&lt;value_type&gt;::other _Pair_alloc_type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">typedef</span> _Rb_tree&lt;key_type, value_type, _Select1st&lt;value_type&gt;,</span><br><span class="line">    key_compare, _Pair_alloc_type&gt; _Rep_type;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>map</code> çš„å†…éƒ¨ï¼Œä½¿ç”¨äº†<strong>çº¢é»‘æ ‘</strong>ï¼ˆ<code>red-black tree</code>ï¼‰æ¥ç»„ç»‡æ•°æ®ï¼Œå› æ­¤é»˜è®¤çš„å°±å·²ç»å®ç°äº†æ•°æ®çš„æ’åºã€‚ä»ä¸‹é¢ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®ƒé»˜è®¤å®ç°äº†åœ¨ <code>key</code> ä¸Šæ’åºå®ç°é€’å¢ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt; mapper;</span><br><span class="line">    mapper.insert(<span class="built_in">make_pair</span>(<span class="number">0</span>, <span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">    mapper[<span class="number">1</span>] = <span class="string">&quot;Bob&quot;</span>;</span><br><span class="line">    mapper.insert(<span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="built_in">string</span>&gt;::value_type(<span class="number">2</span>, <span class="string">&quot;Candy&quot;</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;iter : mapper) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; iter.first &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; iter.second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * &gt;: è¾“å‡ºå¦‚ä¸‹ï¼Œå¾ˆæ˜æ˜¾çš„ï¼Œå®ƒä»¬åœ¨ key çš„æ’åºä¸Šæ˜¯é€’å¢æ’åˆ—çš„</span></span><br><span class="line"><span class="comment">         * 0 - Alice</span></span><br><span class="line"><span class="comment">         * 1 - Bob</span></span><br><span class="line"><span class="comment">         * 2 - Candy</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œåœ¨å­˜å‚¨ä¸Š <code>map</code> å´æ¯”è¾ƒå ç”¨ç©ºé—´ï¼Œå› ä¸ºåœ¨çº¢é»‘æ ‘ä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½è¦é¢å¤–ä¿å­˜çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„è¿æ¥ï¼Œå› æ­¤ä½¿å¾—æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å ç”¨è¾ƒå¤§ç©ºé—´æ¥ç»´æŠ¤çº¢é»‘æ ‘æ€§è´¨ã€‚</p>
<h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p>ä¸¤ç§æ•°æ®ç»“æ„ç‰¹ç‚¹å¦‚ä¸‹è¡¨æ ¼~</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th><code>unordered_map</code></th>
<th style="text-align:left"><code>map</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>æŸ¥æ‰¾</td>
<td><strong>å¿«</strong>ï¼ŒAverageï¼š<code>O(1)</code> ï¼ŒWorst Caseï¼š<code>O(n)</code></td>
<td style="text-align:left">æ’å®šçš„ <code>log(n)</code></td>
</tr>
<tr>
<td>æ’å…¥</td>
<td>å’Œä¸Šé¢ä¸€æ ·</td>
<td style="text-align:left"><code>log(n)</code> + å¹³è¡¡äºŒå‰æ ‘æ‰€ç”¨æ—¶é—´</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>è¿˜å’Œä¸Šé¢ä¸€æ ·</td>
<td style="text-align:left"><code>log(n)</code> + å¹³è¡¡äºŒå‰æ ‘æ‰€ç”¨æ—¶é—´</td>
</tr>
<tr>
<td>æ˜¯å¦æ’åº</td>
<td>ä¸æ’åº</td>
<td style="text-align:left"><strong>æ’åº</strong></td>
</tr>
<tr>
<td>å®ç°æ–¹æ³•</td>
<td>å“ˆå¸Œè¡¨</td>
<td style="text-align:left">çº¢é»‘æ ‘</td>
</tr>
<tr>
<td>é€‚ç”¨äº</td>
<td>æŸ¥æ‰¾æ“ä½œé¢‘ç‡é«˜</td>
<td style="text-align:left">è¦æ±‚ç»“æœæœ‰åºï¼ˆæŒ‰ <code>key</code> æ’åºï¼‰</td>
</tr>
</tbody>
</table>
</div>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>STL</tag>
        <tag>æºç åˆ†æ</tag>
        <tag>å“ˆå¸Œè¡¨</tag>
        <tag>Map</tag>
      </tags>
  </entry>
  <entry>
    <title>C++çš„upper_boundå’Œlower_boundçš„åŒºåˆ«</title>
    <url>/2020/09/20/CPP%E7%9A%84upper-bound%E5%92%8Clower-bound%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>åœ¨STLæä¾›çš„ <code>algorithm</code> å¤´æ–‡ä»¶ä¸­ï¼Œæä¾›äº†ä¸¤ä¸ªå‡½æ•°ï¼š<code>upper_bound</code> å’Œ <code>lower_bound</code> ï¼Œè¿™ä¿©å‡½æ•°åŠŸèƒ½ â€ç±»ä¼¼â€œï¼Œä½†å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œå…·ä½“ä¸åŒå¦‚ä¸‹æ–‡æ‰€è¿°ã€‚</p>
<a id="more"></a>
<h1 id="1-upper-bound-å‡½æ•°"><a href="#1-upper-bound-å‡½æ•°" class="headerlink" title="1. upper_bound å‡½æ•°"></a>1. upper_bound å‡½æ•°</h1><p>åœ¨ <code>STL</code> æºç ä¸­ï¼Œå…³äº <code>upper_bound(_ForwardIterator __first, _ForwardIterator __last, const _Tp &amp;__val)</code> å‡½æ•°çš„è¯´æ˜æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>  æ‰¾åˆ°æœ€åä¸€ä¸ªå¯ä»¥æ’å…¥ <code>val</code> è€Œä¸æ”¹å˜åŸæ¥æœ‰åºæ•°ç»„çš„æ’åºä½ç½®ï¼ˆFinds the last position in which <code>@p __val</code> could be inserted without changing the orderingï¼‰ã€‚</p>
</blockquote>
<p>æ¥ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         *upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å‡½æ•° <code>*upper_bound(nums.begin(), nums.end(), 3)</code> çš„è¿”å›å€¼ä¸­ï¼ŒæŒ‡å‘äº† <code>4</code> ä¹Ÿå°±æ˜¯å¤§äº <code>3</code> çš„æ•°ï¼Œä» <code>upper_bound(nums.begin(), nums.end(), 3) - nums.begin()</code> ä¸­å¯ä»¥çœ‹å‡ºè¿”å›æ¥äº† <code>3</code> ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ª <code>4</code> çš„ä¸‹æ ‡ï¼Œå› æ­¤ <code>upper_bound()</code> å‡½æ•°å¯ä»¥ç†è§£ä¸ºï¼š<strong>å¤§äºç›®æ ‡å…ƒç´ çš„ç¬¬ä¸€ä¸ªæ•°/ä½ç½®</strong>ã€‚</p>
<p>ç¿»å‡ºæ¥æºç éªŒè¯ä¸€ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥ä¸‹ç¨‹åºæ¥è‡ªï¼šbits/stl_algobase.h</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @brief æ‰¾åˆ°æœ€åä¸€ä¸ªå¯ä»¥æ’å…¥ __val çš„ä½ç½®ï¼Œè€Œä¸”ä¸æ”¹å˜åŸæ¥çš„æ’åº</span></span><br><span class="line"><span class="comment"> *  @ingroup binary_search_algorithmsï¼ŒäºŒåˆ†æŸ¥æ‰¾ç®—æ³•</span></span><br><span class="line"><span class="comment"> *  @param  __first   An iterator. ä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line"><span class="comment"> *  @param  __last    Another iterator. å¦ä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line"><span class="comment"> *  @param  __val     The search term. å¯»æ‰¾çš„é¡¹</span></span><br><span class="line"><span class="comment"> *  @return  An iterator pointing to the first element greater than @p __val,</span></span><br><span class="line"><span class="comment"> *           or end() if no elements are greater than @p __val.</span></span><br><span class="line"><span class="comment"> *           æ‹¿åˆ°ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå¤§äº __val å…ƒç´ çš„åœ°æ–¹ï¼Œ</span></span><br><span class="line"><span class="comment"> *           å¦‚æœæ²¡æ‰¾åˆ°å¤§äº __val çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±è¿”å› end()</span></span><br><span class="line"><span class="comment"> *  @ingroup binary_search_algorithms</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _ForwardIterator, <span class="keyword">typename</span> _Tp&gt;</span><br><span class="line"><span class="keyword">inline</span> _ForwardIterator</span><br><span class="line">upper_bound(_ForwardIterator __first, _ForwardIterator __last,</span><br><span class="line">            <span class="keyword">const</span> _Tp &amp;__val) &#123;</span><br><span class="line">    <span class="comment">// concept requirements</span></span><br><span class="line">    __glibcxx_function_requires(_ForwardIteratorConcept &lt; _ForwardIterator &gt;)</span><br><span class="line">    __glibcxx_function_requires(_LessThanOpConcept &lt;</span><br><span class="line">                                _Tp, <span class="keyword">typename</span> iterator_traits&lt;_ForwardIterator&gt;::value_type &gt;)</span><br><span class="line">    __glibcxx_requires_partitioned_upper(__first, __last, __val);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::__upper_bound(__first, __last, __val,</span><br><span class="line">                              __gnu_cxx::__ops::__val_less_iter());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æåˆ°çš„ <code>__upper_bound()</code> å‡½æ•°ï¼Œæ˜¯å®é™…çš„ç”¨æ¥æŸ¥æ‰¾çš„ç®—æ³•å®ç°ï¼Œå…·ä½“å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥ä¸‹ç¨‹åºæ¥è‡ªï¼šbits/stl_algobase.h</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _ForwardIterator, <span class="keyword">typename</span> _Tp, <span class="keyword">typename</span> _Compare&gt;</span><br><span class="line">_ForwardIterator</span><br><span class="line">__upper_bound(_ForwardIterator __first, _ForwardIterator __last,</span><br><span class="line">              <span class="keyword">const</span> _Tp &amp;__val, _Compare __comp) &#123;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> iterator_traits&lt;_ForwardIterator&gt;::difference_type</span><br><span class="line">            _DistanceType;</span><br><span class="line"></span><br><span class="line">    _DistanceType __len = <span class="built_in">std</span>::distance(__first, __last);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸‹é¢ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ¥å®ç°</span></span><br><span class="line"><span class="comment">     * __len å³æŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">     * __first å·¦æŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">     * __middle ä¸­é—´å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span> (__len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        _DistanceType __half = __len &gt;&gt; <span class="number">1</span>; <span class="comment">// __len / 2 æ“ä½œï¼Œä½ç§»æ“ä½œæ›´å¿«</span></span><br><span class="line">        _ForwardIterator __middle = __first;</span><br><span class="line">        <span class="built_in">std</span>::advance(__middle, __half);</span><br><span class="line">        <span class="keyword">if</span> (__comp(__val, __middle))</span><br><span class="line">            __len = __half;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            __first = __middle;</span><br><span class="line">            ++__first;</span><br><span class="line">            __len = __len - __half - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> __first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯ä»¥ç†è§£ <code>upper_bound(_ForwardIterator __first, _ForwardIterator __last, const _Tp &amp;__val)</code> å‡½æ•°ä¸ºæŸ¥æ‰¾ <strong>å¤§äº <code>__val</code> çš„ç¬¬ä¸€ä¸ªå…ƒç´ åŠå…¶ä½ç½®ï¼Œè¿”å›æ¥ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªä½ç½®çš„è¿­ä»£å™¨</strong>ã€‚å…¶åº•å±‚å®ç°ä½¿ç”¨äº† <strong>äºŒåˆ†æŸ¥æ‰¾</strong>ã€‚</p>
<p>å…¶å®ï¼Œåœ¨åé¢çš„é˜…è¯»ä¸­ï¼Œå‘ç°å¯¹äº <code>upper_bound</code> è¿˜æœ‰å¦ä¸€ä¸ªé‡è½½å®ç°ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  @brief Finds the last position in which @p __val could be inserted</span></span><br><span class="line"><span class="comment"> *         without changing the ordering.</span></span><br><span class="line"><span class="comment"> *  @ingroup binary_search_algorithms</span></span><br><span class="line"><span class="comment"> *  @param  __first   An iterator.</span></span><br><span class="line"><span class="comment"> *  @param  __last    Another iterator.</span></span><br><span class="line"><span class="comment"> *  @param  __val     The search term.</span></span><br><span class="line"><span class="comment"> *  @param  __comp    A functor to use for comparisons.</span></span><br><span class="line"><span class="comment"> *  @return  An iterator pointing to the first element greater than @p __val,</span></span><br><span class="line"><span class="comment"> *           or end() if no elements are greater than @p __val.</span></span><br><span class="line"><span class="comment"> *  @ingroup binary_search_algorithms</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  The comparison function should have the same effects on ordering as</span></span><br><span class="line"><span class="comment"> *  the function used for the initial sort.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _ForwardIterator, <span class="keyword">typename</span> _Tp, <span class="keyword">typename</span> _Compare&gt;</span><br><span class="line"><span class="keyword">inline</span> _ForwardIterator</span><br><span class="line">upper_bound(_ForwardIterator __first, _ForwardIterator __last,</span><br><span class="line">            <span class="keyword">const</span> _Tp &amp;__val, _Compare __comp) &#123;</span><br><span class="line">    <span class="comment">// concept requirements</span></span><br><span class="line">    __glibcxx_function_requires(_ForwardIteratorConcept &lt; _ForwardIterator &gt;)</span><br><span class="line">    __glibcxx_function_requires(_BinaryPredicateConcept &lt; _Compare,</span><br><span class="line">                                _Tp, <span class="keyword">typename</span> iterator_traits&lt;_ForwardIterator&gt;::value_type &gt;)</span><br><span class="line">    __glibcxx_requires_partitioned_upper_pred(__first, __last,</span><br><span class="line">                                              __val, __comp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::__upper_bound(__first, __last, __val,</span><br><span class="line">                              __gnu_cxx::__ops::__val_comp_iter(__comp));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ <code>lambda</code> è¡¨è¾¾å¼æ¥æ›¿ä»£é»˜è®¤çš„æ¯”è¾ƒå‡½æ•°ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ —å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [&amp;](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•° val å°±æ˜¯ 3</span></span><br><span class="line"><span class="comment">         * å‚æ•° b æ¥è‡ª nums ä¸­çš„æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> val &lt; b;</span><br><span class="line">    &#125;) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ƒå®ç°çš„åŠŸèƒ½å’Œé»˜è®¤çš„å‡½æ•°æ˜¯ä¸€æ ·çš„ã€‚</p>
<hr>
<h1 id="2-lower-bound-å‡½æ•°"><a href="#2-lower-bound-å‡½æ•°" class="headerlink" title="2. lower_bound å‡½æ•°"></a>2. lower_bound å‡½æ•°</h1><p>å¯¹äº <code>lower_bound(_ForwardIterator __first, _ForwardIterator __last, const _Tp &amp;__val)</code> å‡½æ•°ï¼Œ<code>STL</code> æºç ä¸­æ˜¯è¿™æ ·è¯´çš„ï¼š</p>
<blockquote>
<p>  æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ä»¥æ’å…¥ <code>__val</code> çš„ä½ç½®ï¼Œå¹¶ä¸”ä¸æ”¹å˜åŸæœ‰æ’åºï¼ˆFinds the first position in which <code>@a val</code> could be inserted without changing the ordering.ï¼‰ã€‚</p>
</blockquote>
<p>å­—é¢ä¸Šæ„æ€å’Œ <code>upper_bound</code> å‡½æ•°å¾ˆåƒï¼Œéƒ½æ˜¯ä¸º <code>val</code> æ‰¾åˆ°ä¸€ä¸ªå¯æ’å…¥çš„ä½ç½®ï¼Œå¹¶ä¸æ”¹å˜åŸæ¥åºåˆ—çš„æœ‰åºæ€§ã€‚ä½†å®ƒå’Œ <code>upper_bound()</code> å‡½æ•°çš„æœ€å¤§ä¸åŒåœ¨äºæ‰¾åˆ°çš„æ˜¯ <strong>ç¬¬ä¸€ä¸ª</strong> å¯æ’å…¥çš„ä½ç½®ï¼Œè€Œ <code>upper_bound</code> æ‰¾åˆ°çš„æ˜¯ <strong>æœ€åä¸€ä¸ª</strong> å¯æ’å…¥çš„ä½ç½®ã€‚å¯¹äºå®ƒçš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºè¾“å‡ºç»“æœï¼Œä¸éš¾çŒœæµ‹å¯¹äº <code>lower_bound()</code> å‡½æ•°ï¼Œæ‰¾åˆ°çš„æ˜¯ <strong>å¤§äºç­‰äº</strong> ç›®æ ‡å…ƒç´ çš„æ•°å€¼å’Œä¸‹æ ‡ã€‚æ¥ä¸‹æ¥ä» <code>STL</code> ä¸­ <code>lower_bound()</code> çš„æºç è¿›è¡Œåˆ†æï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   *  @brief Finds the first position in which @a val could be inserted</span></span><br><span class="line"><span class="comment">   *         without changing the ordering.</span></span><br><span class="line"><span class="comment">   *  @param  __first   An iterator.</span></span><br><span class="line"><span class="comment">   *  @param  __last    Another iterator.</span></span><br><span class="line"><span class="comment">   *  @param  __val     The search term.</span></span><br><span class="line"><span class="comment">   *  @return         An iterator pointing to the first element not less</span></span><br><span class="line"><span class="comment">   *                  thanï¼ˆä¸å°äºï¼ï¼ï¼ä¹Ÿå°±æ˜¯å¤§äºç­‰äºï¼‰ @a val, or end() if every element is less than</span></span><br><span class="line"><span class="comment">   *                  @a val.</span></span><br><span class="line"><span class="comment">   *  @ingroup binary_search_algorithms</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _ForwardIterator, <span class="keyword">typename</span> _Tp&gt;</span><br><span class="line"><span class="keyword">inline</span> _ForwardIterator</span><br><span class="line">lower_bound(_ForwardIterator __first, _ForwardIterator __last,</span><br><span class="line">            <span class="keyword">const</span> _Tp &amp;__val) &#123;</span><br><span class="line">    <span class="comment">// concept requirements</span></span><br><span class="line">    __glibcxx_function_requires(_ForwardIteratorConcept &lt; _ForwardIterator &gt;)</span><br><span class="line">    __glibcxx_function_requires(_LessThanOpConcept &lt;</span><br><span class="line">                                <span class="keyword">typename</span> iterator_traits&lt;_ForwardIterator&gt;::value_type, _Tp &gt;)</span><br><span class="line">    __glibcxx_requires_partitioned_lower(__first, __last, __val);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::__lower_bound(__first, __last, __val,</span><br><span class="line">                              __gnu_cxx::__ops::__iter_less_val());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ƒä¸å…¶ä¸­ç”¨åˆ°çš„ <code>__lower_bound()</code> å‡½æ•°ä½œç”¨å’Œä¹‹å‰çš„ <code>__upper_bound</code> å‡½æ•°åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ½æ˜¯ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•å»æ‰¾ç›®æ ‡ä½ç½®ã€‚å…·ä½“å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _ForwardIterator, <span class="keyword">typename</span> _Tp, <span class="keyword">typename</span> _Compare&gt;</span><br><span class="line">_ForwardIterator</span><br><span class="line">__lower_bound(_ForwardIterator __first, _ForwardIterator __last,</span><br><span class="line">              <span class="keyword">const</span> _Tp &amp;__val, _Compare __comp) &#123;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> iterator_traits&lt;_ForwardIterator&gt;::difference_type</span><br><span class="line">            _DistanceType;</span><br><span class="line"></span><br><span class="line">    _DistanceType __len = <span class="built_in">std</span>::distance(__first, __last);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (__len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        _DistanceType __half = __len &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        _ForwardIterator __middle = __first;</span><br><span class="line">        <span class="built_in">std</span>::advance(__middle, __half);</span><br><span class="line">        <span class="keyword">if</span> (__comp(__middle, __val)) &#123; <span class="comment">// ä¹Ÿæ­£æ˜¯è¿™é‡Œçš„ä¸åŒå¯¼è‡´äº†ä¸¤ä¸ªå‡½æ•°åŠŸèƒ½çš„ä¸åŒ~</span></span><br><span class="line">            __first = __middle;</span><br><span class="line">            ++__first;</span><br><span class="line">            __len = __len - __half - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span></span><br><span class="line">            __len = __half;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> __first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åˆ†æå¾—å‡ºï¼Œ<code>lower_bound</code> å‡½æ•°ç¡®å®æ˜¯æ‰¾åˆ°å¤§äºç­‰äº <strong>ç›®æ ‡å…ƒç´ </strong> çš„æ•°å€¼å’Œä¸‹æ ‡ï¼Œä¸å…ˆå‰çš„çŒœæµ‹ç›¸ç¬¦åˆã€‚</p>
<p>å½“ç„¶ï¼å®ƒä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° <code>__comp</code> çš„ï¼Œä¾‹å­å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> val &lt; b;</span><br><span class="line">    &#125;) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡ä¿®æ”¹æ¯”è¾ƒå‡½æ•°è®© <code>lower_bound()</code> å‡½æ•°åŠŸèƒ½å’Œ <code>upper_bound()</code> å‡½æ•°ä¸€æ ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         *upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> val &lt;= b;</span><br><span class="line">    &#125;) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> val &lt;= b;</span><br><span class="line">    &#125;) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡åº”è¯¥ä¸ä¼šè¿™ä¹ˆæ•´å§ï¼Œæ²¡ç”¨å‘€ : (</p>
<h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p><code>upper_bound()</code> å’Œ <code>lower_bound()</code> å‡½æ•°å®ç°çš„éƒ½æ˜¯åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾ä¸€ä¸ªå¯æ’å…¥çš„ä½ç½®ï¼Œæ’å…¥ååŸåºåˆ—æœ‰åºæ€§ä¸å˜ï¼Œä½†æ˜¯ï¼š</p>
<ul>
<li><p><code>upper_bound()</code> æ‰¾åˆ°çš„æ˜¯å¤§äºç›®æ ‡æ•°çš„ä½ç½®</p>
</li>
<li><p><code>lower_bound()</code> æ‰¾åˆ°çš„æ˜¯å¤§äºç­‰äºç›®æ ‡æ•°çš„ä½ç½®</p>
</li>
</ul>
<p>å—¯ï¼Œæ•´å®Œäº†ï¼~</p>
<h2 id="ç¨‹åºæºç ï¼š"><a href="#ç¨‹åºæºç ï¼š" class="headerlink" title="ç¨‹åºæºç ï¼š"></a>ç¨‹åºæºç ï¼š</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/20.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/20 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;vector&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;algorithm&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         *upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *upper_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [&amp;](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•° val å°±æ˜¯ 3</span></span><br><span class="line"><span class="comment">         * å‚æ•° b æ¥è‡ª nums ä¸­çš„æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> val &lt; b;</span><br><span class="line">    &#125;) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;</span><br><span class="line">         lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 2</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> val &lt; b;</span><br><span class="line">    &#125;) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> val &lt;= b;</span><br><span class="line">    &#125;) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 4</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; lower_bound(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), <span class="number">3</span>, [](<span class="keyword">const</span> <span class="keyword">int</span> &amp;val, <span class="keyword">const</span> <span class="keyword">int</span> &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> val &lt;= b;</span><br><span class="line">    &#125;) - nums.<span class="built_in">begin</span>() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>STL</tag>
        <tag>æºç åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title>C++çš„å¯å˜å‚æ•°æ¨¡æ¿</title>
    <url>/2020/09/08/CPP%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E6%A8%A1%E6%9D%BF/</url>
    <content><![CDATA[<p>C++å¯å˜å‚æ•°æ¨¡æ¿ï¼Œæ˜¯æŒ‡èƒ½å¤Ÿä½¿ç”¨ä»»æ„æ•°é‡å‚æ•°çš„å‡½æ•°æˆ–ç±»æ¨¡æ¿ï¼Œèƒ½å¤Ÿå¾ˆæœ‰æ•ˆçš„æå‡çµæ´»æ€§ã€‚</p>
<a id="more"></a>
<h1 id="1-è¯­æ³•"><a href="#1-è¯­æ³•" class="headerlink" title="1. è¯­æ³•"></a>1. è¯­æ³•</h1><h2 id="1-1-å¯å˜ç±»æ¨¡æ¿"><a href="#1-1-å¯å˜ç±»æ¨¡æ¿" class="headerlink" title="1.1 å¯å˜ç±»æ¨¡æ¿"></a>1.1 å¯å˜ç±»æ¨¡æ¿</h2><p>å¯¹äºå¯å˜ç±»æ¨¡æ¿ï¼ŒåŸºæœ¬ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Arguments&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">classname</span>;</span></span><br></pre></td></tr></table></figure>
<p>ç”±ä¸Šå¼å¯çŸ¥ï¼Œå…¶ç‰¹æ®Šæ€§åœ¨äº <code>...</code> çš„ä½¿ç”¨ï¼Œå¯å˜å‚æ•°æ¨¡æ¿ï¼Œé€šè¿‡ä½¿ç”¨ <code>...</code> æ¥å¸®åŠ©å®šä¹‰ï¼Œå…¶ä¸­ï¼Œ<code>...</code> å·¦ä¾§ä¸ºå‚æ•°åŒ…ï¼ˆ<code>parameter pack</code> ï¼‰ï¼Œå³ä¾§å°†å‚æ•°åŒ…å±•å¼€æˆå¤šä¸ªå•ç‹¬çš„å‚æ•°ã€‚</p>
<p>å¯¹äºä¸¤è¾¹çš„ç©ºç™½å¯ä»¥ä»»æ„åˆ†å¸ƒï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ...Arguments&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">classname</span>;</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ... Arguments&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">classname</span>;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ç±» <code>classname</code> å¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="function">classname&lt;&gt; <span class="title">c1</span><span class="params">()</span></span>;</span><br><span class="line">classname&lt;float, int&gt; c2();</span><br><span class="line">classname&lt;float, std::string, std::vector&lt;int&gt;&gt; c3();</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œè¿˜å¯ä»¥æŒ‡å®šå¿…é¡»å¡«å……å›ºå®šæ•°é‡çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> first, <span class="keyword">typename</span>... Arguments&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">classname2</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// classname2&lt;&gt; c4(); è¿™æ˜¯é”™è¯¯çš„ç”¨æ³•ï¼å‚æ•°å¿…é¡»å¤§äºç­‰äº 1</span></span><br><span class="line"><span class="function">classname2&lt;<span class="keyword">float</span>&gt; <span class="title">c4</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-å¯å˜å‚æ•°çš„å‡½æ•°æ¨¡æ¿"><a href="#1-2-å¯å˜å‚æ•°çš„å‡½æ•°æ¨¡æ¿" class="headerlink" title="1.2 å¯å˜å‚æ•°çš„å‡½æ•°æ¨¡æ¿"></a>1.2 å¯å˜å‚æ•°çš„å‡½æ•°æ¨¡æ¿</h2><p>å¯å˜å‚æ•°çš„å‡½æ•°æ¨¡æ¿åŸºæœ¬ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">functionname</span><span class="params">(Params... params)</span></span>;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¼•ç”¨ç±»å‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">functionname</span><span class="params">(Params *... params)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">functionname</span><span class="params">(Params &amp;... params)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">functionname</span><span class="params">(Params &amp;&amp;... params)</span></span>;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥ä½¿ç”¨ä¸å˜ç±»å‹ <code>const</code> æ¥ä¿®é¥°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">functionname</span><span class="params">(<span class="keyword">const</span> Params &amp;... params)</span></span>;</span><br></pre></td></tr></table></figure>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å’Œå¯å˜å‚æ•°çš„ç±»æ¨¡æ¿ç”¨æ³•ä¸€æ ·ï¼ŒæŒ‡å®šå›ºå®šæ•°é‡çš„å‚æ•°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> First, <span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">functionname</span><span class="params">(<span class="keyword">const</span> First &amp;first, <span class="keyword">const</span> Params... params)</span></span>;</span><br></pre></td></tr></table></figure>
<h1 id="2-æµ‹é‡å¯å˜å‚æ•°æ•°é‡"><a href="#2-æµ‹é‡å¯å˜å‚æ•°æ•°é‡" class="headerlink" title="2. æµ‹é‡å¯å˜å‚æ•°æ•°é‡"></a>2. æµ‹é‡å¯å˜å‚æ•°æ•°é‡</h1><p>ä½¿ç”¨ <code>sizeof</code> æ¥å®Œæˆï¼Œå½“ç„¶ï¼Œè¯¥æ–¹æ³•å’Œä¹‹å‰æµ‹é‡å­—èŠ‚å¤§å°çš„ <code>sizeof</code> ä¸æ˜¯åŒä¸€ä¸ªç”¨æ³•ï¼Œè¿™é‡Œçš„ <code>sizeof</code> æ˜¯ç”¨æ¥æµ‹é‡æä¾›äº†å¤šå°‘ä¸ªå‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Params&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tfunc</span><span class="params">(Params... params)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">sizeof</span>...(params) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    tfunc();        <span class="comment">// &gt;: 0</span></span><br><span class="line">    tfunc(<span class="number">1</span>);       <span class="comment">// &gt;: 1</span></span><br><span class="line">    tfunc(<span class="number">1</span>, <span class="number">2</span>);    <span class="comment">// &gt;: 2</span></span><br><span class="line">    tfunc(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;Hello~YouLi~&quot;</span>);    <span class="comment">// &gt;: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-ç¤ºä¾‹ç¨‹åº"><a href="#3-ç¤ºä¾‹ç¨‹åº" class="headerlink" title="3. ç¤ºä¾‹ç¨‹åº"></a>3. ç¤ºä¾‹ç¨‹åº</h1><p>ä¸‹é¢ç¨‹åºæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <strong>å¯å˜å‚æ•°æ¨¡æ¿</strong> æ¥å¯¹å‡½æ•°è¿›è¡Œé‡å†™å®šä¹‰å¹¶ä½¿ç”¨ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/8.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/8 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> T &amp;t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> First, <span class="keyword">typename</span>... Rest&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> First &amp;first, <span class="keyword">const</span> Rest &amp;...rest)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; first &lt;&lt; <span class="string">&quot;, &quot;</span>;</span><br><span class="line">    <span class="built_in">print</span>(rest...); <span class="comment">// å°†ä¼šæ ¹æ®è¯­æ³•æ¥é€’å½’è°ƒç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">print</span>();    <span class="comment">// &gt;:</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>); <span class="comment">// &gt;: 1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">// &gt;: 10, 20</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="string">&quot;Alice&quot;</span>, <span class="number">3.14</span>, <span class="string">&quot;Bob&quot;</span>); <span class="comment">// &gt;: 10, 20, Alice, 3.14, Bob</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h1><p>å¯¹äºå¯å˜å‚æ•°æ¨¡æ¿è€Œè¨€ï¼Œéƒ½æ˜¯ä½¿ç”¨æŸç§å½¢å¼çš„é€’å½’ï¼Œä½†æ˜¯å®ƒä¸ä¼ ç»Ÿé€’å½’æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¼ ç»Ÿçš„é€’å½’ä½¿ç”¨çš„æ˜¯ä¸€æ ·çš„å‡½æ•°å£°æ˜ï¼Œä½†æ˜¯å¯å˜å‚æ•°æ¨¡æ¿ä½¿ç”¨çš„æ˜¯ä¸åŒå‚æ•°æ•°é‡çš„å‡½æ•°<strong>ï¼ˆæ¯æ¬¡éƒ½ä¼šé€’å‡ï¼‰</strong>å£°æ˜ï¼Œä»è€Œæ¯æ¬¡éƒ½åŒºåˆ†å‡ºå½“å‰æ¬¡ä½¿ç”¨çš„å‡½æ•°ç­¾åã€‚å’Œä¸€èˆ¬çš„é€’å½’ä¸€æ ·ï¼Œéƒ½éœ€è¦ä¸€ä¸ªç»ˆæ­¢é€’å½’çš„ <strong>base-line</strong> æ¡ä»¶ï¼Œä½†æ˜¯è¿™é‡Œçš„å«ä¹‰ä¸åŒã€‚</p>
<blockquote>
<p>å‚è€ƒè‡ª Ellipsis and Variadic Templatesï¼š <a href="https://docs.microsoft.com/zh-cn/cpp/cpp/ellipses-and-variadic-templates?view=vs-2019">https://docs.microsoft.com/zh-cn/cpp/cpp/ellipses-and-variadic-templates?view=vs-2019</a></p>
</blockquote>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>C++çš„å¤šçº¿ç¨‹ï¼ˆâ… ï¼‰</title>
    <url>/2020/09/26/CPP%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B1/</url>
    <content><![CDATA[<blockquote>
<p>  ä»Šå¤©æ˜¯é¢„æŠ¥åçš„æœ€åä¸€å¤©ï¼Œä½ ä¸€å®šå¯ä»¥æˆåŠŸä¸Šå²¸ï¼ŒçŸ¿å¤§ç­‰ä½ ~ğŸ˜˜åŠ æ²¹ğŸ’ª~ï¼Œç›¸ä¿¡ä½ è€Œä¸”å¾ˆåšå®šï¼</p>
</blockquote>
<p>ä» <code>C++11</code> å¼€å§‹ï¼ŒC++æ ‡å‡†å§”å‘˜ä¼šå¼€å§‹å…³æ³¨å¤šçº¿ç¨‹çš„å¤„ç†ï¼Œå¹¶æä¾›å…³äºçº¿ç¨‹æ“ä½œçš„æ ‡å‡†åº“ <code>&lt;thread&gt;</code> ã€‚è€Œåœ¨æ­¤ä¹‹å‰ï¼ŒC++ç¨‹åºå‘˜å·²ç»è‹¦<strong>å¹³å°ç›¸å…³æ€§</strong>çš„éæ ‡å‡†å¤šçº¿ç¨‹åº“ä¹…çŸ£â€¦â€¦</p>
<a id="more"></a>
<p>å¤šçº¿ç¨‹æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¾ˆå¹¿èŒƒçš„å†…å®¹ï¼ŒåŒ…æ‹¬ç®¡ç†ã€è°ƒåº¦ã€é”å’ŒåŒæ­¥ã€å†…å­˜æ¨¡å‹ç­‰å†…å®¹ï¼Œå› æ­¤æœ¬æ–‡å…ˆä»C++çº¿ç¨‹ä¸­çš„çº¿ç¨‹ç®¡ç†å¼€å§‹ï¼Œé€æ­¥ä»‹ç»çº¿ç¨‹çš„<strong>åˆ›å»º</strong>ã€<strong>å¯åŠ¨</strong>ã€<code>join</code> ã€<code>detach</code> æ“ä½œã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨ä¸‹é¢å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦å¾—åˆ°ä¸€ä¸ªæ”¯æŒ <code>C++11</code> æ ‡å‡†çš„ç¼–è¯‘å™¨ã€‚</p>
<h1 id="1-C-å¤šçº¿ç¨‹åˆ›å»ºå’Œå¯åŠ¨"><a href="#1-C-å¤šçº¿ç¨‹åˆ›å»ºå’Œå¯åŠ¨" class="headerlink" title="1. C++å¤šçº¿ç¨‹åˆ›å»ºå’Œå¯åŠ¨"></a>1. C++å¤šçº¿ç¨‹åˆ›å»ºå’Œå¯åŠ¨</h1><p>é¦–å…ˆå¼•å…¥ <code>&lt;thread&gt;</code> å¤´æ–‡ä»¶ï¼Œè¯¥å¤´æ–‡ä»¶åŒ…æ‹¬äº†å¯¹C++å¤šçº¿ç¨‹ç›¸å…³çš„ç±»ã€‚å¼•å…¥å¤´æ–‡ä»¶å®Œæˆä¹‹åå¯ä»¥ä½¿ç”¨ <code>std::thread</code> æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<h2 id="1-1-å¤–éƒ¨å‡½æ•°åˆ›å»ºçº¿ç¨‹"><a href="#1-1-å¤–éƒ¨å‡½æ•°åˆ›å»ºçº¿ç¨‹" class="headerlink" title="1.1 å¤–éƒ¨å‡½æ•°åˆ›å»ºçº¿ç¨‹"></a>1.1 å¤–éƒ¨å‡½æ•°åˆ›å»ºçº¿ç¨‹</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;   // å¼•å…¥å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func_task</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123; <span class="comment">// å£°æ˜è¦æ‰§è¡Œçš„ä»»åŠ¡å‡½æ•°ï¼ˆä¹Ÿå¯ä¸ºcallableç±»å‹ï¼‰</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; * &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(func_task, i)</span></span>; <span class="comment">// åˆ›å»ºçº¿ç¨‹ tï¼ˆå¹¶ä¸ºçº¿ç¨‹æŒ‡å®šä»»åŠ¡ func_taskï¼‰</span></span><br><span class="line">        t.<span class="built_in">detach</span>();             <span class="comment">// å°†çº¿ç¨‹ t ä¸å½“å‰çº¿ç¨‹åˆ†ç¦»</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// &gt;: 015 * 9 *  * 2 *  * 7 * 3 * 6 * 4 * 8 *</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸€æ­¥éª¤ä¸­ï¼Œåˆ›å»ºäº† <code>10</code> ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”å®ƒä»¬éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡éƒ½æ˜¯ <code>func_task</code> ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™åä¸ªçº¿ç¨‹éœ€è¦åœ¨å„è‡ªçš„çº¿ç¨‹æ‰§è¡ŒæœŸé—´å»æ‰§è¡Œ <code>func_task</code> è¿™ä¸ªå‡½æ•°ã€‚å½“è¿™åä¸ªçº¿ç¨‹åˆ›å»ºå®Œæˆä¹‹å <code>thread t(func_task, i);</code> å°±å·²ç»å¼€å§‹æ‰§è¡Œäº†ï¼Œä¸éœ€è¦ç‰¹æ®Šå£°æ˜ã€‚</p>
<p>è€Œå¯¹äº <code>t.detach()</code> ï¼Œè¡¨ç¤ºå…è®¸è¯¥çº¿ç¨‹ <code>t</code> è„±ç¦»å½“å‰çº¿ç¨‹å»è¿è¡Œï¼Œè€Œæ— éœ€ç­‰å¾…å½“å‰çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚</p>
<p>ä»è¾“å‡ºç»“æœï¼š<code>015 * 9 *  * 2 *  * 7 * 3 * 6 * 4 * 8 *</code> å¯ä»¥çœ‹å‡ºè¿™åä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œé¡ºåºä¸Šå¹¶æ²¡æœ‰å›ºå®šé€»è¾‘ï¼Œä¾‹å¦‚ç¬¬äºŒæ¬¡é‡æ–°æ‰§è¡Œå¾—åˆ°çš„ç»“æœä¸ºï¼š<code>01 * 4 * 3 * 5 * 9 * 7 * 2 * 8 * 6 *  *</code>ï¼Œé‚£æ˜¯å› ä¸ºè¿™åä¸ªçº¿ç¨‹åœ¨ä¼˜å…ˆçº§ä¸Šå¹¶æ²¡æœ‰åšåŒºåˆ†ï¼Œå®Œå…¨æ˜¯ç‹¬ç«‹è¿è¡Œå¾—åˆ°çš„ã€‚</p>
<h2 id="1-2-lambda-åˆ›å»ºçº¿ç¨‹"><a href="#1-2-lambda-åˆ›å»ºçº¿ç¨‹" class="headerlink" title="1.2 lambda åˆ›å»ºçº¿ç¨‹"></a>1.2 lambda åˆ›å»ºçº¿ç¨‹</h2><p>å½“ç„¶åœ¨åˆ›å»ºæ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>lambda</code> è¡¨è¾¾å¼ï¼ˆåŒ¿åå‡½æ•°ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;   // å¼•å…¥å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> func_lambda = [](<span class="keyword">int</span> i) &#123; <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; - &quot;</span>; &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(func_lambda, i)</span></span>;</span><br><span class="line">        t.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// &gt;: 024 - 5 -  - 1 - 6 - 7 - 3 - 9 - 8 -  -</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">([](<span class="keyword">int</span> i) &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; - &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        &#125;, i)</span></span>;</span><br><span class="line">        t.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-3-Callable-ç±»å‹åˆ›å»ºçº¿ç¨‹"><a href="#1-3-Callable-ç±»å‹åˆ›å»ºçº¿ç¨‹" class="headerlink" title="1.3 Callable ç±»å‹åˆ›å»ºçº¿ç¨‹"></a>1.3 Callable ç±»å‹åˆ›å»ºçº¿ç¨‹</h2><p>å£°æ˜ä¸€ä¸ªç±»ï¼Œç„¶åé‡è½½å®ƒçš„ <code>()</code> è¿ç®—ç¬¦ï¼Œå®ç° <code>callable</code> ç±»å‹çš„çº¿ç¨‹åˆ›å»ºã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;   // å¼•å…¥å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; () &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">Task</span> task;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(task, i)</span></span>;</span><br><span class="line">        t.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// &gt;: 024 () 3 () 1 ()  () 6 () 8 () 9 () 5 ()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™é‡Œéœ€è¦æŠŠ <code>()</code> è¿ç®—ç¬¦é‡è½½ä¸º <code>public</code> è®¿é—®åŸŸï¼Œå¦åˆ™ä¼šè¯†åˆ«ä¸åˆ°ã€‚ä¸è¿‡åœ¨æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåˆ›å»ºè¿‡ç¨‹ä¸ºï¼š<code>thread t(Task(), i)</code></p>
<h1 id="2-C-çº¿ç¨‹çš„-join-æ“ä½œ"><a href="#2-C-çº¿ç¨‹çš„-join-æ“ä½œ" class="headerlink" title="2. C++çº¿ç¨‹çš„ join æ“ä½œ"></a>2. C++çº¿ç¨‹çš„ join æ“ä½œ</h1><p><code>join</code> æ˜¯ä¸€ç§ç­‰å¾…çº¿ç¨‹ç»“æŸçš„è¿ç®—ï¼Œä¾‹å¦‚ <code>main</code> çº¿ç¨‹å¯åŠ¨äº† <code>t</code> çº¿ç¨‹ï¼Œç„¶å <code>t</code> çº¿ç¨‹åœ¨å¯åŠ¨å®Œæˆè¿‡åæ‰§è¡Œäº† <code>t.join()</code> ï¼Œé‚£ä¹ˆ <code>main</code> çº¿ç¨‹éœ€è¦ç­‰å¾… <code>t</code> çº¿ç¨‹æ‰§è¡Œç»“æŸä¹‹åï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œ <code>main</code> å‡½æ•°ä¸‹é¢çš„ç¨‹åºã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">([] &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot;: &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    t1.join();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="function">thread <span class="title">t2</span><span class="params">([] &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id &lt;&lt; <span class="string">&quot;: &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    t2.join();</span><br><span class="line">    <span class="comment">// &gt;: 2: 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">    <span class="comment">//    1:0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ˜¯å› ä¸ºåŸå§‹çº¿ç¨‹åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­æ²¡æœ‰äº†å…¶ä»–çš„äº‹å¯åšï¼Œæˆ–è€…è¯´ç‹¬ç«‹å‡ºæ¥ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œå‡½æ•°æ”¶æ•ˆç”šå¾®ã€‚ä½¿ç”¨ <code>join</code> æ˜¯ç®€å•ç²—æš´çš„ç­‰å¾…çº¿ç¨‹ï¼Œå½“éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œæ›´çµæ´»çš„æ§åˆ¶æ—¶ï¼Œæ¯”å¦‚çœ‹æŸä¸ªçº¿ç¨‹æ˜¯å¦å­˜æ´»ï¼Œæˆ–è€…è®¾ç½®<strong>ç­‰å¾…è¶…æ—¶</strong>ï¼Œå¯ä»¥ä½¿ç”¨<strong>æ¡ä»¶å˜é‡</strong>æˆ–è€…<strong>æœŸå¾…ï¼ˆfuturesï¼Œä¹Ÿç§°æœŸè´§æ¨¡å‹ï¼‰</strong>å»å®ç°ã€‚</p>
<p>å™¢ï¼å¯¹ï¼Œåªèƒ½å¯¹ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€æ¬¡ <code>join</code> æ“ä½œä¸€æ¬¡ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ <code>join</code> æ“ä½œä¹‹å‰ï¼Œå¯¹å…¶ä½¿ç”¨ <code>joinable</code> æ£€æŸ¥æ“ä½œæ›´åŠ åˆé€‚ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">([] &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot;: &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;t1 id: &quot;</span> &lt;&lt; t1.get_id() &lt;&lt; <span class="built_in">endl</span>;   <span class="comment">// &gt;: t1 id: 2</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t1.joinable() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// &gt;: 1</span></span><br><span class="line">    <span class="keyword">if</span> (t1.joinable()) &#123;</span><br><span class="line">        t1.join();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; t1.joinable() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// &gt;: 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-C-çº¿ç¨‹çš„-detach-æ“ä½œ"><a href="#3-C-çº¿ç¨‹çš„-detach-æ“ä½œ" class="headerlink" title="3. C++çº¿ç¨‹çš„ detach æ“ä½œ"></a>3. C++çº¿ç¨‹çš„ detach æ“ä½œ</h1><p>åœ¨<code>C++11</code>ä¸­å¯¹çº¿ç¨‹è§„å®šäº† <code>detach</code> æ“ä½œï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å°†çº¿ç¨‹ä¸å½“å‰çº¿ç¨‹<strong>åˆ†ç¦»</strong>ï¼Œå®é™…ä¸Šè¯¥æ“ä½œå¯ä»¥å°†åˆ›å»ºå¥½çš„çº¿ç¨‹ä¸¢åˆ°åå°å»è¿è¡Œï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€åˆ›å»ºå®ƒçš„çº¿ç¨‹å°†ä¸èƒ½å†ä¸ä¹‹ç›´æ¥äº¤äº’ï¼Œä¾‹å¦‚ <code>join</code> æ“ä½œã€å¼•ç”¨è¯¥å¯¹è±¡ç­‰ã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œè¯¥æ“ä½œéƒ½æ˜¯ç”¨æ¥åˆ›å»º<strong>å®ˆæŠ¤çº¿ç¨‹</strong>çš„ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ä¾‹å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t</span><span class="params">([]&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    t.<span class="built_in">detach</span>();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;joinable? &quot;</span> &lt;&lt; t.joinable() &lt;&lt; <span class="built_in">endl</span>;   <span class="comment">// &gt;: joinable? 0</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t.get_id() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: thread::id of a non-executing thread</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†åˆ†ç¦»çº¿ç¨‹ï¼Œå‰æè‚¯å®šæ˜¯è¯¥çº¿ç¨‹è¦èƒ½åˆ†ç¦»ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>joinable</code> æ¥å¯¹å®ƒè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœåå›çš„æ˜¯ <code>true</code> è¯´æ˜å¯ä»¥å¯¹å®ƒè¿›è¡Œ <code>detach</code> æ“ä½œã€‚</p>
<blockquote>
<p>  å®ˆæŠ¤çº¿ç¨‹ï¼ˆdaemon threadsï¼‰ï¼šåœ¨UNIXä¸­å®ˆæŠ¤çº¿ç¨‹æ˜¯æŒ‡æ²¡æœ‰ä»»ä½•ç”¨æˆ·æ¥å£ï¼Œå¹¶åœ¨åå°è¿è¡Œçš„çº¿ç¨‹ã€‚ç‰¹ç‚¹è¿è¡Œæ—¶é—´é•¿ï¼Œå‰å°æ„Ÿå—ä¸åˆ°è¿™ä¸ªçº¿ç¨‹çš„å­˜åœ¨ ğŸ˜‘ã€‚ï¼ˆfire and forget ç±»å‹çš„ä»»åŠ¡å°±æ˜¯ä½¿ç”¨åˆ°è¿™ç§æ“ä½œäº†ï¼‰</p>
</blockquote>
<h3 id="å‚è€ƒç¨‹åº"><a href="#å‚è€ƒç¨‹åº" class="headerlink" title="å‚è€ƒç¨‹åº"></a>å‚è€ƒç¨‹åº</h3><ol>
<li><p><code>hello_thread.cpp</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/26.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/26 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;   // å¼•å…¥å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func_task</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123; <span class="comment">// å£°æ˜è¦æ‰§è¡Œçš„ä»»åŠ¡å‡½æ•°ï¼ˆä¹Ÿå¯ä¸ºcallableç±»å‹ï¼‰</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; * &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; () &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(func_task, i)</span></span>; <span class="comment">// åˆ›å»ºçº¿ç¨‹ tï¼ˆå¹¶ä¸ºçº¿ç¨‹æŒ‡å®šä»»åŠ¡ func_taskï¼‰</span></span><br><span class="line">        t.<span class="built_in">detach</span>();             <span class="comment">// å°†çº¿ç¨‹ t ä¸å½“å‰çº¿ç¨‹åˆ†ç¦»</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// &gt;: 015 * 9 *  * 2 *  * 7 * 3 * 6 * 4 * 8 *</span></span><br><span class="line">    this_thread::sleep_for(chrono::seconds(<span class="number">1</span>));</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(func_task, i)</span></span>; <span class="comment">// åˆ›å»ºçº¿ç¨‹ tï¼ˆå¹¶ä¸ºçº¿ç¨‹æŒ‡å®šä»»åŠ¡ func_taskï¼‰</span></span><br><span class="line">        t.join();               <span class="comment">// å°†çº¿ç¨‹ t å¹¶å…¥åˆ°å½“å‰çº¿ç¨‹ä¸­</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// &gt;: 0 * 1 * 2 * 3 * 4 * 5 * 6 * 7 * 8 * 9 *</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> func_lambda = [](<span class="keyword">int</span> i) &#123; <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; - &quot;</span>; &#125;;</span><br><span class="line">    <span class="comment">// 024 - 5 -  - 1 - 6 - 7 - 3 - 9 - 8 -  -</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(func_lambda, i)</span></span>;</span><br><span class="line">        t.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 0 - 1 - 2 - 3 - 4 - 5 - 6 - 7 - 8 - 9 -</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(func_lambda, i)</span></span>;</span><br><span class="line">        t.join();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">([](<span class="keyword">int</span> i) &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; - &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        &#125;, i)</span></span>;</span><br><span class="line">        t.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">Task</span> task;</span><br><span class="line">        <span class="function">thread <span class="title">t</span><span class="params">(task, i)</span></span>;</span><br><span class="line">        t.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// &gt;: 024 () 3 () 1 ()  () 6 () 8 () 9 () 5 ()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>thread_join.cpp</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/27.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/27 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">([] &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot;: &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    t1.join();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="function">thread <span class="title">t2</span><span class="params">([] &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id &lt;&lt; <span class="string">&quot;: &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    t2.join();</span><br><span class="line">    <span class="comment">// &gt;: 2: 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">    <span class="comment">//    1:0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">    <span class="comment">// &gt;: 2: 0 1 2 3 4 5 6 7 8 1 :0 1 2 3 4 5 6 7 8 9 9</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>thread_joinable.cpp</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/27.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/27 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">([] &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot;: &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;t1 id: &quot;</span> &lt;&lt; t1.get_id() &lt;&lt; <span class="built_in">endl</span>;   <span class="comment">// &gt;: t1 id: 2</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t1.joinable() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// &gt;: 1</span></span><br><span class="line">    <span class="keyword">if</span> (t1.joinable()) &#123;</span><br><span class="line">        t1.join();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; t1.joinable() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// &gt;: 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>thread_detach.cpp</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/9/27.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/9/27 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t</span><span class="params">([]&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;)</span></span>;</span><br><span class="line">    t.<span class="built_in">detach</span>();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;joinable? &quot;</span> &lt;&lt; t.joinable() &lt;&lt; <span class="built_in">endl</span>;   <span class="comment">// &gt;: joinable? 0</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t.get_id() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: thread::id of a non-executing thread</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>STL</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>C++çš„å¤šçº¿ç¨‹ï¼ˆâ…¡ï¼‰</title>
    <url>/2020/09/28/CPP%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B2/</url>
    <content><![CDATA[<p><a href="https://mp.weixin.qq.com/s/vdx6USLcafB9yriwNpNwBQ">ä¸Šæ¬¡</a>äº†è§£äº†C++å¦‚ä½•åˆ›å»ºã€è¿è¡Œä»¥åŠå¦‚ä½•å¯¹çº¿ç¨‹è¿›è¡Œ <code>join</code> å’Œ <code>detach</code> æ“ä½œã€‚è¿™æ¬¡å°±æ¥äº†è§£çº¿ç¨‹çš„<strong>å‚æ•°ä¼ é€’</strong>ä»¥åŠ<strong>æƒé™è½¬ç§»</strong>æ“ä½œã€‚</p>
<a id="more"></a>
<h1 id="1-å‚æ•°ä¼ é€’"><a href="#1-å‚æ•°ä¼ é€’" class="headerlink" title="1. å‚æ•°ä¼ é€’"></a>1. å‚æ•°ä¼ é€’</h1><p>å¼€é—¨è§å±±åœ°è¯´ï¼Œåœ¨ <code>&lt;thread&gt;</code> ä¸­ï¼Œå¯¹çº¿ç¨‹ä¸­æ‰§è¡Œçš„å‡½æ•°è¿›è¡Œå‚æ•°ä¼ é€’æ˜¯å¾ˆç®€å•ä½†éœ€è¦æ³¨æ„ç»†èŠ‚çš„ã€‚ç®€å•ä¹‹å¤„åœ¨äºæ²¡æœ‰å¤šä½™çš„è¯­æ³•ï¼Œç»†èŠ‚åœ¨äºä¼ é€’å¼•ç”¨å‚æ•°ã€‚ä¸€ä¸ªç®€å•ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> name)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Hello~ &quot;</span> &lt;&lt; name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">(hello, <span class="string">&quot;Cherry&quot;</span>)</span></span>; <span class="comment">// &gt;: Hello~ Cherry</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ <code>t1</code> ï¼Œ<code>t1</code> æ‰§è¡Œçš„å‡½æ•°æ˜¯ <code>hello</code>ï¼Œå®ƒéœ€è¦æ¥æ”¶ä¸€ä¸ª <code>string</code> ç±»å‹çš„å‚æ•°è¿›æ¥ï¼Œç„¶åæ‰“å£°æ‹›å‘¼ <code>&gt;: Hello~XXX</code> ã€‚å¾ˆæ˜æ˜¾çš„ï¼Œå½“éœ€è¦ä¼ é€’å‚æ•°æ—¶ï¼Œç›´æ¥åœ¨ <code>thread</code> çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å°±å¯ä»¥äº†ï¼Œåœ¨åº•å±‚æºç ä¸­æ˜¯è¿™æ ·å®ç°çš„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">thread</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// é¦–å…ˆå£°æ˜å¯å˜é•¿åº¦æ¨¡æ¿ï¼Œæœ‰ä¸€ä¸ªå¿…é¡»æä¾›çš„å‚æ•°æ˜¯ _Callable ï¼Œå…¶ä½™ä¸ºå¯é€‰å‚æ•°</span></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Callable, <span class="keyword">typename</span>... _Args&gt;</span><br><span class="line">    <span class="keyword">explicit</span></span><br><span class="line">    thread(_Callable &amp;&amp;__f, _Args &amp;&amp;... __args) &#123;</span><br><span class="line">        <span class="comment">// æŸ¥çœ‹æ˜¯å¦æ¿€æ´» gthr ä»£ç†</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GTHR_ACTIVE_PROXY</span></span><br><span class="line">        <span class="comment">// Create a reference to pthread_create, not just the gthr weak symbol.</span></span><br><span class="line">    <span class="keyword">auto</span> __depend = <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">void</span>(*)()&gt;(&amp;pthread_create);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">        <span class="keyword">auto</span> __depend = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">        <span class="comment">// åˆ›å»ºæ‰§è¡Œå‡½æ•°ï¼Œå¹¶ä¸”å°†å‚æ•°è¿›è¡Œä¼ é€’</span></span><br><span class="line">        _M_start_thread(_S_make_state(  <span class="comment">// åˆ›å»ºçŠ¶æ€</span></span><br><span class="line">                __make_invoker(         <span class="comment">// åˆ›å»ºæ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ‰§è¡Œ</span></span><br><span class="line">                        <span class="built_in">std</span>::forward&lt;_Callable&gt;(__f),   <span class="comment">// callable ç±»å‹è½¬æ¢</span></span><br><span class="line">                        <span class="built_in">std</span>::forward&lt;_Args&gt;(__args)...) <span class="comment">// å‚æ•°ç±»å‹è½¬æ¢</span></span><br><span class="line">                        ),</span><br><span class="line">                        __depend);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// ç”¨æ¥æ‰§è¡Œçš„åŒ…è£…å™¨ (forwarded tuple elements...)</span></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tuple&gt;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> _<span class="title">Invoker</span> &#123;</span></span><br><span class="line">        <span class="comment">// ... çœç•¥</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span>... _Tp&gt;</span><br><span class="line">    <span class="keyword">using</span> __decayed_tuple = tuple&lt;<span class="keyword">typename</span> <span class="built_in">std</span>::decay&lt;_Tp&gt;::type...&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå¯è°ƒç”¨çš„åŒ…è£…å™¨ï¼Œé‡Œé¢æœ‰ï¼š</span></span><br><span class="line">    <span class="comment">// tuple&#123;DECAY_COPY(__callable), DECAY_COPY(__args)...&#125;.</span></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Callable, <span class="keyword">typename</span>... _Args&gt;</span><br><span class="line">    <span class="keyword">static</span> _Invoker&lt;__decayed_tuple&lt;_Callable, _Args...&gt;&gt;</span><br><span class="line">    __make_invoker(_Callable &amp;&amp;__callable, _Args &amp;&amp;... __args) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;__decayed_tuple&lt;_Callable, _Args...&gt;&#123;</span><br><span class="line">                <span class="built_in">std</span>::forward&lt;_Callable&gt;(__callable), <span class="built_in">std</span>::forward&lt;_Args&gt;(__args)...</span><br><span class="line">        &#125;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>thread</code> æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ª <code>callable</code> ç±»å‹çš„å‚æ•°ä½œä¸ºæ‰§è¡Œå‡½æ•°ï¼Œè¿™ä¸ªæ˜¯å¿…é€‰å‚æ•°ã€‚åé¢å¯ä»¥å¯é€‰é™„åŠ è‹¥å¹²ä¸ª <code>Args</code> ç±»å‹çš„å‚æ•°æ¥å¡«å…… <code>callable</code> å‡½æ•°ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å‘çº¿ç¨‹ä¸­æ‰§è¡Œå‡½æ•°ä¼ é€’å¼•ç”¨ç±»å‹çš„å‚æ•°</strong>å¯ä¸æ˜¯å®¹æ˜“çš„äº‹ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">string</span> <span class="built_in">buffer</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="function">thread <span class="title">t2</span><span class="params">([](<span class="built_in">string</span> buf) &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        buf.append(<span class="string">&quot;world!&quot;</span>);</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; buf &lt;&lt; <span class="built_in">endl</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="comment">// &gt;: 3 - helloworld!</span></span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;, <span class="built_in">buffer</span>)</span></span>;</span><br><span class="line">    t2.join();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; <span class="built_in">buffer</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// &gt;: 1 - hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯è§å˜é‡ <code>buffer</code> åœ¨çº¿ç¨‹ <code>t2</code> ä¸­å¹¶æ²¡æœ‰å¾—åˆ°ä¿®æ”¹ã€‚é‚£ä¹ˆè¯•è¯•å¼•ç”¨ä¼ é€’ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  thread t3([](string &amp;buf) &#123;</span></span><br><span class="line"><span class="comment">     *      buf.append(&quot;world!&quot;);</span></span><br><span class="line"><span class="comment">     *      cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; string buf: &quot; &lt;&lt; &quot; - &quot; &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">     *  &#125;, buffer);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å†™åœ¨ä¸€èˆ¬çš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œå½“ç„¶æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¸è¿‡åœ¨å¤šçº¿ç¨‹ä¸­å´æ˜¯ä¸å¯è¡Œçš„ï¼Œé‚£ä¹ˆè¯¥æ€æ ·ä¼ é€’å¼•ç”¨ç±»å‹ï¼Œç„¶ååœ¨çº¿ç¨‹ä¸­å®Œæˆè®¿é—®å‘¢ï¼Ÿè¿™é‡Œéœ€è¦ä½¿ç”¨ <code>ref()</code> å‡½æ•°å°†å‚æ•°è½¬æ¢æˆå¼•ç”¨ç±»å‹çš„å½¢å¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t_ref</span><span class="params">([](<span class="built_in">string</span> &amp;buf) &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">        buf.append(<span class="string">&quot; world!&quot;</span>);</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; buf &lt;&lt; <span class="built_in">endl</span>;</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="comment">// &gt;: 4 - hello world!</span></span></span></span><br><span class="line"><span class="function"><span class="params">    &#125;, ref(<span class="built_in">buffer</span>))</span></span>;</span><br><span class="line">    t_ref.join();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; <span class="built_in">buffer</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// &gt;: 1 - hello world!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥åœ¨çº¿ç¨‹å†…éƒ¨ï¼Œå¯¹å¤–éƒ¨å˜é‡è¿›è¡Œä¿®æ”¹ã€‚å½“ç„¶ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è¿™æ ·ä¸€ç§æ–¹å¼æ¥å®Œæˆç›¸åŒçš„ç›®çš„ï¼š<strong>ä¼ é€’ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°ï¼Œå¹¶æä¾›ä¸€ä¸ªå¯¹è±¡æŒ‡é’ˆä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">do_something</span><span class="params">(<span class="built_in">string</span> &amp;name)</span> </span>&#123;</span><br><span class="line">        name = <span class="string">&quot;hello~ &quot;</span> + name;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; -&gt; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">Task</span> task;</span><br><span class="line">    <span class="built_in">string</span> name = <span class="string">&quot;Cherry&quot;</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="string">&quot; -&gt; &quot;</span>;</span><br><span class="line">    <span class="function">thread <span class="title">t4</span><span class="params">(&amp;<span class="built_in">Task</span>::do_something, &amp;task, <span class="built_in">std</span>::ref(name))</span></span>;</span><br><span class="line">    t4.join();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// &gt;: Cherry -&gt; hello~ Cherry -&gt; hello~ Cherry</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œä¼ å…¥çº¿ç¨‹æ„é€ å‡½æ•°çš„æœ‰ <code>Task</code> çš„æˆå‘˜å‡½æ•° <code>do_something</code> å‡½æ•°æŒ‡é’ˆï¼Œä»¥åŠä¸€ä¸ª <code>Task</code> ç±»çš„å®ä¾‹ <code>task</code>ï¼Œåœ¨å‰©ä½™çš„å‚æ•°ä¸­ï¼ŒæŠŠç›¸åº”çš„å‚æ•°åˆ—è¡¨ä¼ äº†è¿›æ¥ï¼Œä»è€Œå®ç°åœ¨ <code>Task</code> çš„æˆå‘˜å‡½æ•°ä¸­å¯¹å¤–éƒ¨å˜é‡è¿›è¡Œä¿®æ”¹ã€‚</p>
<h1 id="2-æƒé™è½¬ç§»"><a href="#2-æƒé™è½¬ç§»" class="headerlink" title="2. æƒé™è½¬ç§»"></a>2. æƒé™è½¬ç§»</h1><p>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä¹‹åï¼Œå¦‚æœæƒ³è½¬ç§»æ‰€æœ‰æƒï¼Œé‚£ä¹ˆéœ€è¦ç­‰å¾…çº¿ç¨‹ç»“æŸæ‰èƒ½è¿›è¡Œã€‚é‚£ä¹ˆå¯ä»¥é€šè¿‡çº¿ç¨‹æƒé™è½¬ç§»ï¼Œä½¿ç”¨ <code>move</code> å‡½æ•°æ¥ç§»åŠ¨ä¸€ä¸ª <code>thread</code> æ‰€æœ‰æƒåˆ°å¦ä¸€ä¸ª <code>thread</code> å¯¹è±¡ä¸­å»ï¼Œæ¥å®ç°æ§åˆ¶ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_something</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; ownership! + &quot;</span> &lt;&lt; ++count &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        this_thread::sleep_for(chrono::seconds(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">(do_something)</span></span>;</span><br><span class="line">    this_thread::sleep_for(chrono::seconds(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    thread t2 = <span class="built_in">move</span>(t1);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;t1.joinable() ? &quot;</span> &lt;&lt; t1.joinable() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: t1.joinable() ? 0</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;t2.joinable() ? &quot;</span> &lt;&lt; t2.joinable() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: t2.joinable() ? 1</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 2 ownership! + 1</span></span><br><span class="line"><span class="comment">     * 2 ownership! + 2</span></span><br><span class="line"><span class="comment">     * t1.joinable() ? 0</span></span><br><span class="line"><span class="comment">     * t2.joinable() ? 1</span></span><br><span class="line"><span class="comment">     * 2 ownership! + 3</span></span><br><span class="line"><span class="comment">     * 2 ownership! + 4</span></span><br><span class="line"><span class="comment">     * ...</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>);<span class="comment">// åœ¨è¿™é‡Œç©ºè½¬ï¼Œä¸è®© main çº¿ç¨‹ç»“æŸæ‰ï¼Œå¦åˆ™ä¼šä¸¢å¤±è¾“å‡º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>t1</code> é¦–å…ˆè·å–äº†æ‰§è¡Œå‡½æ•° <code>do_something</code> ï¼Œç„¶åæ‰§è¡Œä¸¤ç§’é’Ÿåï¼Œé‡æ–°å°† <code>do_something</code> è½¬ç§»ç»™äº† <code>t2</code> ï¼Œæ­¤æ—¶ <code>t1</code> ä¾¿ä¸å†æœ‰ç»‘å®šæ‰§è¡Œå‡½æ•°äº†ã€‚ä» <code>joinable</code> ä¹Ÿå¯çœ‹å‡ºæ¥ <code>t1</code> å·²ç»å˜æˆä¸å¯ <code>join</code> çš„å¯¹è±¡ã€‚ä¸ä»…å¦‚æ­¤ï¼Œåœ¨æƒé™è½¬ç§»è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰è®©åŸæ¥æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ–­æˆ–é‡å¯ï¼Œä»è¾“å‡º <code>1, 2, 3 ,4 ...</code> è¿ç»­æ€§ä¸­å¯ä»¥çœ‹å‡ºã€‚</p>
<p>è¢«è½¬ç§»èµ°æƒé™çš„ <code>t1</code> å°±å¥½åƒä¸€ä¸ªç©ºå£³ï¼Œå®ƒè™½ç„¶ä»ç„¶æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼ˆè¿˜å¯ä»¥è¢« <code>move</code> ï¼‰ï¼Œä½†æ˜¯å®ƒçš„æ‰§è¡Œå‡½æ•°å·²ç»æœ¨æœ‰äº†ï¼ˆå°±ç®— <code>move</code> ï¼Œæ¥æ”¶çš„å¯¹è±¡ä¹Ÿæ¥æ”¶ä¸åˆ°ä»»ä½•ä¸œè¥¿ï¼‰ï¼Œæ‰€ä»¥å¯¹å®ƒå†è¿›è¡Œçº¿ç¨‹ä¸Šçš„æ“ä½œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_something</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; ownership! + &quot;</span> &lt;&lt; ++count &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        this_thread::sleep_for(chrono::seconds(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    thread t4 = <span class="built_in">move</span>(t1); <span class="comment">// è™½ç„¶è½¬ç§»äº†è¿‡æ¥ï¼Œä½†æ˜¯çº¿ç¨‹ t4 å¹¶æ²¡æœ‰å¯æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t4.joinable() &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// &gt;: 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ä»…å¦‚æ­¤ï¼Œå¯¹ä¸€ä¸ªæ‹¥æœ‰æ‰§è¡Œå‡½æ•°çš„ <code>thread</code> å¯¹è±¡è¿›è¡Œ <code>move</code> èµ‹å€¼æ—¶ï¼Œä¹Ÿä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_something</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; this_thread::get_id() &lt;&lt; <span class="string">&quot; ownership! + &quot;</span> &lt;&lt; ++count &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        this_thread::sleep_for(chrono::seconds(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">(do_something)</span></span>;</span><br><span class="line">    this_thread::sleep_for(chrono::seconds(<span class="number">2</span>));</span><br><span class="line">    thread t2 = <span class="built_in">move</span>(t1);</span><br><span class="line">    thread t3 = thread(do_something);</span><br><span class="line">    t3 = <span class="built_in">move</span>(t2); <span class="comment">// ä¼šæŠ¥é”™ï¼Œå› ä¸º t3 å·²ç»å’Œä¸€ä¸ªå‡½æ•°å…³è”ï¼Œè¿™æ—¶å€™å†ç»™ä»–ä¸€ä¸ªä¼šæŠ¥é”™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥è¿™ä¸ªæ˜¯ä¸å¯ä»¥è¢«è¦†ç›–çš„ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼š<strong>å¯ä»¥é€šè¿‡</strong> <code>std::move()</code> <strong>è½¬ç§»ä¸€ä¸ªçº¿ç¨‹æ‰€æœ‰æƒç»™ä¸€ä¸ªæœªå…³è”çº¿ç¨‹çš„</strong> <code>thread</code> <strong>å¯¹è±¡ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡èµ‹ä¸€ä¸ªæ–°å€¼çš„æ–¹å¼ä¸¢å¼ƒä¸€ä¸ªçº¿ç¨‹</strong>ã€‚</p>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>STL</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ç±»çš„åˆè¯†</title>
    <url>/2020/10/08/CPP%E7%B1%BB%E7%9A%84%E5%88%9D%E8%AF%86/</url>
    <content><![CDATA[<p>è¿™ä¸¤å¤©è¡¥äº†è¡¥C++å…³äºç±»çš„å†…å®¹ï¼Œå‚è€ƒçš„æ˜¯  <a href="https://book.douban.com/subject/25708312/">C++ Primer (5th)</a>ã€‚</p>
<blockquote>
<p>   ç±»çš„åŸºæœ¬æ€æƒ³æ˜¯<strong>æ•°æ®æŠ½è±¡ï¼ˆData Abstractionï¼‰</strong>å’Œ<strong>å°è£…ï¼ˆencapsulationï¼‰</strong>ã€‚æ•°æ®æŠ½è±¡æ˜¯ä¸€ç§ä¾èµ–æ¥å£ï¼ˆinterfaceï¼‰å’Œå®ç°ï¼ˆimplementationï¼‰åˆ†ç¦»çš„ç¼–ç¨‹æŠ€æœ¯ã€‚å°è£…å®ç°äº†ç±»çš„æ¥å£å’Œå®ç°çš„åˆ†ç¦»ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="1-å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹"><a href="#1-å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹" class="headerlink" title="1. å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹"></a>1. å®šä¹‰æŠ½è±¡æ•°æ®ç±»å‹</h1><p>å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªç±»ï¼šå®ƒæ˜¯ä¹¦ç±çš„æŠ½è±¡ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼š</p>
<ul>
<li><code>isbn</code>ï¼šä¹¦ç±çš„ <code>ISBN</code> å·</li>
<li><code>units_sold</code>ï¼šä¹¦ç±çš„é”€å”®æ•°é‡</li>
<li><code>revenue</code>ï¼šä¹¦ç±çš„é”€å”®é¢</li>
</ul>
<p>é‚£ä¹ˆè¿™ä¸ªç±»å¯ä»¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ostream;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sales_data</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">string</span> bookNo; 			<span class="comment">// isbn</span></span><br><span class="line">    <span class="keyword">unsigned</span> units_sold = <span class="number">0</span>;<span class="comment">// å–å‡ºå»å¤šå°‘æœ¬</span></span><br><span class="line">    <span class="keyword">double</span> revenue = <span class="number">0.0</span>;;	<span class="comment">// è¿™æœ¬ä¹¦æ‰€è·å¾—çš„æ”¶å…¥</span></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">avg_price</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// å››ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line">    Sales_data() = <span class="keyword">default</span>;</span><br><span class="line">    Sales_data(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s) : bookNo(s) &#123;&#125;;</span><br><span class="line">    Sales_data(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s, <span class="keyword">unsigned</span> n, <span class="keyword">double</span> p) : bookNo(s), units_sold(n), revenue(p * n) &#123;&#125;;</span><br><span class="line">    Sales_data(istream &amp;);</span><br><span class="line">    <span class="comment">// ä¸¤ä¸ªæˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">isbn</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> bookNo; &#125;;	<span class="comment">// è·å–åˆ°è¿™æœ¬ä¹¦çš„ isbn å·ï¼Œé»˜è®¤ inline å‡½æ•°</span></span><br><span class="line">    <span class="function">Sales_data &amp;<span class="title">combine</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;)</span></span>;<span class="comment">// å°†ä¸¤ä¸ª Sales_Data å‡ºå”®é‡ç›¸åŠ </span></span><br><span class="line">    <span class="comment">// å‹å…ƒå£°æ˜å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> Sales_data <span class="title">add</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> istream &amp;<span class="title">read</span><span class="params">(istream &amp;, Sales_data &amp;)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‰ä¸ªéæˆå‘˜æ¥å£å‡½æ•°</span></span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;is, Sales_data &amp;item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> price = <span class="number">0</span>;</span><br><span class="line">    is &gt;&gt; item.bookNo &gt;&gt; item.units_sold &gt;&gt; price;</span><br><span class="line">    item.revenue = price * item.units_sold;</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;os, <span class="keyword">const</span> Sales_data &amp;item)</span> </span>&#123;</span><br><span class="line">    os &lt;&lt; item.isbn() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.units_sold &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">       &lt;&lt; item.revenue &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.avg_price();</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Sales_data <span class="title">add</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;lhs, <span class="keyword">const</span> Sales_data &amp;rhs)</span> </span>&#123;</span><br><span class="line">    Sales_data sum = lhs;</span><br><span class="line">    sum.combine(rhs);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-1-æˆå‘˜å‡½æ•°"><a href="#1-1-æˆå‘˜å‡½æ•°" class="headerlink" title="1.1 æˆå‘˜å‡½æ•°"></a>1.1 æˆå‘˜å‡½æ•°</h2><p>å…¶ä¸­çš„ <code>double avg_price() const;</code> ã€ <code>string isbn() const;</code>  ã€ <code>Sales_data &amp;combine(const Sales_data &amp;);</code> å‡åªæœ‰å£°æ˜ï¼Œå¹¶æœªå…·ä½“å®šä¹‰ã€‚</p>
<blockquote>
<p>  æˆå‘˜å‡½æ•°å¿…é¡»åœ¨ç±»çš„å†…éƒ¨<strong>å£°æ˜</strong>ï¼Œä½†æ˜¯ä¸æ˜¯å¿…é¡»åœ¨ç±»çš„å†…éƒ¨<strong>å®šä¹‰</strong>ã€‚è€Œä¸”å®šä¹‰åœ¨ç±»å†…éƒ¨çš„å‡½æ•°æ˜¯éšå¼ <code>inline</code> çš„ã€‚</p>
<p>  æˆå‘˜å‡½æ•°é€šè¿‡ä¸€ä¸ªåä¸º <code>this</code> çš„é¢å¤–éšå¼å‚æ•°æ¥è®¿é—®è°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬åœ¨è°ƒç”¨ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">total.isbn();</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šç¼–è¯‘å™¨ä¼šæŠŠ <code>total</code> çš„åœ°å€ä¼ é€’ç»™ <code>isbn()</code> çš„éšå¼å½¢å‚ <code>this</code>ï¼Œå¯ä»¥å½“ä½œä»¥ä¸‹è°ƒç”¨è¿‡ç¨‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Sales_data::isbn(&amp;total);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€ç‚¹å¯ä»¥ç±»æ¯” <code>Python</code> ä¸­æˆå‘˜å‡½æ•°çš„ <code>self</code> å˜é‡ã€‚åœ¨æˆå‘˜å‡½æ•°ä½“å†…éƒ¨å»ä½¿ç”¨ä»»ä½•å¯¹è±¡çš„æˆå‘˜ï¼Œéƒ½ä¼šè¢«çœ‹ä½œæ˜¯ <code>this</code> çš„éšå¼å¼•ç”¨è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œ <code>isbn()</code> å‡½æ•°çš„è°ƒç”¨å¯ä»¥ç­‰ä»·ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">isbn</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;bookNo; &#125;;</span><br></pre></td></tr></table></figure>
<p>è€Œä¸”ï¼Œæ¯ä¸ªå¯¹è±¡çš„ <code>this</code> æŒ‡é’ˆæ€»æ˜¯æŒ‡å‘è¯¥å¯¹è±¡è‡ªå·±ï¼Œæ‰€ä»¥å®ƒæ˜¯é»˜è®¤ <code>const</code> çš„ï¼ˆä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼‰ï¼Œä¸å…è®¸æ”¹å˜ <code>this</code> ä¸­çš„åœ°å€ã€‚</p>
<h2 id="1-2-const-æˆå‘˜å‡½æ•°"><a href="#1-2-const-æˆå‘˜å‡½æ•°" class="headerlink" title="1.2 const æˆå‘˜å‡½æ•°"></a>1.2 <code>const</code> æˆå‘˜å‡½æ•°</h2><blockquote>
<p>  ç´§éšå‚æ•°åˆ—è¡¨ä¹‹åçš„ <code>const</code> å…³é”®å­—ï¼Œä½œç”¨æ˜¯ä¿®æ”¹éšå¼ <code>this</code> æŒ‡é’ˆçš„ç±»å‹ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ <code>isbn()</code> å‡½æ•°ï¼Œå‡½æ•°ç­¾åæœ«å°¾é™„å¸¦äº†ä¸€ä¸ª <code>const</code> ï¼Œè¿™ä¸ª <code>const</code> æ„æ€æ˜¯è¯´ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œä¸å…è®¸ä¿®æ”¹è°ƒç”¨è€…çš„å†…å®¹ï¼ˆå½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–ï¼Œä¾‹å¦‚å£°æ˜äº† <code>mutable</code> çš„æˆå‘˜ğŸ˜®ï¼‰ã€‚ç®€è€Œè¨€ä¹‹ <code>const</code> æ”¾åœ¨å‡½æ•°ç­¾åä¹‹åæ„æ€æ˜¯ï¼šå¯¹è±¡åªèƒ½è¯»ä¸èƒ½å†™ã€‚</p>
<blockquote>
<p>  å¸¸é‡å¯¹è±¡ï¼Œä»¥åŠå¸¸é‡å¯¹è±¡çš„å¼•ç”¨æˆ–æŒ‡é’ˆéƒ½åªèƒ½è°ƒç”¨å¸¸é‡æˆå‘˜å‡½æ•°ã€‚</p>
</blockquote>
<h2 id="1-3-å®šä¹‰ä¸€ä¸ªè¿”å›-this-å¯¹è±¡çš„å‡½æ•°"><a href="#1-3-å®šä¹‰ä¸€ä¸ªè¿”å›-this-å¯¹è±¡çš„å‡½æ•°" class="headerlink" title="1.3 å®šä¹‰ä¸€ä¸ªè¿”å› this å¯¹è±¡çš„å‡½æ•°"></a>1.3 å®šä¹‰ä¸€ä¸ªè¿”å› <code>this</code> å¯¹è±¡çš„å‡½æ•°</h2><p>æ¥ï¼Œç›´æ¥çœ‹ä¾‹å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Sales_data &amp;<span class="title">Sales_data::combine</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;rhs)</span> </span>&#123;</span><br><span class="line">    units_sold += rhs.units_sold;</span><br><span class="line">    revenue += rhs.revenue;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŠŸèƒ½ç±»ä¼¼äº <code>+=</code>ï¼Œå…¶è¿”å›å€¼ä¸º <code>Sales_data &amp;</code> ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆæœ€åè¿”å›å€¼ä¸º <code>*this</code>ï¼Œä¹Ÿå°±æŠŠè°ƒç”¨è€…ç»™å¸¦äº†å›æ¥ã€‚è¿™æ ·å†™çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥è¿™æ ·å­ç”¨ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">data.combine(b).combine(c).combine(e).......</span><br></pre></td></tr></table></figure>
<h2 id="1-4-å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°"><a href="#1-4-å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°" class="headerlink" title="1.4 å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°"></a>1.4 å®šä¹‰ç±»ç›¸å…³çš„éæˆå‘˜å‡½æ•°</h2><p>ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Sales_data <span class="title">add</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;, Sales_data &amp;)</span></span>;</span><br></pre></td></tr></table></figure>
<p>ä¸‰ä¸ªå‡½æ•°ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°å¹¶ä¸æ˜¯æˆå‘˜å‡½æ•°ï¼Œä½†æ˜¯å®ƒä»¬åšäº†ä¸€äº›è¾…åŠ©å·¥ä½œï¼Œæ‰€ä»¥å®ƒä»¬å’Œ <code>Sales_data</code> ç±»ç›¸å…³ï¼Œè¿™æ ·çš„å‡½æ•°<strong>ä¸€èˆ¬éƒ½è¦æ”¾åˆ°ç±»å£°æ˜çš„å¤´æ–‡ä»¶å†…</strong>ï¼Œè¿™æ ·æ–¹ä¾¿ç”¨æˆ·å¼•å…¥ä¸€ä¸ªå¤´æ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h2 id="1-5-å®šä¹‰æ„é€ å‡½æ•°"><a href="#1-5-å®šä¹‰æ„é€ å‡½æ•°" class="headerlink" title="1.5 å®šä¹‰æ„é€ å‡½æ•°"></a>1.5 å®šä¹‰æ„é€ å‡½æ•°</h2><p>å…³äºæ„é€ å‡½æ•°ï¼Œå’Œ <code>Java</code> å®ƒä»¬éƒ½ç±»ä¼¼ï¼šæ²¡è¿”å›å€¼ï¼Œå‡½æ•°åå’Œç±»ååŒåï¼Œå¯é‡è½½ï¼Œå¦‚æœä¸€ä¸ªéƒ½æ²¡æœ‰é‚£ä¹ˆç¼–è¯‘å™¨ä¼šé»˜è®¤ç»™è¡¥ä¸Šï¼Œå¦‚æœæœ‰ä»»æ„ä¸€ä¸ªé‚£ä¹ˆç¼–è¯‘å™¨ä¸è¡¥â€¦â€¦åœ¨è¿™é‡Œä¸»è¦è¯´ä¸€ä¸ªä¸åŒçš„ï¼š</p>
<p><code>= default</code> é»˜è®¤æ„é€ å‡½æ•°ï¼šè¿™æ˜¯ <code>C++11</code> å¸¦æ¥çš„æ–°ç‰¹æ€§ï¼Œå½“å®šä¹‰äº†å…¶ä»–ï¼ˆæœ‰å‚æ•°ï¼‰çš„æ„é€ å‡½æ•°åï¼Œå¦‚æœè¿˜éœ€è¦é»˜è®¤ç©ºå‚æ•°åˆ—è¡¨çš„æ„é€ å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>Sales_data() = default;</code> æ¥è®©ç¼–è¯‘å™¨ç»§ç»­è¡¥ä¸Šã€‚åŒæ ·çš„ï¼Œå¦‚æœåœ¨ç±»å†…éƒ¨ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°å°±æ˜¯ <code>inline</code> çš„ã€‚</p>
<p>åˆå§‹å€¼åˆ—è¡¨å¯ä»¥ä½¿ç”¨ <code>Sales_data(const string &amp;s) : bookNo(s) &#123;&#125;;</code> è¿™æ ·çš„å½¢å¼æ¥å®šä¹‰ï¼Œ<code>:</code> å†’å·åŠ  <code>()</code> å®šä¹‰æ³•ï¼ˆè‡ªå·±æƒ³çš„åå­—ğŸ˜Šï¼‰</p>
<h1 id="2-è®¿é—®æ§åˆ¶å’Œå°è£…"><a href="#2-è®¿é—®æ§åˆ¶å’Œå°è£…" class="headerlink" title="2. è®¿é—®æ§åˆ¶å’Œå°è£…"></a>2. è®¿é—®æ§åˆ¶å’Œå°è£…</h1><p>ä½¿ç”¨ <code>public</code> ã€<code>protected</code> ã€<code>private</code> è®¿é—®è¯´æ˜ç¬¦æ¥æ§åˆ¶ä¸‹é¢çš„å†…å®¹æ˜¯å¯ä»¥æ€æ ·è®¿é—®çš„ã€‚</p>
<p>ä½¿ç”¨ <code>struct</code> å’Œ <code>class</code> å…³é”®å­—æ¥å£°æ˜ç±»ï¼Œä»…ä»…åœ¨è®¿é—®æ–¹å¼ä¸Šæœ‰æ‰€å·®åˆ«ï¼š</p>
<blockquote>
<p>  ä½¿ç”¨ <code>struct</code> æ—¶ï¼Œé»˜è®¤ç±»çš„æˆå‘˜éƒ½æ˜¯ <code>public</code> çš„ï¼›ä½¿ç”¨ <code>class</code> æ—¶ï¼Œé»˜è®¤ç±»çš„æˆå‘˜éƒ½æ˜¯ <code>private</code> çš„ã€‚æ‰€ä»¥ä»…ä»…é€šè¿‡ç¼–ç¨‹é£æ ¼å°±å¯å†³å®šä½¿ç”¨å“ªä¸€ä¸ªã€‚</p>
</blockquote>
<h2 id="2-1-å‹å…ƒ"><a href="#2-1-å‹å…ƒ" class="headerlink" title="2.1 å‹å…ƒ"></a>2.1 å‹å…ƒ</h2><p>è¿™ä¸ªä¸œè¥¿å°±æ˜¯æ–¹ä¾¿äº†éæœ¬ç±»çš„å†…å®¹æ¥è®¿é—®æœ¬ç±»çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼šå…¶ä»–ç±»æˆ–è€…å…¶ä»–ä¸å±äºè‡ªå·±çš„å‡½æ•°ï¼Œä¾‹å¦‚çš„ä¾‹å¦‚ï¼šä¸Šé¢çš„</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‹å…ƒå£°æ˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> Sales_data <span class="title">add</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">friend</span> ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">friend</span> istream &amp;<span class="title">read</span><span class="params">(istream &amp;, Sales_data &amp;)</span></span>;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•åŸæ¥æ˜¯æ²¡åŠæ³•è®¿é—®ç±»å†…çš„ç§æœ‰å˜é‡çš„ï¼Œä¾‹å¦‚ <code>revenue</code> æˆå‘˜ï¼Œä½†æ˜¯åŠ ä¸Š <code>friend</code> ä¹‹åå°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;os, <span class="keyword">const</span> Sales_data &amp;item)</span> </span>&#123;</span><br><span class="line">    os &lt;&lt; item.isbn() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.units_sold &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">       &lt;&lt; item.revenue &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.avg_price();</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‹å…ƒå£°æ˜åªèƒ½æ”¾åˆ°ç±»çš„å†…éƒ¨ï¼Œä½†æ˜¯ç±»å†…å‡ºç°çš„å…·ä½“ä½ç½®ä¸é™ã€‚è€Œä¸”å‹å…ƒä¸å—è®¿é—®æ§åˆ¶çš„é™åˆ¶ã€‚</p>
<blockquote>
<p>  ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½åœ¨ç±»çš„å®šä¹‰å¼€å§‹æˆ–è€…ç»“æŸå‰çš„ä½ç½®é›†ä¸­å£°æ˜å‹å…ƒã€‚</p>
</blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå‹å…ƒä¸èƒ½ä¼ é€’ï¼Œä¾‹å¦‚ <code>B</code> æ˜¯ <code>A</code> çš„å‹å…ƒï¼Œ<code>C</code> æ˜¯ <code>B</code> çš„å‹å…ƒï¼Œé‚£ä¹ˆ <code>C</code> ä¹Ÿä¸èƒ½è®¿é—®äººå®¶ <code>A</code> çš„ç§æœ‰å˜é‡ï¼Œè°çš„æœ‹å‹å°±æ˜¯è°çš„ï¼Œä¸èƒ½ä¹±æ¥ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå‹å…ƒå‡½æ•°åœ¨ç±»å†…å£°æ˜ä¹‹åï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œå®ç°ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€ç§å°±æ˜¯ç›´æ¥åœ¨ç±»å†…å®ç°ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç±»å¤–å†…è”ã€‚å¦‚æœè¿™ä¸¤ä¸ªéƒ½ä¸æ»¡æ„ï¼Œéœ€è¦æ”¾åˆ°å¦å¤–çš„æ–‡ä»¶å¤¹é‡Œè¿›è¡Œå®ç°ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œå¿…é¡»å†…è”ã€‚</p>
<p>è€Œä¸”ï¼Œå¦‚æœæ˜¯ç±»çš„æˆå‘˜å‡½æ•°å»è°ƒç”¨ç±»çš„å‹å…ƒå‡½æ•°ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯å¿…é¡»è¢«å£°æ˜è¿‡çš„ï¼ˆä¸è¿‡ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½è¦æ±‚è¿™æ ·çš„è§„å®šï¼‰ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//    X() &#123; f(); &#125; é”™è¯¯çš„ï¼f() è¿˜æ²¡æœ‰å£°æ˜ï¼</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">g</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">h</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// void X::g() &#123; return f(); &#125; é”™è¯¯çš„ï¼å› ä¸º f() è¿˜æ²¡æœ‰å¾—åˆ°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">X::h</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> f(); &#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆè¿™é‡Œ CLion æœ‰å‘ï¼æš‚æ—¶æ²¡å¡«ï¼å…·ä½“ç°è±¡å°±æ˜¯ï¼šæœ‰æ—¶å€™ä¸å•ç‹¬å†å£°æ˜ä¸€éä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å‹å…ƒå‡½æ•°ï¼Œå°±æ˜¯æ²¡è¯­æ³•æç¤ºï¼Œä½†æœ‰æ—¶å€™ç›´æ¥å°±æ˜¯æŠ¥é”™ï¼æ¢ä¸ªæ„é€ å‡½æ•°ã€å¡«å……åˆå§‹å€¼éƒ½èƒ½è®©è¿™ä¸ªé—®é¢˜è§£å†³ã€‚å…·ä½“å‚è€ƒä¸‹é¢çš„ <code>X.hh</code> å’Œ <code>X.cc</code>ï¼‰</p>
<h2 id="2-X-èŠç‚¹å¥½ç©çš„"><a href="#2-X-èŠç‚¹å¥½ç©çš„" class="headerlink" title="2.X èŠç‚¹å¥½ç©çš„"></a>2.X èŠç‚¹å¥½ç©çš„</h2><p><strong>å°è£…çš„å¥½å¤„</strong>ï¼Œä¸¤ä¸ªä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç¡®ä¿ç”¨æˆ·ä»£ç ä¸ä¼šæ— æ„é—´ç ´åå°è£…å¯¹è±¡çš„çŠ¶æ€</li>
<li>è¢«å°è£…çš„å…·ä½“å®ç°ï¼Œå¯ä»¥éšæ—¶æ”¹å˜ï¼Œåªè¦å¯¹å¤–çš„æ¥å£æ²¡å˜å°±è¡Œ</li>
</ul>
<h1 id="3-å…¶ä»–ç‰¹æ€§"><a href="#3-å…¶ä»–ç‰¹æ€§" class="headerlink" title="3. å…¶ä»–ç‰¹æ€§"></a>3. å…¶ä»–ç‰¹æ€§</h1><h2 id="3-1-æˆå‘˜ç±»å‹åˆ«å"><a href="#3-1-æˆå‘˜ç±»å‹åˆ«å" class="headerlink" title="3.1 æˆå‘˜ç±»å‹åˆ«å"></a>3.1 æˆå‘˜ç±»å‹åˆ«å</h2><p>ä½¿ç”¨ <code>typedef type name</code> æˆ–è€… <code>using name = type</code> æ¥å®Œæˆå®šä¹‰ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span>::size_type pos;</span><br><span class="line"><span class="keyword">using</span> ScreenIndex = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Screen&gt;::size_type;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆåœ¨ä¸‹æ–‡ä¸­ï¼Œå°±å¯ä»¥è¿™æ ·ä½¿ç”¨äº†ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Screen(pos ht, pos wd, <span class="keyword">char</span> c) : <span class="built_in">height</span>(ht), <span class="built_in">width</span>(wd), contents(ht * wd, c) &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">(ScreenIndex index)</span></span>;</span><br></pre></td></tr></table></figure>
<p>è€Œä¸”ç”¨æ¥å®šä¹‰ç±»å‹çš„æˆå‘˜å¿…é¡»æ”¾åœ¨æœ€å‰é¢ï¼Œå› ä¸º<strong>å…ˆå®šä¹‰åä½¿ç”¨</strong>ã€‚</p>
<h2 id="3-2-å†…è”å‡½æ•°-inline"><a href="#3-2-å†…è”å‡½æ•°-inline" class="headerlink" title="3.2 å†…è”å‡½æ•° inline"></a>3.2 å†…è”å‡½æ•° <code>inline</code></h2><blockquote>
<p>   åœ¨ç±»çš„å†…éƒ¨å®šä¹‰çš„æˆå‘˜å‡½æ•°é»˜è®¤ä¸º <code>inline</code> ç±»å‹ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›è§„æ¨¡è¾ƒå°çš„å‡½æ•°é€‚åˆäºè¢«å£°æ˜æˆå†…è”å‡½æ•°ï¼Œç„¶åæ”¾åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Screen</span> &#123;</span></span><br><span class="line">    <span class="comment">// å£°æ˜ä¸€ä¸ªå‹å…ƒ</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">Windows_Mgr</span>;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ç±»å‹åˆ«åç­‰ä»·åœ°å»å£°æ˜ä¸€ä¸ªç±»å‹åå­—</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span>::size_type pos;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">char</span> <span class="title">get</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> contents[<span class="built_in">cursor</span>]; &#125;   <span class="comment">// éšå¼å†…è”å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">get</span><span class="params">(pos r, pos c)</span> <span class="keyword">const</span></span>;          	<span class="comment">// æ˜¾å¼å†…è”å‡½æ•°</span></span><br><span class="line">    <span class="function">Screen &amp;<span class="title">move</span><span class="params">(pos r, pos c)</span></span>;                     <span class="comment">// èƒ½åœ¨å¤–é¢è¢«è®¾ç½®ä¸ºå†…è”å‡½æ•°</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    pos <span class="built_in">cursor</span> = <span class="number">0</span>;</span><br><span class="line">    pos <span class="built_in">height</span> = <span class="number">0</span>, <span class="built_in">width</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> contents;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> Screen &amp;<span class="title">Screen::move</span><span class="params">(pos r, pos c)</span> </span>&#123;</span><br><span class="line">    pos row = r * <span class="built_in">width</span>;</span><br><span class="line">    <span class="built_in">cursor</span> = row + c;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;   <span class="comment">// æŠŠè‡ªå·±è¿”å›å›å»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œä½¿ç”¨å†…è”å‡½æ•°æ—¶è¦æ³¨æ„ï¼š</p>
<p>è¦ä¹ˆåœ¨ <code>.hh</code> å¤´æ–‡ä»¶ä¸­å†™å¥½ <code>inline</code> å‡½æ•°çš„å®šä¹‰ï¼ˆå’Œå£°æ˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼‰ï¼Œè¦ä¹ˆåœ¨ <code>.cc</code> æ–‡ä»¶ä¸­ä¸è¦å†™å½“ä½œä¸€ä¸ªæ™®é€šæˆå‘˜å‡½æ•°ã€‚</p>
<h2 id="3-3-å¯å˜æ•°æ®æˆå‘˜"><a href="#3-3-å¯å˜æ•°æ®æˆå‘˜" class="headerlink" title="3.3 å¯å˜æ•°æ®æˆå‘˜"></a>3.3 å¯å˜æ•°æ®æˆå‘˜</h2><p><code>mutable</code> æ‰­è½¬ä¸€åˆ‡ï¼Œå³ä¾¿è°ƒç”¨ä¸€ä¸ª <code>const</code> æ–¹æ³•ï¼Œå¦‚æœå†…éƒ¨ä¿®æ”¹çš„å˜é‡æ˜¯å£°æ˜ä¸º <code>mutable</code> çš„ï¼Œé‚£ä¹ˆå®ƒä¹Ÿå¯ä»¥æ­£å¸¸ä¿®æ”¹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sales_data</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span></span><br><span class="line">    <span class="keyword">mutable</span> <span class="keyword">int</span> assess_ctr = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Sales_data() = <span class="keyword">default</span>;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">do_somethings</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Sales_data::do_somethings</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    assess_ctr++; <span class="comment">// è¿™æ ·ä¹Ÿæ˜¯æˆç«‹çš„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†~ğŸ¥±è¿™æ¬¡å°±å…ˆåˆ°è¿™é‡Œâ€¦â€¦ğŸ˜ªğŸ˜ªğŸ˜ª</p>
<h1 id="å‚è€ƒç¨‹åº"><a href="#å‚è€ƒç¨‹åº" class="headerlink" title="å‚è€ƒç¨‹åº"></a>å‚è€ƒç¨‹åº</h1><p><code>Sales_data.hh</code>:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/10/7.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/10/7 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CXX_EXE_SALES_DATA_HH</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CXX_EXE_SALES_DATA_HH</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ostream;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sales_data</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">string</span> bookNo;</span><br><span class="line">    <span class="keyword">unsigned</span> units_sold = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> revenue = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">mutable</span> <span class="keyword">int</span> assess_ctr = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">avg_price</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Sales_data() = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line">    Sales_data(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s) : bookNo(s) &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Sales_data(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s, <span class="keyword">unsigned</span> n, <span class="keyword">double</span> p) : bookNo(s), units_sold(n), revenue(p * n) &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Sales_data(istream &amp;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">isbn</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> bookNo; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function">Sales_data &amp;<span class="title">combine</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> Sales_data <span class="title">add</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;lhs, <span class="keyword">const</span> Sales_data &amp;rhs)</span> </span>&#123;</span><br><span class="line">        Sales_data sum = lhs;</span><br><span class="line">        sum.combine(rhs);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;, <span class="keyword">const</span> Sales_data &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> istream &amp;<span class="title">read</span><span class="params">(istream &amp;, Sales_data &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">unsigned</span> <span class="title">get_units</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">do_somethings</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">unsigned</span> <span class="title">Sales_data::get_units</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> units_sold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Sales_data::do_somethings</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    assess_ctr++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> istream &amp;<span class="title">read</span><span class="params">(istream &amp;is, Sales_data &amp;item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> price = <span class="number">0</span>;</span><br><span class="line">    is &gt;&gt; item.bookNo &gt;&gt; item.units_sold &gt;&gt; price;</span><br><span class="line">    item.revenue = price * item.units_sold;</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;os, <span class="keyword">const</span> Sales_data &amp;item)</span> </span>&#123;</span><br><span class="line">    os &lt;&lt; item.isbn() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.units_sold &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">       &lt;&lt; item.revenue &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.avg_price();</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//CXX_EXE_SALES_DATA_HH</span></span></span><br></pre></td></tr></table></figure>
<p><code>Sales_data.cc</code>:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/10/7.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/10/7 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Sales_data.hh&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">Sales_data::avg_price</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (units_sold) <span class="keyword">return</span> revenue / units_sold;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Sales_data &amp;<span class="title">Sales_data::combine</span><span class="params">(<span class="keyword">const</span> Sales_data &amp;rhs)</span> </span>&#123;</span><br><span class="line">    units_sold += rhs.units_sold;</span><br><span class="line">    revenue += rhs.revenue;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Sales_data::Sales_data(istream &amp;is) &#123;</span><br><span class="line">    <span class="built_in">read</span>(is, *<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>X.cc</code>:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/10/8.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/10/8 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;X.hh&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">X::get_id</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>X.hh</code>:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Xiaozhong on 2020/10/8.</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2020/10/8 Xiaozhong. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CXX_EXE_X_HH</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CXX_EXE_X_HH</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>, <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">helloX</span><span class="params">(<span class="keyword">const</span> X &amp;x)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;hello World!&quot;</span> &lt;&lt; x.id &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    X() = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get_id</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//CXX_EXE_X_HH</span></span></span><br></pre></td></tr></table></figure>
<p><code>CMakeLists.txt</code>:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(CXX_Exe)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(main main.cc</span><br><span class="line">        Sales_data.cc Sales_data.hh</span><br><span class="line">        Screen.hh Screen.cc</span><br><span class="line">        Windows_Mgr.hh Windows_Mgr.cc</span><br><span class="line">        X.hh X.cc</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Cå’ŒC++ä½¿ç”¨å¯¹æ–¹ç¼–è¯‘çš„åŠ¨æ€é“¾æ¥åº“</title>
    <url>/2020/10/04/C%E5%92%8CCPP%E4%BD%BF%E7%94%A8%E5%AF%B9%E6%96%B9%E7%BC%96%E8%AF%91%E7%9A%84%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93/</url>
    <content><![CDATA[<p>Cä½¿ç”¨C++ç¼–è¯‘å‡ºæ¥çš„åŠ¨æ€é“¾æ¥åº“ï¼ŒC++ä½¿ç”¨Cç¼–è¯‘å‡ºæ¥çš„åŠ¨æ€é“¾æ¥åº“ï¼ŒCä½¿ç”¨Cç¼–è¯‘å‡ºæ¥çš„åŠ¨æ€é“¾æ¥åº“ï¼ŒC++ä½¿ç”¨C++ç¼–è¯‘å‡ºæ¥çš„åŠ¨æ€é“¾æ¥åº“â€¦â€¦</p>
<a id="more"></a>
<p>æœ€è¿‘å’Œå¸ˆå…„ä»¬æ­ä¼´åšåŠ å¯†ç³»ç»Ÿï¼Œè‡ªå·±è´Ÿè´£åŠ å¯†ç®—æ³•éƒ¨åˆ†ï¼Œå¸ˆå…„ä»¬è´Ÿè´£æ›´åŠ åº•å±‚çš„ç¡¬ä»¶æ¥å£éƒ¨åˆ†ã€‚ä½†æ˜¯å› ä¸ºä¸ªäººåŸå› æˆ‘ä¸å¤§å–œæ¬¢ <code>C</code> è¯­è¨€ï¼Œå½“ç„¶æ˜¯ç›¸æ¯”è¾ƒäº <code>C++</code> è€Œè¨€ï¼Œæ‰€ä»¥è‡ªå·±å°±ç”¨äº† <code>C++</code> å»å®ç°åŠ å¯†ç®—æ³•ã€‚è¿™ä¹ˆä¸€æ¥ï¼Œå°±æ¶‰åŠåˆ°å’Œå¸ˆå…„å†™çš„ç¨‹åºä¹‹é—´æ¥å£é—®é¢˜ï¼Œäºæ˜¯ä¹å°±ç ”ç©¶äº†ä¸‹æ€æ ·å¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ä»¥ä¾›ä»–äººä½¿ç”¨ã€‚</p>
<p>å¯¹äº <code>C</code> å’Œ <code>C++</code> ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä¸æ˜¯ <code>Java</code> å’Œ <code>JavaScript</code> ä¹‹é—´çš„å…³ç³»ï¼Œæ‰€ä»¥æ“ä½œèµ·æ¥ç›¸å¯¹è€Œè¨€è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å‘éœ€è¦æ³¨æ„ï¼Œè¦ä¸ç„¶ä¹Ÿä¸è‡³äºåœ¨<strong>2020</strong>å¹´çš„å›½åº†èŠ‚æŠ˜è…¾è¿™æŠ˜è…¾äº†ä¸¤å¤©ğŸ˜Ÿï¼Œéš¾åº¦ç³»æ•°è¡¨å¦‚ä¸‹è¡¨ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>åº“\å¯æ‰§è¡Œç¨‹åº</th>
<th>C++</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>C++</td>
<td>ç®€å•</td>
<td>ä¸ç®€å•</td>
</tr>
<tr>
<td>C</td>
<td>ç›¸å¯¹ç®€å•</td>
<td>ç®€å•</td>
</tr>
</tbody>
</table>
</div>
<p>å› ä¸º <code>C/C++</code> å¯¹ç³»ç»Ÿç¯å¢ƒæ¯”è¾ƒæ•æ„Ÿï¼Œè¿™é‡Œåˆ—å‡ºå†™è¿™ç¯‡æ–‡ç« æ—¶çš„ç³»ç»Ÿæƒ…å†µï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>åç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDE</td>
<td>CLion 2020.2.3</td>
</tr>
<tr>
<td>System</td>
<td>Windows 64</td>
</tr>
<tr>
<td>Environment</td>
<td>MinGW w64 6.0</td>
</tr>
<tr>
<td>Tool Chains</td>
<td>CMake 3.17.3</td>
</tr>
</tbody>
</table>
</div>
<p>å™¢ï¼Œå¯¹äº†ï¼Œè¿˜æœ‰é‡è¦çš„ <code>C</code> å’Œ <code>C++</code> ç‰ˆæœ¬ï¼š</p>
<ul>
<li><code>C</code> ï¼šC99</li>
<li><code>C++</code> ï¼šC++17</li>
</ul>
<h1 id="1-Cå¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™C-ç”¨"><a href="#1-Cå¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™C-ç”¨" class="headerlink" title="1. Cå¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™C++ç”¨"></a>1. Cå¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™C++ç”¨</h1><blockquote>
<p>   ä»€ä¹ˆï¼Ÿä¸Šæ¥ä¸ºä»€ä¹ˆè¦è¯´è¿™ä¸ªï¼Ÿé‚£è‚¯å®šæ˜¯å› ä¸ºç®€å•å•Šï¼é‚£ä¸ºä»€ä¹ˆä¸è¯´å¦å¤–ä¸¤ä¸ªæ›´ç®€å•çš„ï¼Ÿé‚£è‚¯å®šæ˜¯å› ä¸ºæ²¡åšå•ŠğŸ˜‰</p>
</blockquote>
<p>å…ˆæ¥è€ƒè™‘è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šå°å¼ å°æ˜æ˜¯æœ‹å‹ï¼Œå°å¼ å–œæ¬¢ <code>C++</code> ï¼Œå°æ˜ä¸å¾—ä¸ç”¨ <code>C</code> ï¼Œè€Œå°æ˜éœ€è¦ç»™å°å¼ æä¾›ä¸€äº›åº“ï¼Œå°å¼ ä½¿ç”¨å°æ˜æä¾›çš„åº“è¿›è¡Œä¸Šå±‚å¼€å‘ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯ï¼š</p>
<ul>
<li>å°æ˜ä½¿ç”¨ <code>C</code> è¯­è¨€å†™äº†ä¸ªé©±åŠ¨ï¼Œå¯¼å‡º <code>DLL</code> åŠ¨æ€é“¾æ¥åº“</li>
<li>å°å¼ æ‹¿åˆ°å°æ˜å¯¼å‡ºçš„ <code>DLL</code> åŠ¨æ€é“¾æ¥åº“ï¼Œå¼•å…¥åˆ°é¡¹ç›®ä¸­ï¼Œä½¿ç”¨åœ¨ <code>DLL</code> ä¸­ç¼–è¯‘å¥½çš„å‡½æ•°ï¼ˆæˆ–æ•°æ®ç»“æ„ï¼‰</li>
</ul>
<p>é‚£ä¹ˆä»–ä¿©å¯ä»¥è¿™æ ·åšï¼š</p>
<h2 id="1-1-å°æ˜çš„å·¥ä½œç›®å½•"><a href="#1-1-å°æ˜çš„å·¥ä½œç›®å½•" class="headerlink" title="1.1 å°æ˜çš„å·¥ä½œç›®å½•"></a>1.1 å°æ˜çš„å·¥ä½œç›®å½•</h2><p>å°æ˜çš„å·¥ä½œç›®å½•é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:.</span><br><span class="line">â”‚  CMakeLists.txt</span><br><span class="line">â”‚  library.c</span><br><span class="line">â”‚  library.h</span><br><span class="line">â””â”€cmake-build-debug</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„ <code>cmake-build-debug</code> æ˜¯ç”¨æ¥å­˜æ”¾ <code>CMake</code> æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–‡ä»¶ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥ä¸è®¡ï¼Œä¸»è¦å…³æ³¨è¿™å‡ ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š</p>
<ol>
<li><code>CMakeLists.txt</code> è§„å®šäº†æ€æ ·å»ç¼–è¯‘è¿™ä¸ªåº“ï¼Œæ€æ ·å¯¼å‡ºã€‚è¿™é‡Œä¸»è¦è¯´æ˜äº†é¡¹ç›®åç§°ï¼Œä½¿ç”¨çš„è¯­è¨€ï¼Œ<code>C</code> è¯­è¨€çš„æ ‡å‡†ç”¨å“ªä¸€ç‰ˆï¼Œä»¥åŠåº“çš„ä¾èµ–æ–‡ä»¶å’Œå¯¼å‡ºæ–¹å¼ï¼ˆ<code>SHARED</code> )</li>
</ol>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(C_Lib C)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_C_STANDARD <span class="number">99</span>)</span><br><span class="line"><span class="keyword">add_library</span>(C_Lib SHARED library.c library.h)</span><br></pre></td></tr></table></figure>
<ol>
<li><code>library.h</code> å‡½æ•°çš„å£°æ˜ï¼Œç®€ç®€å•å•ï¼Œæ™®æ™®é€šé€š</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> C_LIB_LIBRARY_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> C_LIB_LIBRARY_H</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//C_LIB_LIBRARY_H</span></span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>library.c</code> å‡½æ•°çš„å®ç°ï¼Œæ›´åŠ æœ´ç´ </li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;library.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, World!\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæˆè¿™äº›ä¹‹åï¼Œç‚¹å‡»ç¼–è¯‘é¡¹ç›®æˆ– <code>Ctrl+F9</code> å¿«æ·é”®ç¼–è¯‘æˆ–è€…è¾“å…¥å‘½ä»¤ç¼–è¯‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cmake.exe --build .\cmake-build-debug --target C_Lib -- -j 6</span><br></pre></td></tr></table></figure>
<p>å®Œæˆåå¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[100%] Built target C_Lib</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå¯ä»¥åœ¨ <code>cmake-build-debug</code> ç›®å½•ä¸‹æ‰¾åˆ° <code>libC_Lib.dll</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç”¨æ¥ç»™å°å¼ ç”¨çš„ã€‚</p>
<p>å¥½äº†ï¼Œå°æ˜å¯ä»¥å»åƒè‹¹æœäº†ğŸã€‚ </p>
<h2 id="1-2-å°å¼ çš„å·¥ä½œç›®å½•"><a href="#1-2-å°å¼ çš„å·¥ä½œç›®å½•" class="headerlink" title="1.2 å°å¼ çš„å·¥ä½œç›®å½•"></a>1.2 å°å¼ çš„å·¥ä½œç›®å½•</h2><p>å°å¼ çš„å·¥ä½œç›®å½•é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\SOURCE\C++\TEMP\CXX_EXE</span><br><span class="line">â”‚  CMakeLists.txt</span><br><span class="line">â”‚  libC_Lib.dll</span><br><span class="line">â”‚  main.cpp</span><br><span class="line">â””â”€cmake-build-debug	</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦å¤šäº†ä¸€ä¸ª <code>libC_Lib.dll</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯æ¥è‡ªå°æ˜çš„ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä½¿ç”¨é‡Œé¢å®šä¹‰çš„ <code>hello()</code> æ–¹æ³•ï¼Ÿ</p>
<ul>
<li>é¦–å…ˆï¼Œéœ€è¦å¯¼å…¥åˆ°å½“å‰é¡¹ç›®ä¸­ï¼Œè¿™é‡Œä½¿ç”¨ <code>CMakeLists.txt</code> æ¥å®Œæˆï¼š</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(CXX_Exe)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"><span class="keyword">link_directories</span>(.) <span class="comment"># ä»å½“å‰ç›®å½•ä¸­å¯»æ‰¾é“¾æ¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">add_executable</span>(CXX_Exe main.cpp library.h)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(CXX_Exe libC_Lib.dll) <span class="comment"># å°† libC_Lib.dll é“¾æ¥åˆ° CXX_Exe ç›®æ ‡æ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨å¤´æ–‡ä»¶ <code>library.h</code> ä¸­å¼•å…¥å‡½æ•°å£°æ˜</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> C_LIB_LIBRARY_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> C_LIB_LIBRARY_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//C_LIB_LIBRARY_H</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ <code>C++</code> æºæ–‡ä»¶ <code>main.cpp</code> ä¸­ä½¿ç”¨ <code>hello()</code> å‡½æ•°</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;library.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    hello(); <span class="comment">// &gt;: Hello, World!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¸è¿‡ï¼é‡ç‚¹ä¹‹ä¸€æ¥äº†ï¼</strong>ä¸ºä»€ä¹ˆåœ¨å¤´æ–‡ä»¶ <code>library.h</code> ä¸­å†™ä¸€ä¸ª <code>extern &quot;C&quot;</code> å‘¢ï¼Ÿæ˜¯å› ä¸º <code>C</code> çš„ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼Œ<strong>ä¸­é—´ä»£ç ä¸ä¼šä¿®æ”¹å‡½æ•°åç§°</strong>ï¼Œè€Œ <code>C++</code> åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­<strong>å°†ä¼šä¿®æ”¹</strong>ï¼å› æ­¤ï¼Œä¸ºäº†è®© <code>C++</code> è¯†åˆ«å‡ºæ¥ <code>C</code> å‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ <code>extern &quot;C&quot;</code> æ¥æŒ‡æ˜ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ <code>C</code> è¿‡æ¥çš„ã€‚</p>
<p>å¦åˆ™ä¼šå¼‚å¸¸é€€å‡ºï¼š<code>undefined reference to &#39;hello()&#39; collect2.exe: error: ld returned 1 exit status</code>ã€‚</p>
<p><strong>é‡ç‚¹ä¹‹äºŒï¼Œ</strong> åœ¨ <code>CLion</code> ä¸­ï¼Œä»…ä»…åœ¨ <code>CMakeLists.txt</code> ä¸­å£°æ˜æ€æ ·é“¾æ¥ï¼Œæ€æ ·æ‰¾åŠ¨æ€é“¾æ¥åº“æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦åœ¨ <code>Run Configurations</code> è®¾ç½®ä¸­å»æ·»åŠ ç¯å¢ƒå˜é‡ <code>PATH=&#123;DLLæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•&#125;</code> æ‰å¯ä»¥ï¼Œè¦ä¸ç„¶å°±ç›´æ¥æ”¾åˆ° <code>CLion</code> å·²çŸ¥çš„ç¯å¢ƒç›®å½•ä¸‹ã€‚</p>
<p>å¦åˆ™ä¼šå¼‚å¸¸é€€å‡ºï¼š <code>Process finished with exit code -1073741515 (0xC0000135)</code> ã€‚</p>
<p>è‡³æ­¤ï¼Œå°å¼ å°æ˜åˆä½œæ„‰å¿«ï¼Œä»»åŠ¡å®ŒæˆğŸ™‚ã€‚</p>
<h1 id="2-C-å¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™Cç”¨"><a href="#2-C-å¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™Cç”¨" class="headerlink" title="2. C++å¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™Cç”¨"></a>2. C++å¯¼å‡ºåŠ¨æ€é“¾æ¥åº“ç»™Cç”¨</h1><p>è¿˜æ˜¯å°å¼ å’Œå°æ˜ï¼Œè¿˜æ˜¯ <code>C</code> å’Œ <code>C++</code> ï¼Œåªä¸è¿‡è¿™æ¬¡æ¢æˆäº†å°å¼ æä¾›åŠ¨æ€é“¾æ¥åº“ç»™å°æ˜ä½¿ç”¨ã€‚</p>
<h2 id="2-1-å°å¼ çš„å·¥ä½œç›®å½•"><a href="#2-1-å°å¼ çš„å·¥ä½œç›®å½•" class="headerlink" title="2.1 å°å¼ çš„å·¥ä½œç›®å½•"></a>2.1 å°å¼ çš„å·¥ä½œç›®å½•</h2><p>å°å¼ éœ€è¦æä¾›åŠ¨æ€é“¾æ¥åº“ï¼Œä»–çš„å·¥ä½œç›®å½•é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:.</span><br><span class="line">â”‚  CMakeLists.txt</span><br><span class="line">â”‚  library.cpp</span><br><span class="line">â”‚  library.h</span><br><span class="line">â””â”€cmake-build-debug</span><br></pre></td></tr></table></figure>
<p>è¿˜æ˜¯è·Ÿä¹‹å‰ä¸€æ ·ï¼Œ <code>cmake-build-debug</code> é‡Œé¢æ‰¾åŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼Œè€Œ <code>CMakeLists.txt</code> é‡Œé¢è§„å®šäº†æ€æ ·å»ç¼–è¯‘è¿™ä¸ªç¨‹åºã€‚</p>
<p>æŒ¨ç€ç‰Œçš„æ¥åº·åº·æ¯ä¸ªæ–‡ä»¶å†™äº†å•¥ï¼š</p>
<ul>
<li><code>CMakeLists.txt</code> </li>
</ul>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(CXX_Lib)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>) <span class="comment"># è®¾ç½® C++ æ ‡å‡†ä¸º 17</span></span><br><span class="line"><span class="keyword">add_library</span>(CXX_Lib SHARED library.cpp library.h) <span class="comment"># è§„å®šäº†ä¾èµ–å“ªäº›æ–‡ä»¶å»äº§ç”ŸåŠ¨æ€é“¾æ¥æ–‡ä»¶ï¼Œä»¥åŠåŠ¨æ€é“¾æ¥æ–‡ä»¶ç±»å‹</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>library.h</code></li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CXX_LIB_LIBRARY_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CXX_LIB_LIBRARY_H</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="comment">// å£°æ˜ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œæ˜¯è¦æŒ‰ç…§ C è¯­è¨€çš„æ ‡å‡†å»å¯¼å‡ºçš„ï¼Œä¸è¦æ”¹åå•¦~</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//CXX_LIB_LIBRARY_H</span></span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä¸åŒåœ¨äºï¼Œç›´æ¥åœ¨åŠ¨æ€é“¾æ¥åº“çš„å¤´æ–‡ä»¶ä¸­å£°æ˜äº† <code>extern &quot;C&quot;</code> è€Œä¸æ˜¯åœ¨ç”¨åˆ°åŠ¨æ€é“¾æ¥æ–‡ä»¶çš„åœ°æ–¹ã€‚</p>
<ul>
<li><code>library.cpp</code> </li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;library.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»å†å’Œå°æ˜ä¸€æ ·çš„ç¼–è¯‘è¿‡ç¨‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cmake.exe --build .\cmake-build-debug --target CXX_Lib -- -j 6</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ <code>cmake-build-debug</code> ç›®å½•ä¸‹æ‰¾åˆ° <code>libCXX_Lib.dll</code> æ–‡ä»¶ï¼Œç„¶åä¸¢ç»™å°æ˜ï¼Œç„¶åå°å¼ å»å–ç‰›å¥¶ğŸ¥›äº†ã€‚</p>
<h2 id="2-2-å°æ˜çš„å·¥ä½œç›®å½•"><a href="#2-2-å°æ˜çš„å·¥ä½œç›®å½•" class="headerlink" title="2.2 å°æ˜çš„å·¥ä½œç›®å½•"></a>2.2 å°æ˜çš„å·¥ä½œç›®å½•</h2><p>å°æ˜æ‹¿åˆ°å°å¼ çš„åŠ¨æ€é“¾æ¥æ–‡ä»¶åï¼Œç›´æ¥æ”¾åˆ°å·¥ä½œç›®å½•ä¸‹ï¼Œç„¶åä»–çš„å·¥ä½œç›®å½•å°±é•¿è¿™æ ·äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:.</span><br><span class="line">|   CMakeLists.txt</span><br><span class="line">|   libCXX_Lib.dll</span><br><span class="line">|   library.h</span><br><span class="line">|   main.c</span><br><span class="line">\---cmake-build-debug</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„ <code>libCXX_Lib.dll</code> å°±æ˜¯å°å¼ é‚£å–è¿‡æ¥çš„ã€‚</p>
<ul>
<li>ä¸€æ ·çš„æµç¨‹ï¼Œé¦–å…ˆä½¿ç”¨ <code>CMakeLists.txt</code> å¯¼å…¥åˆ°é¡¹ç›®ä¸­</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(C_Exe C)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_C_STANDARD <span class="number">99</span>)</span><br><span class="line"><span class="keyword">link_directories</span>(.) <span class="comment"># ä»å“ªé‡Œæ‰¾é“¾æ¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">add_executable</span>(C_Exe main.c library.h)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(C_Exe libCXX_Lib.dll) <span class="comment"># ä½¿ç”¨è¿™ä¸ªåŠ¨æ€é“¾æ¥åº“</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç„¶åå£°æ˜å¤´æ–‡ä»¶ <code>library.h</code> </li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CXX_LIB_LIBRARY_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CXX_LIB_LIBRARY_H</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//CXX_LIB_LIBRARY_H</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>æœ€åä½¿ç”¨ <code>main.c</code></li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;library.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    hello(); <span class="comment">// &gt;: Hello, World!</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶å°æ˜è¿™é‡Œæ²¡æœ‰äº† <code>extern &quot;C&quot;</code> çš„æ³¨æ„äº‹é¡¹ï¼Œä½†æ˜¯ä»ç„¶éœ€è¦åœ¨ <code>CLion</code> çš„ <code>Run Configurations</code> é‡Œé¢é…ç½® <code>PATH=&#123;DLLæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•&#125;</code> æ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™è¿˜æ˜¯æŠ¥ <code>Process finished with exit code -1073741515 (0xC0000135)</code>ã€‚</p>
<p>å¥½äº†ï¼Œå°æ˜ç»ˆäºå¯ä»¥å»ä¼‘æ¯äº†ï¼Œæˆ‘ä¹Ÿå»ä¼‘æ¯ä¸€ä¸‹ğŸ—ğŸ–ğŸ¥©~~~</p>
<hr>
<p>å†™å®Œåçªç„¶æƒ³èµ·æ¥ï¼Œæˆ‘å’Œå¸ˆå…„ä¸ºå•¥ä¸ç»Ÿä¸€ä¸€ä¸‹è¯­è¨€å‘¢ï¼ŸğŸ¤”çœæ—¶çœåŠ›è¿˜çœå¾—è¿™ä¸¤å¤©æŠ˜è…¾æ¥æŠ˜è…¾å»ã€‚</p>
<p>ä¸è¿‡æƒ³æƒ³ï¼Œæœ‰äº†è¿™ä¸ªç»éªŒï¼Œä»¥åå¯ä»¥ä¸“é—¨ç»™ <code>Java</code> ã€<code>Python</code> ç­‰ç¨‹åºå†™åŠ¨æ€é“¾æ¥åº“ï¼Œä¹Ÿæœªå°ä¸æ˜¯ä»¶å¥½äº‹ã€‚</p>
<p>çœŸæ˜¯è®©äººæç„¶å¤§æ˜ç™½ï¼ğŸ˜®</p>
]]></content>
      <categories>
        <category>C++å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>CMake</tag>
        <tag>DLL</tag>
      </tags>
  </entry>
  <entry>
    <title>Git Commit Messageè§„èŒƒå‚è€ƒ</title>
    <url>/2020/10/03/Git-commit-message%E8%A7%84%E8%8C%83%E5%8F%82%E8%80%83/</url>
    <content><![CDATA[<p>ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œæ•´å®Œè§„èŒƒå†æ‰“å·¥ã€‚</p>
<a id="more"></a>
<p>è§„èŒƒçš„ <code>Git commit</code> æ ‡å‡†èƒ½æ–¹ä¾¿å¤§å®¶çš„äº¤æµå’Œåä½œï¼Œä»¥åŠæ–¹ä¾¿å¯¹ç‰ˆæœ¬è¿›è¡Œ<strong>å›é¡¾</strong>å’Œ<strong>å‘å¸ƒ</strong>ã€‚ è¿™é‡Œä¸»è¦å‚è€ƒæ¥è‡ª <code>angular</code> çš„ <code>git commit</code> æ—¥å¿—ä½œä¸ºåŸºæœ¬è§„èŒƒã€‚</p>
<h1 id="1-æ—¥å¿—åŸºæœ¬è§„èŒƒ"><a href="#1-æ—¥å¿—åŸºæœ¬è§„èŒƒ" class="headerlink" title="1. æ—¥å¿—åŸºæœ¬è§„èŒƒ"></a>1. æ—¥å¿—åŸºæœ¬è§„èŒƒ</h1><p><code>&lt;type&gt;(&lt;scope&gt;) : &lt;subject&gt;&lt;BLANK LINE&gt;&lt;body&gt;&lt;BLANK LINE&gt;&lt;footer&gt;</code></p>
<p>è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li><p><code>type</code> ï¼šè¡¨ç¤ºæäº¤çš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯ä¿®å¤äº† <code>bug</code> è¿˜æ˜¯æ–°å¢åŠŸï¼ˆæ¼ï¼‰èƒ½ï¼ˆæ´ï¼‰ï¼Œå¯é€‰çš„åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>feat</code> ï¼š æ–°å¢åŠŸèƒ½</li>
<li><code>fix</code> ï¼š ä¿®å¤é—®é¢˜</li>
<li><code>docs</code> ï¼šä¿®æ”¹æ–‡æ¡£ï¼Œä¾‹å¦‚ <code>README</code>ï¼Œ<code>CHANGELOG</code>ï¼Œ<code>CONTRIBUTE</code> ç­‰</li>
<li><code>style</code> ï¼šæ ¼å¼åŒ–ç¨‹åºï¼Œä¾‹å¦‚ä¿®æ”¹ç©ºæ ¼ã€ç¼©è¿›ï¼Œä¸æ”¹å˜ç¨‹åºé€»è¾‘</li>
<li><code>refactor</code> ï¼šä»£ç é‡æ„ï¼Œä½†æ²¡æœ‰æ–°åŠŸèƒ½ï¼Œä¹Ÿæ²¡æœ‰ä¿®å¤é—®é¢˜</li>
<li><code>perf</code> ï¼šä¼˜åŒ–ï¼Œä¾‹å¦‚æå‡æ€§èƒ½ï¼Œä¼˜åŒ–ä½“éªŒ</li>
<li><code>test</code> ï¼šæµ‹è¯•ç”¨ä¾‹</li>
<li><code>chore</code> ï¼šæ”¹å˜æ„å»ºæµç¨‹ï¼Œä¾‹å¦‚å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰</li>
<li><code>revert</code> ï¼šå›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</li>
</ul>
</li>
<li><p><code>scope</code> ï¼šå¯é€‰å†…å®¹ï¼Œè¡¨ç¤ºä¿®æ”¹èŒƒå›´</p>
</li>
<li><code>subject</code> ï¼šæ ‡é¢˜ï¼Œæè¿°ä¸»è¦å˜æ›´å†…å®¹ï¼Œ<strong>50</strong>å­—ç¬¦ä»¥å†…</li>
<li><code>body</code> ï¼šä¸»ä½“å†…å®¹ï¼Œæ›´è¯¦ç»†çš„è¯´æ˜ï¼Œ<strong>72</strong>å­—ç¬¦ä»¥å†…ï¼Œéœ€è¦åŒ…æ‹¬ï¼š<ul>
<li>ä¸ºä»€ä¹ˆä¿®æ”¹ï¼Ÿ</li>
<li>å¦‚ä½•è§£å†³ï¼Ÿ</li>
<li>æ˜¯å¦å­˜åœ¨å‰¯ä½œç”¨ï¼Ÿé£é™©ï¼Ÿ</li>
</ul>
</li>
<li><code>footer</code> ï¼šå¦‚æœæœ‰çš„è¯ï¼Œå¯ä»¥é“¾æ¥åˆ°ä¸€ä¸ª <code>issue</code> æˆ–è€…ç›¸å…³æ–‡æ¡£æˆ–ç¨‹åº</li>
</ul>
<h1 id="2-åˆ†æ”¯è§„èŒƒ"><a href="#2-åˆ†æ”¯è§„èŒƒ" class="headerlink" title="2. åˆ†æ”¯è§„èŒƒ"></a>2. åˆ†æ”¯è§„èŒƒ</h1><p><strong>åŸºæœ¬åŸåˆ™ï¼š</strong><code>master</code> è¦è®¾ç½®ä¸ºä¿æŠ¤åˆ†æ”¯ï¼Œä¸ç›´æ¥åœ¨ <code>master</code> ä¸Šè¿›è¡Œä»£ç ä¿®æ”¹å’Œæäº¤ã€‚</p>
<p>å¯¹äºä¸€èˆ¬çš„ <code>feature</code> æ›´æ–°å’Œ <code>bugfix</code> ï¼Œéƒ½è¦ä» <code>master</code> åˆ†æ”¯ä¸Š <code>checkout</code> ä¸‹æ¥ä¸€ä¸ªå¼€å‘åˆ†æ”¯è¿›è¡Œæ“ä½œï¼Œå®Œæˆä¹‹åå†åˆå¹¶å› <code>master</code> ä¸Šï¼Œå¹¶ä¸”æ‰“ä¸Š <code>tag</code> æ ‡ç­¾ï¼Œæœ€ååˆ é™¤å¼€å‘åˆ†æ”¯ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ†æ”¯å‘½åè§„åˆ™æœ‰ï¼š</p>
<ol>
<li>åˆ†æ”¯ç‰ˆæœ¬å‘½åè§„åˆ™ï¼š<code>åˆ†æ”¯ç±»å‹_åˆ†æ”¯å‘å¸ƒæ—¶é—´_åˆ†æ”¯åŠŸèƒ½</code></li>
<li>åˆ†æ”¯ç±»å‹åŒ…æ‹¬ï¼š<code>feature</code> ï¼Œ<code>bugfix</code> ï¼Œ<code>refactor</code> ä¸‰ç§ç±»å‹</li>
<li>æ—¶é—´ä½¿ç”¨ <code>yyyyMMdd</code> æ ¼å¼ï¼Œä¸è¶³è¡¥é›¶</li>
<li>ä¸‹åˆ’çº¿å‘½åæ³•</li>
</ol>
<p>å¯¹äºæ ‡ç­¾çš„ç®¡ç†ï¼Œè¦ä½¿ç”¨ <code>3</code> ä¸ªæ•°æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š<code>v1.2.3</code> ï¼Œæœ‰å¦‚ä¸‹è§„èŒƒï¼š</p>
<pre><code>1. æ–°åŠŸèƒ½æ·»åŠ ä½¿ç”¨ç¬¬ `2` ä½ç‰ˆæœ¬å·ï¼Œ`bug` ä¿®å¤ä½¿ç”¨ç¬¬ `3` ä½
 2. ä¾‹å¦‚ï¼š`v1.2.3-alpha-1`ï¼Œ`v-1.2.3-beta-1` ç­‰
</code></pre><h1 id="3-å·¥ä½œæµç¨‹ç¤ºä¾‹"><a href="#3-å·¥ä½œæµç¨‹ç¤ºä¾‹" class="headerlink" title="3. å·¥ä½œæµç¨‹ç¤ºä¾‹"></a>3. å·¥ä½œæµç¨‹ç¤ºä¾‹</h1><ol>
<li><p>åˆ›å»ºä¸€ä¸ª <code>feature</code> æˆ–è€… <code>bugfix</code> åˆ†æ”¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b feature_20201003_helloworld</span><br><span class="line">git checkout -b bugfix_20201003_store_key</span><br></pre></td></tr></table></figure>
</li>
<li><p>æäº¤ä»£ç åˆ°æœ¬åœ° <code>Git</code> ä»“åº“ï¼Œå¹¶å¡«å†™è§„èŒƒçš„ <code>Git Commit Message</code> </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add *</span><br><span class="line">git commit -m <span class="string">&quot;feat: æ–°å¢helloworldã€‚</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å°†ä»£ç åŒæ­¥åˆ°è¿œç¨‹ä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push origin feature_20201003_helloworld</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰“ä¸Š <code>tag</code> å¹¶åŒæ­¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git tag v0.0.1</span><br><span class="line">git push origin v0.0.1</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>emmmmï¼Œè¿˜æ˜¯å¤šå®è·µæ¯”è¾ƒå¥½ï¼Œè®°æ˜¯è®°ä¸ä½ğŸ˜‘â€¦â€¦</p>
]]></content>
      <categories>
        <category>æ£é¼“å°ç©æ„å„¿</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>Github</tag>
        <tag>å¼€å‘è§„èŒƒ</tag>
        <tag>å¼€å‘å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>Group Task 3 | Speaking Is More Important</title>
    <url>/2020/10/07/Group-task-3-Speaking-is-more-important/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="å•Šå¶ï¼Œå¯†ç ä¸å¤§å¯¹" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">å“¦å¼ï¼Ÿéœ€è¦å¯†ç æ‰èƒ½çœ‹~ğŸ¤”</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="1d43703d9b3d9978a5880f7c4b20fd62b3026bf8385b56d6a917aceefa7a78cf">f09366631cbbc7d465e403bed5c067c10b79d1451227a60a2ac8ed210a516d7ddbc1a6e66ab174bddaf5cde66df72a994642066f9d045e4807595af0cc5083afa11661a8a757cfef6e54db4b4079d8233939f27c35a5e88f871de4d848e8b5cc037c8223c3aeb7081ce8e457745f1ce85e74b16ee1740199cdcf0883fc378025ef9de7fd599ab5ce93cb450b9c4c1b5f2ba6e42fbf91af68567f000d0e50f143bbdf06347e3f5cac77d15a6f8e1f38b16bcdd48f866894f96087f81d15825225f823d45f0c329e0cfe3b9730a30d1c3ce9b4aa3099e660386d829dbb2b4d9e55f37dc90a87a62d16c496203a6f5cff6a905fdaf20896ee40fcf1a1732f0b9c8f14770a920d3e9b6e3f4d4792cedfbeb392e55c716faa2a01d0a70fd0c38f0cfb6ce305573a3d9ec813c75e6accd2c53c3fd2124be60b2d4c20ccd711dfe8ef0aa86cef90e437c2e0e49437b301ff0ca40f16e428922f928143642fd2e0c70306152f24dc9c071a8b3511cda064f0fc122c064185d251bad5455e2aca7b22a4bf0232652fa9936be2a4acec9d5954466ca3df19de2e368802503ec82233f5bc3341125b70ba1e64a83bf75fdcd239a9e661864307cc839cb2d15833d2f95c37330523a8223c890ecb7f3fdaf5c3226e53c18c5c0c43db2b0443560dbe4c4b7466db9a00824d3ffd4497fbcfc3aa70e0e0cbeb3cc5289ebdd277a23c7e5d960e834c7b24335eeab32751c54e0369f7dc690968705ecd87f031a4424670812fed832558a3ed5ab4d6cf2ff100b8f9c96e30449dd964da1a58a6fa03ab05ec800e6cd8c744dce1c200ec257e1b8a7e87bc37b15b6a774493994e9b94b32bdf05e468de7d5d8a9c6be7aeef17ad6c70269f055dc37dcf5181c477b7c00e64c7624e5d4a80f81428a503a4c1a6138df9904de89c3c5a4878a35354f8337668a0ce18e741e5f5b5f9c2c3f3ce4c7db3d99a4f39cf5bc3087bc93e95365d8d14cbe38c599666a0bfe40df20ba928e2a87bcbd88a7c3f507c01638acb8ff811b97307ea79fa7a267c116a518ae847a69af5b985e59d1550515fb3efca029d36f7d00a29262507e4f67ab8b6ee19ad5d9eed6b2d5e23c29050e87c80a6d9d28a6fdda50e40c8dbfdf58b3709e4795ee8ad53b802c3d3dddd7f704eb594dcaa5e485a524ddd780e317b12e2ce7a040476cc6ef439f608d101b99038b1975b9cca2e75c9d2003b7295c0421b1c23c93db16a9d3350b74dff9e37b0a92e63ab5509f4dd4125d191de7d16739b9689cfa2b3b1ef4ea69ea1513221fb78043608c57b7aadf59d4385711c0e44992917f29a57a0a336dce97aef2141a9e5823e7e3eb9bbcc723da0d1ac2c566cc3bc4572b32c010593ab549cc727cfe4c2296b82ee66d768bd5c5560ccd9e2f179b46d769542ca87b59513b713f48e87871bf406869cea3b31f6c1a700d4f319180ab20a73125e5f7ab87864da0a68802c393fc362808daa497c3e8cec080b0bd55361c3cf6739a9ee6ddb7761656ce267ae437e5d0853731c5ee3fc18b0350deac8c2d899ede35ab5bf3bcb96c89c5a23ffd2044bf4e1e037d3188c4129f608f5890c6f1c144bd35c7714c01730169050f7ed78dfe816ab7a30f4939ab89fa8b863bb1e6ca3fc3b6245d9ee0879f016654479173fde7740763e98b0dd28b2e426cb207144b275ccddc1f327b7c9564d7988c1c41aaba203a003cbfdca23c9bfc8d13a83aa5b136493e75eff2e1053ee76c9cf0dc12bae16b150e19bbc04c5216d27522fc2c96b2d363b660b3cf52b5e4937098103be85f7158dde2e40c1eaee76462df95bd649d77555a51ebb544fd011c21984d1f4c6da6dd9c741d7ab0aea4f29bc534a1acc89192af328d4e79210184cd402e7bc40e8e5d5291bafe4d08904fe31885fe78a775d9753b89c50fae393e3d449a00b1dcfeb355fe50302ee61c89864cc0ee23988a17d1ef80d61e423e0b05da73b188b6a7f3b80156944e9428add4b0da1f9d79f0b791a58344a81cf4d2ff8dce2398ec3d9e7fa661e0803f2bbc9404757aa0382e76d0caca7e59f21e45e206201984ef41fa5e3e9538381b21b9c919c405891b3c451cd15a623a6b2a4f3f7f3164c67c89655ce53ffbc39d3301508de3f15f344a078bfcaf3231af795b0ebcd44da4f3c29e428ae32ec4a3b1bbd98620b587fa18ce39b52e16512b795868a72f869a1fefd061f13f07508c2bb713e0f1bd007ce3b3beedcab71a9614e2ca0f302b9f88339f63ab9e8647796bc19e339438a7268fd546cff8ea38941fcc049d45af396bc53df965f9cac0081fb0583ecda92bd1a69f23f6c697b6694262975c3a7bd6a323961b62291871a66815b4a75a9f1735740f44fb76f1db9216954e0fe623feb3f3d65f344191bb26e4aeac42fac4b8ddda7a8612cbd3903ca5302517680bae049f1c3bdbf6076c44b012c8f43760a990d984eb52d06ba42e1dcca2debf9e30f8307f44339b4d738f92dee3a275b9ebf8eb5c1f53afd66046848dd36efabd0b8001d78410b078387f4d0ba53a4e272f5fda32561a8e90b55108338829726881d6d988fd926784d8b95dce920b8bfff14d7dccc40bd8cb3db8f97b3466c50810fa5142448d87168595b92d128acee6e554f9e877d7561da96bc9ae87d88bd02b760aff8312a349241ff6b0039ba96ab383f8c022dc00dc691e2611c3b7309731bb397b5f80d69ad2b77219946801273cb42e7bfc7da31ef92f27e50fd2ea34a7bb61bf050e6dfcc1563defa270691f27aa9c70079d7dc03a67c1836755a56deec2028738c420761b2da21b59122f60e6979265bfa82aa311bd22c5189f42a4d300494fe95a296c8a0efd866a6f836d583f3722adeaf8af3cbcba47ede341676aca12b19bd49787fae17be442b5d75ad0f084896385b2e78c309b99c1f53b706db4d69d2267f7dd63e65f1591707b86dd2a16f6afbb761868f128cb1999ee114e8efbf75a10b6884af050cd5f19f2039d1fa678a7e28cadbaf60940c2cd54f18ccce5361bc65cb9873e02988f171b7e13872ab0474111078a8e34e3c7a17bbefc4c368f910660b6569881c4ae493293d116ca5897281ba3c27c5e61818fdc53e18a05604d39eaaa1f2e3326a4fdc09d95cd384d1c787d615a821bc8591c8e7ec0e9f260f40b7ca158da5edff41736dd0225932f120b7224e9d55e9d2a721b10bbd3c2c3a4ce98592af1539e3cc375392acace66b6c4ef64870c4734f53b6aee19d903f342f63fbd69e70975a52462af459a8ee5094b4f030eaf33ee47b14a2e901c3ed6bef0ed8dd6154db9eb0daa46e2f8991f26f5ac1302f9a307590102ce56817cc444e5db6e1ee7c5f47fa5e5fcdfa5606c2d55adcaa586294f1bcdc8be5ce7ff7aab47e1addbcc9f781a4abb66da63a8a3b8bbc2399b59761b7876f9d21d5ad81241dda01e0782c5bc83d70ecbab1ce1dc3acffedeeccedd4f039b8dde95af542af176aac49573e2e3c088fc67d18105f88d5fe5152737660a83a1ea1d807cc1d9b31a4cb5871c66d18f64b6ad27e62efd85907a318d79d5d0357d2d081ab29e02424f6e5438a90dbe2a33d8eeeed560462317cd3f295105e3d4d3a2a6ffcad490c265e5d2762f42f4b9c1112c2a1658d31e1547802337a83a7e5dce0d1db40f0580421608a3d6cbb33b853cd4d3a0f7bb4b955fe43a656bd421458b099472e1b7827100ef1ca97d8023647b51dd7f69946a9c901b873fc4bb860d2eecb7900e70d166425937b37c9f6d57249bda7d89a1add36c0b3984f212123386dd610cf0965dbd36b5a32b069b6592041c78734ef1ae20d06ffc2c47466952983b4cb0ea73c4e3a8b60d5f266edbc02353a7ab1a1e398b4bd68dc63a2468403cc9dc820d2e5afc6d313d392aa35318a2cf1ffc4c3652226b48cd9271ce76bb812dec891d9b814dd6d782ac83fb85b099ac412f1bf32bdfad81550b8615cc5dc995c15fa5fa009445d68d0c07316a1a67642446cb4e9017393f776ab03f35bf8bbf2287b378fddc78932dd5e29a2b2493a037e95f8333556d90b77bf852e3cd58ebac223c61d37aad57856b055d8d28fd83ace109bdc588e86ac754c7374036ccc1c04d2ba2b5fbcd739657238f136fe9c35e636a71280676bed6f18716afc0d142a47ec0ad2f86b798e8ee88cf502077d1fa3d7dc22804e192c755eb2cf5d90aeafd1065b12e34c193e66b7b5c5eade794e8c407518dc377d2397358be79773e76b7e0b34f08f60e3a7ae989cd16b0b54af84d8ed5e280c881d7e9910ad0c1d9c5101c67f386ddd7457b2360c5017b77fc0b81d871150a5537330713534537f3b48feaebffe52769bd99badbe15c47efa2d262a2db38d6ebaaf359e050a68f023533174f719da94939f407b45cb80d476d9a3efb9051759a81dcf98536284ba286f428f21d436b8ce1996ab7ae2498382b2623f21433be10d25c6f29ee9cc216398e5317705d0d49c0f68f0cb8efcebda9309e5093759ae9633b487b9d43908caa3988f1772200a5723d215e1c3fcc565c8c3c0cbc050ba2419ca3171ff8fb8bc7b2b2e04c450138c04062e69f93ff04eb67103de142617997fe69ffc053728d03399f8eff6c65dc8f804144c11a27ee2a0c6bf913324c722638cf68b6cf411a80d128aed37c9875db41a2a91588505bc1374f3fbac1380082b37117638a76232d155332cff96cbb3c0fe70b8856bc7e2b0abfa5ec7b12ebb5c63e45cda9465bc456c4378d069024e961549d2d2f375a48d1d777130429326887c5442d9afd908796f9321200d266e0d8b2f4eb1317e22e5679140e90371d6c60c5cc0c6fe41e8292454686f3170d8f12c17c6a5ed0e7fdf570b26c5f7cd9e28a58f40536ef98953ba5a9daf1ac22cd01212a77b33ba268b7ed8356a98f5f93f44b2d0f5cbbe99e4ee798cc43cd0a79b78276389f6b699467ae91a2305811cc586b59fec10d3f705a0d4cf20ecad57573ec8ecbc9324fbc7cda19ac2be2dd0690e10d02640f9704f6256351bdb353c115bf6307b6dda8143ba591288db12de8f17f5e9591227b4791bd225ce006fe1e48289ed908c5d3bbdbfc4526bc5c13cb600a17dcdd03b3fa0e9525efb8d8308c4e1052240e0665a8da62bb0d72adc831bade5c1cb240ea38c9f3b9d3a6c6a37c7ba1ab122c66a5beda47deb00fd451cbb7f75554a52542be2ec2c88533972e5ecaae992ab8f36b2772c78a44d09882f24d3358e40da141e1f1fde3160f854a7f865d81f5b4906c96a6aabd604126c9724ac88d1b48cc7417e18c7ef5f7653a75000ee2f2a677c852d9ae37816a159d751af4d8a303fd88f909c356269516ac3a331528fc7e4188304648b054fc9be1c4dbde31c7de12d3190541683c0b41c427af268aa7cbdb6dd7bf5bf07403df8b1abd162f8ad09dbeffefcfccaf4c94aec82129f012ae11addbaaa0512a7f98622031dba06d991d7276583bd859dea6c88026a9ac370873dc3c5289b405a4a3b3594d0bc4dd4b4379b3a089dc354fa23f107d1932f6ca29f1b8eb312cc55faa91ff550f1913ee553a56a3173236f97436822c8c4aea98a7ad49a720973d4789cb76f17f11d3a064328fa6dd808d071261d605236bfb10e25a078ea6d20ed43530f3e8e9c2d1a82daa7ebbd3f1b94b9ea19a13c4c27c1c94c42cff513a7e8f37371fa18de0957b744cd73f93292d081a39daa00e8d3f27b4e0290167e39aa09758df22377ec4c6bcba4159bc242c955945011a0c1ba0b40c8276db171fb8e41e40406ec6ead6d38d01cf523b84a8374bad333f497ae1974341c0f0e780aca3b483fc4041962dc7530e47f20bb076c18d521ac6fae43dfe35fd0dec1836e22a701ae097a4b3307b83e2c1cf6dbaed4d17afc7d89d71a8e2c72ae26ee19cb8d0dbaccd05e75a54a4cf254778d1e664bb8795079b57ed14552e7c17022cb429bac8ec8ba158fa8dac9770156895463f6ec7447db0e604802c93b6877aa6e8888caf7bcfc22289436e4f88f0bde9a7c37970b0161aa2525fc1fa5c02c9e0a326bba5e21a71b3fe5ba8e1e86b00d5eab930adce5f4a0ff67d1a4d3c52392f3cbcf927c0edff5d9d0ee20ba8d0fdefb53f9cc56f88d4026f383dc18e6fd63c7af1d596b92b95cdff326ea0987204b572d33c95c37c0c0993d7aab92d16ed61e45cfef5aaa4be9355cbd028191c1b153ec0df3545ac09cff1c5f5b9d091c3610fb6f97c4f06bbb18fc62ed8b7cc04c23aa0649bfc3a4c563855d7f15d276c7f7087b7e43e601276e23a23a293bd98816d1b68adbd9fcea37f74541bed289d63740a303f73da65dc1275ffc4654b5c9dffdafa761bfebcffe42e7e54dc83bbf8ad6a848511ac3403dab8d38fb5d2ce25428d466670d345197cca99b194cbaaf083e94a9a33419df00a08bbad3378cfdb2d5024bfd1cea444d0a0f2d96296082e0954eb657c6e1d193eaee59bd50bf91630a90ad097f861d0ab7bef088bc16130de83cd3d1aed997daae56630c8619ab648f43183bdea7689ce6c9a814c724572f142c939a3479217c1085210392ab5604af1892c42c83aa1feae998891f9ac06e60c43308d32926661f49c19bf4bec75ee649dcf6780741a444ca98203f942e158e6517e82ae3eba669e1744f4261e54ecbb2dd5e192f039ce1af811fcb5b87ac83a732d454c5b3db5cf9cb3bfc5451283b0d1a1a1d6c8ecc2f0e58e82759bf85f951d4c46d6ea34d9aaf4c8ef4512df98075c88c5f1c55c7aa8f2d03710c09fc87212c330423ba87de1164c8860dcabe78bd3ed7a9d82672e28da72c128950f86bbd56be08f7dfa5054074ec8b7107990acbbb8049313e2b380160a8c8d8c05198a9200a99db3f4d751848f4922886bd70491c86d274bdbd6cab94084b44f752bd680e0b9deb4fe4ab5d8b65d1a0b569fdec070c096f6480acd3aa29e2264f29557e6bac2fed64e62f6b1adc1c823bf1ddf828bc25a9d9a4ae0174bdf39b51a3ebd8265a65ed80edd4bdd87777a6a23484700364ca195e77bd0bd2ef1ddc0c5254d55b45766ab98b542880e957c53f6b96fa59eb5a9be597895a4fd72c415281348217d18df7bacd48b0b1e760e0c4df60a12c3432a1f818efc6c66baafc5d84c8617a5c28ac5fb81b9426cff6962350552fcfad906c2d85fb7fb2226a6cc26f039b96295a5aed994b713492f5b1bfbcbd1e3cb903db8e6528cc95abe9c133dd445692c5f23b383230873d4014dfc68c9ae5a9af7e2c5886a47610dc3747dfb6744ff8151e295194f06b41cb09c3afcd0f93fabf58dbd816bd406c06892960a7fae2f2c1db9c86f9d1533baa787b83baf137874ae699e0701aa384040d6bf0fd294cc0a470c3fd616929c39370481f479a664005a69f4aff32dc8aba413a8f5391bd9efab10f3dd87916f9aeaa4d4f116c4a3baa6d27ea5facc124a62430a490ce1b5c</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>è‹±è¯­</category>
      </categories>
      <tags>
        <tag>Private</tag>
        <tag>English</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo+Githubæ­å»ºä¸ªäººåšå®¢</title>
    <url>/2020/08/28/Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h1 id="1-å‡†å¤‡ç¯å¢ƒ"><a href="#1-å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="1. å‡†å¤‡ç¯å¢ƒ"></a>1. å‡†å¤‡ç¯å¢ƒ</h1><p>æ‰€éœ€è½¯ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Node.js	-&gt; v12.18.3</span><br><span class="line">npm     -&gt; 6.14.6 </span><br><span class="line">Git     -&gt; 2.16.2.windows1</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="2-å®‰è£…-Hexo"><a href="#2-å®‰è£…-Hexo" class="headerlink" title="2. å®‰è£… Hexo"></a>2. å®‰è£… <code>Hexo</code></h1><p>é¦–å…ˆåœ¨è‡ªå·±çš„ç£ç›˜é‡Œåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ <code>C:\Blog</code>ï¼Œæ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œç„¶åè¾“å…¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:                      <span class="comment"># è¿›å…¥Cç›˜</span></span><br><span class="line"><span class="built_in">cd</span> Blog	                <span class="comment"># è¿›å…¥ Blog æ–‡ä»¶å¤¹</span></span><br><span class="line">npm install -g hexo-cli <span class="comment"># å®‰è£… hexo è¿™ä¸ªè¿‡ç¨‹è¶…çº§æ¼«é•¿ï¼Œå»ºè®®å»å–ä¸€æ¯å’–å•¡ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹ npm çš„é•œåƒæºçš„è¯</span></span><br></pre></td></tr></table></figure><br>å‡å¦‚ä¸Šé¢çš„è¿‡ç¨‹æ²¡æœ‰å‡ºç°ä»€ä¹ˆå¹ºè›¾å­ï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œä¹Ÿæ²¡æœ‰è­¦å‘Šï¼Œé‚£ä¹ˆæ­å–œï¼Œç°åœ¨æ¥åˆ°äº† <code>hexo</code> è½¯ä»¶ã€‚</p>
<h1 id="3-åœ¨-Github-åˆ›å»º-Pages"><a href="#3-åœ¨-Github-åˆ›å»º-Pages" class="headerlink" title="3. åœ¨ Github åˆ›å»º Pages"></a>3. åœ¨ <code>Github</code> åˆ›å»º <code>Pages</code></h1><p>è¿™é‡Œæœ‰ä¸¤ç§åˆ›å»ºçš„æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»º<strong>ä»“åº“</strong>å½’å±çš„ <code>Pages</code>ï¼Œä¹Ÿå¯ä»¥åˆ›å»º<strong>å¸æˆ·</strong>å½’å±çš„ <code>Pages</code>ï¼Œè¿™é‡Œåˆ›å»ºçš„æ˜¯åè€…ï¼ˆè´¦æˆ·å½’å±ï¼‰ï¼Œä¸ä¸ºåˆ«çš„ï¼Œå› ä¸ºå¥½çœ‹ã€‚ä¸¤è€…çš„åŒºåˆ«ä¸»è¦åœ¨ï¼š</p>
<ol>
<li>ä»“åº“å½’å±çš„æœ€ç»ˆè®¿é—®è·¯å¾„ä¸ºï¼š<code>https://github.com/&#123;username&#125;/&#123;repo&#125;</code></li>
<li>è´¦æˆ·å½’å±çš„æœ€ç»ˆè®¿é—®è·¯å¾„ä¸ºï¼š<code>https://&#123;username&#125;.github.io/</code></li>
</ol>
<p>åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œéœ€è¦æŠŠä»“åº“åç§°è®¾ç½®ä¸ºè‡ªå·±çš„è´¦æˆ·åç§°è¿™æ ·æ‰èƒ½å®ç°ä¸Šé¢çš„ç¬¬äºŒç§ã€‚</p>
<h1 id="4-åˆ›å»ºæœ¬åœ°åšå®¢å¹¶æœ¬åœ°é¢„è§ˆ"><a href="#4-åˆ›å»ºæœ¬åœ°åšå®¢å¹¶æœ¬åœ°é¢„è§ˆ" class="headerlink" title="4. åˆ›å»ºæœ¬åœ°åšå®¢å¹¶æœ¬åœ°é¢„è§ˆ"></a>4. åˆ›å»ºæœ¬åœ°åšå®¢å¹¶æœ¬åœ°é¢„è§ˆ</h1><p>å›åˆ°ç¬¬ 2 æ­¥çš„å‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init blog     <span class="comment"># åˆå§‹åŒ–åšå®¢ä»“åº“</span></span><br><span class="line">hexo new HelloHexo <span class="comment"># åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« </span></span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥åˆ°ç›®å½• <code>C:\Blog\source\_post</code> ç›®å½•ä¸‹çœ‹åˆ° <code>HelloHexo.md</code> æ–‡ä»¶ï¼Œæ‰¾ä¸€ä¸ªç§°æ‰‹çš„ <code>MarkDown</code> ç¼–è¾‘å™¨ï¼Œé€šè¿‡ä¿®æ”¹è¯¥æ–‡ä»¶å†…å®¹æ¥å®Œæˆå†…å®¹ç¼–å†™ã€‚</p>
<p>ä¿®æ”¹å®Œæˆåï¼Œç»§ç»­å›åˆ°ä¸Šé¢çš„å‘½ä»¤è¡Œä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean    <span class="comment"># ï¼ˆå¯é€‰ï¼‰æ¸…é™¤ç¼“å­˜ï¼Œæ–¹ä¾¿åé¢é‡æ–°ç”Ÿæˆ hexo c</span></span><br><span class="line">hexo generate <span class="comment"># ç”Ÿæˆç›¸å…³é¡µé¢ï¼Œä¹Ÿå¯ä»¥ hexo g</span></span><br><span class="line">hexo server   <span class="comment"># å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼Œä¹Ÿå¯ä»¥ hexo s</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥åœ¨ <code>http://localhost:4000/</code> ä¸­çœ‹åˆ°è‡ªå·±çš„åšå®¢é¢„è§ˆäº†ï¼Œå¦‚æœæˆåŠŸçœ‹åˆ°ï¼Œé‚£ä¹ˆæ­å–œï¼Œå¯ä»¥å†å–ä¸€æ¯å’–å•¡äº†ğŸ˜ã€‚</p>
<h1 id="5-2020å¹´9æœˆ1æ—¥æ›´æ–°"><a href="#5-2020å¹´9æœˆ1æ—¥æ›´æ–°" class="headerlink" title="5.  2020å¹´9æœˆ1æ—¥æ›´æ–°"></a>5.  2020å¹´9æœˆ1æ—¥æ›´æ–°</h1><p>å½“ä½¿ç”¨ <code>hexo s</code> æ¥å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œç„¶åè¿›å»ç½‘é¡µæŠ¥ç±»ä¼¼äº <code>(node:23020) Warning: Accessing non-existent property &#39;lineno&#39; of module exports inside circular dependency</code> é”™è¯¯æ—¶ï¼Œéœ€è¦å°† <code>node</code> ä» <code>14</code> ç‰ˆæœ¬é™ä¸º <code>12</code> ç‰ˆæœ¬ã€‚</p>
<p>å¦‚æœåœ¨ <code>git bash</code> ä¸­ä½¿ç”¨ <code>Ctrl + c</code> å¿«æ·é”®ç»ˆæ­¢æœåŠ¡æœªå“åº”çš„è¯ï¼Œéœ€è¦æ›´æ–° <code>git</code> ã€‚</p>
]]></content>
      <categories>
        <category>æ£é¼“å°ç©æ„å„¿</category>
      </categories>
      <tags>
        <tag>Github</tag>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-NexTä¸»é¢˜é…ç½®</title>
    <url>/2020/08/30/Hexo-NexT%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p><strong>é¦–å…ˆå®‰è£…</strong></p>
<p>é¦–å…ˆå®‰è£…å¥½ <code>NexT</code> ï¼Œä» <a href="https://github.com/theme-next/hexo-theme-next">è¿™é‡Œ</a> ä¸‹è½½å…‹éš†æœ€æ–°çš„ <code>NexT</code> ï¼Œç„¶åæŠŠå†…å®¹è§£å‹åˆ° <code>Hexo</code> å®‰è£…ç›®å½•ä¸‹çš„ <code>theses</code> æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”é‡å‘½åä¸º <code>next</code>ã€‚</p>
<a id="more"></a>
<p><strong>é…ç½®æ–‡ä»¶</strong> </p>
<p>å®Œæˆä¸Šé¢æ­¥éª¤åï¼Œåœ¨ <code>Hexo</code> çš„å®‰è£…ç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ <code>themes</code> è¯¥æ–‡ä»¶å¤¹ä¸­å­˜æ”¾ç€ä¸»é¢˜æ–‡ä»¶ï¼Œåœ¨ <code>themes\next\</code> æ–‡ä»¶å¤¹ä¸‹æœ‰é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼ˆä»¥åç§°ä¸º <strong>NexT é…ç½®æ–‡ä»¶</strong>ï¼‰ ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œå†…å®¹å¯ä»¥è¯´æ˜¯å·¨å¤§æ— æ¯”ï¼ŒæŠ½å–å…³é”®å†…å®¹ï¼Œå¯ä»¥å¯¹ä»¥ä¸‹å†…å®¹è¿›è¡Œé…ç½®ã€‚NexTé…ç½®<a href="https://theme-next.org/docs/theme-settings/">è¯¦ç»†æ–‡æ¡£</a></p>
<h2 id="1-ç½‘ç«™å›¾æ ‡"><a href="#1-ç½‘ç«™å›¾æ ‡" class="headerlink" title="1 ç½‘ç«™å›¾æ ‡"></a>1 ç½‘ç«™å›¾æ ‡</h2><p>æ‰¾åˆ°è‡ªå·±ä¸­æ„çš„å›¾æ ‡åï¼Œå…ˆè°ƒæ•´å°ºå¯¸ï¼Œä¸€èˆ¬éƒ½æ˜¯ <code>16 * 16</code> ç”¨ä½œç½‘ç«™å°å›¾æ ‡ï¼Œ<code>32 * 32</code> åŠä»¥ä¸Šç”¨ä½œç«™ç‚¹å›¾æ ‡ï¼ˆç”¨æˆ·å¤´åƒç±»ä¼¼ï¼‰ï¼Œç„¶åä¿å­˜åœ¨ <code>&#123;Hexo_home&#125;\source\image\</code> ä¸‹ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/icon-16.png</span>            <span class="comment"># å°å›¾æ ‡</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/icon-32.png</span>           <span class="comment"># ä¸­ç­‰å›¾æ ‡</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/icon-32.png</span> <span class="comment"># é€‚é… Apple è®¾å¤‡</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/icon.svg</span>   <span class="comment"># safari æµè§ˆå™¨çš„å°å›¾æ ‡ï¼Œéœ€è¦ç”¨ svg æ ¼å¼</span></span><br></pre></td></tr></table></figure>
<h2 id="2-ç‰ˆæƒå£°æ˜"><a href="#2-ç‰ˆæƒå£°æ˜" class="headerlink" title="2. ç‰ˆæƒå£°æ˜"></a>2. ç‰ˆæƒå£°æ˜</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="3-ä¸»é¢˜æ ·å¼ä»¥åŠæš—é»‘æ¨¡å¼"><a href="#3-ä¸»é¢˜æ ·å¼ä»¥åŠæš—é»‘æ¨¡å¼" class="headerlink" title="3. ä¸»é¢˜æ ·å¼ä»¥åŠæš—é»‘æ¨¡å¼"></a>3. ä¸»é¢˜æ ·å¼ä»¥åŠæš—é»‘æ¨¡å¼</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¨¡å¼</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="comment">#scheme: Gemini</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æš—é»‘æ¨¡å¼</span></span><br><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="4-èœå•æ "><a href="#4-èœå•æ " class="headerlink" title="4. èœå•æ "></a>4. èœå•æ </h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ˜¯å¦æ‰“å¼€æŸä¸€ä¸ªèœå•æ ï¼Œæ‰“å¼€çš„è¯åªéœ€è¦å°†å‰é¢çš„ # æ³¨é‡Šå»æ‰</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment"># schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment"># sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment"># commonweal: /404/ || heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡ã€æ˜¯å¦æ˜¾ç¤ºè§’æ ‡</span></span><br><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="5-ç¤¾äº¤é“¾æ¥"><a href="#5-ç¤¾äº¤é“¾æ¥" class="headerlink" title="5. ç¤¾äº¤é“¾æ¥"></a>5. ç¤¾äº¤é“¾æ¥</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®éœ€è¦è¿›è¡Œæ·»åŠ å°±å¥½äº†</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/hxz1998</span> <span class="string">||</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">huxz1998@163.com</span> <span class="string">||</span> <span class="string">envelope</span></span><br></pre></td></tr></table></figure>
<h2 id="6-é˜…è¯»æ›´å¤šï¼ˆRead-Moreï¼‰"><a href="#6-é˜…è¯»æ›´å¤šï¼ˆRead-Moreï¼‰" class="headerlink" title="6. é˜…è¯»æ›´å¤šï¼ˆRead Moreï¼‰"></a>6. é˜…è¯»æ›´å¤šï¼ˆRead Moreï¼‰</h2><p>è¿™ä¸ªåŠŸèƒ½ç±»ä¼¼äº <strong>å…¨æ–‡å±•å¼€</strong> ï¼Œç¬¬ä¸€æ­¥æ‰“å¼€ <strong>é˜…è¯»å…¨æ–‡</strong> æŒ‰é’®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">read_more_btn:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ï¼Œåœ¨æŸä¸€ä¸ªæ–‡ç« ä¸­ï¼Œæ·»åŠ  <code>&lt;!-- more --&gt;</code> æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾å‰é¢çš„å†…å®¹å°†ä¼šè¢«å±•ç¤ºï¼Œåé¢çš„å†…å®¹å°†ä¼šè¢«æŠ˜å ã€‚</p>
<h2 id="7-å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿-amp-æœ¬åœ°æŸ¥è¯¢"><a href="#7-å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿-amp-æœ¬åœ°æŸ¥è¯¢" class="headerlink" title="7. å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿ &amp; æœ¬åœ°æŸ¥è¯¢"></a>7. å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿ &amp; æœ¬åœ°æŸ¥è¯¢</h2><p>å‚è€ƒ <strong>é…ç½®Hexo</strong> ä¸€æ–‡ã€‚</p>
<h2 id="8-è®¿å®¢ç»Ÿè®¡"><a href="#8-è®¿å®¢ç»Ÿè®¡" class="headerlink" title="8. è®¿å®¢ç»Ÿè®¡"></a>8. è®¿å®¢ç»Ÿè®¡</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span>      </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>              <span class="comment"># é¦–å…ˆæ‰“å¼€è¯¥æ’ä»¶</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span>      <span class="comment"># æ˜¯å¦æ˜¾ç¤ºè®¿å®¢</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span> <span class="comment"># è¯¥æ•°å­—å‰é¢çš„å›¾æ ‡</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span>         <span class="comment"># æ€»æµè§ˆé‡</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span>     <span class="comment"># è¿˜æ˜¯å›¾æ ‡~</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span>          <span class="comment"># æ–‡ç« æµè§ˆé‡</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span>      <span class="comment"># ä»æ—§æ˜¯å›¾æ ‡</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æ£é¼“å°ç©æ„å„¿</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntuåˆ†åŒºæ–¹æ¡ˆ</title>
    <url>/2020/09/30/Ubuntu%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<p>åœ¨å®‰è£…äº†äº”æ¬¡ç³»ç»Ÿä¹‹åâ€¦â€¦</p>
<a id="more"></a>
<p>è‡ªæ‰“åˆ°äº†å®éªŒå®¤ï¼Œæˆ‘å·²ç»å®‰è£…äº†äº”æ¬¡ <code>Ubuntu20.04</code> ç³»ç»Ÿï¼Œäº‹æƒ…æ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>ç¬¬ä¸€æ¬¡å®‰è£…ï¼š</strong>è€å¸ˆå‘ç»™ä¸€å°ç”µè„‘ï¼Œå°å¼æœºï¼Œä¸€å— <code>1T</code> æœºæ¢°ç¡¬ç›˜ï¼Œä¸€æ¡ <code>8G</code> å†…å­˜ï¼Œè¿™å¯¹æˆ‘æ¥è¯´å·²ç»å¤Ÿç”¨äº†ï¼Œæ¯•ç«Ÿä¸è·‘æ·±åº¦å­¦ä¹ ä¹Ÿä¸æ‰“æ¸¸æˆï¼Œè£…ä¸ª <code>Linux</code> å†™å†™ç¨‹åºï¼Œåšåšé¡¹ç›®ç»°ç»°æœ‰ä½™ï¼Œäºæ˜¯ä¹æ‹¿äº†Uç›˜å°±è£…ä¸Šäº† <code>Ubuntu20.04</code>ï¼Œè£…å¥½ä¹‹åï¼Œå®‰è£…ç”¨çš„ä¸€å †IDEï¼Œç¼–è¯‘å™¨ï¼Œä» <code>Github</code> ä¸Š <code>clone</code> åˆ°æœ¬åœ°ç¨‹åºï¼Œè·‘äº†ä¸ªæ ·ä¾‹ç¨‹åºï¼Œé€šè¿‡ï¼Œå¿ƒé‡Œä¸€é˜µå¼€å¿ƒã€‚å¯æ˜¯è¿™éƒ½æ˜¯å‡çš„ï¼Œå®‰è£…å¥½ä¹‹åé‡æ–°å¯åŠ¨ï¼Œç«Ÿç„¶å¡åœ¨äº†å¯åŠ¨ç•Œé¢ï¼Œç¬¬ä¸€æ¬¡å®‰è£…å¤±è´¥å‘Šç»ˆâ€¦â€¦</p>
<p><strong>ç¬¬äºŒæ¬¡å®‰è£…ï¼š</strong>é‰´äºä¸Šæ¬¡å®‰è£…å¤±è´¥ï¼Œè¿™æ¬¡åœ¨æ¯ä¸ªæ­¥éª¤ä¸Šéƒ½è°¨å°æ…å¾®ï¼ˆå…¶å®æ²¡å•¥è¦æ³¨æ„çš„ï¼Œå› ä¸ºéƒ½æ˜¯å‚»ç“œå¼å®‰è£…ï¼‰ï¼Œè¿™æ¬¡ï¼Œå®‰è£…å¥½åä¹‹åå°±ç›´æ¥é‡å¯ç³»ç»Ÿï¼Œå‘ç°æ²¡æœ‰é—®é¢˜ï¼Œå®‰è£…è½¯ä»¶è¿‡ç¨‹ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œå†æ¬¡å¼€å¿ƒğŸ˜Šã€‚å¯æ˜¯å¥½æ™¯ä¸é•¿ï¼Œç”±äºåˆ›å»º <code>Python</code> è™šæ‹Ÿç¯å¢ƒæŠ¥é”™ï¼Œå†³å®šé‡æ–°å°è¯•å®‰è£… <code>Python3</code> æ¥è§£å†³é—®é¢˜ï¼Œé‡æ–°å®‰è£…è‚¯å®šè¦å…ˆå¸è½½å‘€ï¼Œç»“æœé—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼Œå¸è½½ä¹‹åå°±â€¦â€¦ç›´æ¥æŠŠ <code>Linux</code> çš„æ¡Œé¢ç¯å¢ƒç»™åˆ æ‰äº†ğŸ˜­ï¼Œï¼ˆï¼‰äºæ˜¯å°±æœ‰äº†ç¬¬ä¸‰æ¬¡çš„æ•…äº‹â€¦â€¦</p>
<p><strong>ç¬¬ä¸‰æ¬¡å®‰è£…ï¼š</strong>é‰´äºå‰ä¸¤æ¬¡å¤±è´¥çš„æ•…äº‹ï¼Œè¿™æ¬¡æ›´åŠ åœ°è°¨å°æ…å¾®ï¼Œä¸‹è½½ï¼Œå®‰è£…ï¼Œé…ç½®ï¼Œæ‹‰å–ä»£ç â€¦â€¦ç»ˆäºï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œè¿™æ¬¡å®‰è£…å¾ˆæˆåŠŸï¼ŒæˆåŠŸåœ¨æœºå™¨ä¸Šå®‰è£…å¥½äº† <code>Ubuntu20.04</code> ï¼Œè¿è¡Œäº†ç¬¬ä¸€ä¸ªåŠ å¯†ç®—æ³•ï¼Œå¹¶å¾—åˆ°äº†ç»“æœï¼Œç¾æ»‹æ»‹ğŸ˜‹ã€‚ä¸è¿‡ï¼Œå¤©æ€»æœ‰ä¸æµ‹é£äº‘ï¼Œæ‰€ä»¥æ‰æœ‰äº†ä¸‹æ¬¡çš„æ•…äº‹â€¦â€¦</p>
<p><strong>ç¬¬å››æ¬¡å®‰è£…ï¼š</strong>ä»Šå¤©ä¸‹åˆæ¥åˆ°å®éªŒå®¤ï¼Œç ”è®¨ç»“æŸåï¼Œè€å¸ˆçªç„¶æ¥äº†å¥ï¼šå‰å‡ å¤©ä¹°äº†å›ºæ€ç¡¬ç›˜ï¼ˆ<code>1T</code>ï¼‰å’Œå†…å­˜æ¡ï¼ˆ<code>8G</code>ï¼‰ï¼ŒåŠ ä¸Šå»æŠŠæœºå™¨å‡ä¸‹çº§ã€‚æˆ‘â€¦â€¦ï¼ˆå†…å¿ƒæ˜¯å¿«ä¹è¿˜æ˜¯å´©æºƒï¼Œè€å¸ˆä¸çŸ¥é“ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ï¼‰ï¼Œå¼€å¿ƒæ˜¯å› ä¸ºç¡¬ä»¶å¾—åˆ°äº†å‡çº§å‘€ï¼Œæ›´å¥½çš„å·¥ä½œç¯å¢ƒå½“ç„¶å¼€å¿ƒï¼Œå´©æºƒæ˜¯å› ä¸ºï¼ŒåˆåŒå’å•è¦é‡è£…ç³»ç»Ÿäº†â€¦â€¦æœ¬æƒ³ç€æœ‰äº†å‰ä¸‰æ¬¡çš„æ•™è®­ï¼Œè¿™æ¬¡å¯ä»¥å¾ˆé¡ºåˆ©å®‰è£…è¿‡æ¥ï¼Œä¸è¿‡ï¼Œå‘œå‘œå‘œï¼šè¿™æ¬¡åˆåœ¨ç¡¬ç›˜åˆ†åŒºä¸Šç¿»è½¦äº†ğŸ˜£ã€‚</p>
<p>è¿™ä¸ï¼Œç«‹åˆ»å›æ¥å¯¹ç¡¬ç›˜åˆ†åŒºè¿›è¡Œç ”ç©¶ï¼Œåº·åº·åˆ°åº•è¯¥å’‹åˆ†åŒºï¼Œç„¶åç»™è‡ªå·±ä¹Ÿå†™ä¸ªè®°å½•ï¼Œä»¥å…ä»¥åä¸€ç›´å»æŸ¥åˆ«äººçš„æ•™ç¨‹ã€‚</p>
<ol>
<li>é¦–å…ˆæ˜¯ <code>boot</code> å¼•å¯¼åˆ†åŒºï¼š<code>10G (10240)</code> ï¼Œ<code>ext4</code> æ ¼å¼ï¼Œç©ºé—´èµ·å§‹ä½ç½®ï¼Œä¸»åˆ†åŒº</li>
<li>ç„¶åæ˜¯æ ¹ç›®å½• <code>/</code> ï¼š<code>300G (307200)</code> ï¼Œ<code>ext4</code> æ ¼å¼ï¼Œç©ºé—´èµ·å§‹ä½ç½®ï¼Œé€»è¾‘åˆ†åŒº</li>
<li>ç´§æ¥ç€æ˜¯äº¤æ¢ç©ºé—´ <code>swap</code> ï¼š<code>32G(32768)</code> ï¼Œ<code>swap</code> æ ¼å¼ï¼Œç©ºé—´èµ·å§‹ä½ç½®ï¼Œé€»è¾‘åˆ†åŒº</li>
<li>æœ€åæ˜¯å®¶ç›®å½• <code>home</code>ï¼š<code>1000 - 10 - 300 - 32 = 658G (673792)</code>ï¼Œ<code>ext4</code> æ ¼å¼ï¼Œç©ºé—´èµ·å§‹ä½ç½®ï¼Œé€»è¾‘åˆ†åŒº</li>
</ol>
<p>è¯´åˆ°è¿™é‡Œï¼Œçªå‘å¥‡æƒ³åœ°ï¼Œå¯¹äº <code>Ubuntu20.04</code> è€Œè¨€ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸ªçœæ—¶çœåŠ›çš„æ–¹æ³•ï¼šç´¢æ€§<strong>ä¸åˆ†åŒº</strong>ï¼Œå…¨éƒ¨æ ¹ç›®å½• <code>/</code> ï¼Œè¿™æ ·æ›´çœåŠ›ï¼Œçœçš„è¿™ä¼šå„¿æ»¡äº†ï¼Œé‚£ä¼šå„¿ä¸å¤Ÿç”¨äº†ï¼Œçœå»äº†è§£å†³æ‚ä¸ƒæ‚å…«é—®é¢˜çš„æ—¶é—´ï¼Œå»çœ‹ç‚¹ä¹¦ä¸å¥½ä¹ˆï¼ŸğŸ˜</p>
<p>ç­‰å¾…ç¬¬äº”æ¬¡å®‰è£…çš„éªŒè¯ç»“æœã€‚</p>
<hr>
]]></content>
      <categories>
        <category>æ£é¼“å°ç©æ„å„¿</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello Worldï¼</title>
    <url>/2020/08/27/hello-world/</url>
    <content><![CDATA[<h2 id="éœ‡æƒŠï¼-â—‹Â´ï½¥Ğ´ï½¥-ï¾‰"><a href="#éœ‡æƒŠï¼-â—‹Â´ï½¥Ğ´ï½¥-ï¾‰" class="headerlink" title="éœ‡æƒŠï¼(â—‹Â´ï½¥Ğ´ï½¥)ï¾‰"></a>éœ‡æƒŠï¼(â—‹Â´ï½¥Ğ´ï½¥)ï¾‰</h2><p>å’©å“ˆå“ˆå“ˆå“ˆå“ˆï¼Œå¯å¯å¯å¯ç®—å¼„å¥½äº†ã€‚<br>æ˜å¤©è§~æˆ‘çš„å®å®ç†ã€‚</p>
<h2 id="æ™šå®‰å®‰"><a href="#æ™šå®‰å®‰" class="headerlink" title="æ™šå®‰å®‰"></a>æ™šå®‰å®‰</h2><blockquote>
<p>æ™šå®‰å•¦ï¼Œæˆ‘äº²çˆ±çš„å®è´~çˆ±ä½ çˆ±ä½ ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>æ—¥è®°</category>
      </categories>
      <tags>
        <tag>åˆå‡ºèŒ…åº</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿¡æ¯å®‰å…¨é¢†åŸŸå›½é™…ä¼šè®®</title>
    <url>/2020/09/19/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E9%A2%86%E5%9F%9F%E5%9B%BD%E9%99%85%E4%BC%9A%E8%AE%AE/</url>
    <content><![CDATA[<p>äº†è§£ä¸€ä¸‹ä¿¡æ¯å®‰å…¨é¢†åŸŸçš„å›½é™…é¡¶ä¼š</p>
<a id="more"></a>
<h1 id="å››å¤§ä¿¡æ¯å®‰å…¨å›½é™…ä¼šè®®"><a href="#å››å¤§ä¿¡æ¯å®‰å…¨å›½é™…ä¼šè®®" class="headerlink" title="å››å¤§ä¿¡æ¯å®‰å…¨å›½é™…ä¼šè®®"></a>å››å¤§ä¿¡æ¯å®‰å…¨å›½é™…ä¼šè®®</h1><h2 id="1-CCSï¼ˆComputer-and-Communications-Securityï¼‰"><a href="#1-CCSï¼ˆComputer-and-Communications-Securityï¼‰" class="headerlink" title="1. CCSï¼ˆComputer and Communications Securityï¼‰"></a>1. <a href="https://dl.acm.org/conference/ccs">CCSï¼ˆComputer and Communications Securityï¼‰</a></h2><h3 id="é€šç”¨ä¿¡æ¯"><a href="#é€šç”¨ä¿¡æ¯" class="headerlink" title="é€šç”¨ä¿¡æ¯"></a>é€šç”¨ä¿¡æ¯</h3><p>åç§°ï¼šè®¡ç®—æœºä¸é€šä¿¡å®‰å…¨</p>
<p>æ—¥æœŸï¼š1993-ä»Š</p>
<p>ä½ç½®ï¼šç¾å›½</p>
<h3 id="è®ºæ–‡æäº¤ä¿¡æ¯"><a href="#è®ºæ–‡æäº¤ä¿¡æ¯" class="headerlink" title="è®ºæ–‡æäº¤ä¿¡æ¯"></a>è®ºæ–‡æäº¤ä¿¡æ¯</h3><p>æ‘˜è¦ï¼š</p>
<p>å…¨æ–‡ï¼š</p>
<p>æ¼”ç¤ºæ–¹å¼ï¼š</p>
<h3 id="ç»„ç»‡æœºæ„ä¿¡æ¯"><a href="#ç»„ç»‡æœºæ„ä¿¡æ¯" class="headerlink" title="ç»„ç»‡æœºæ„ä¿¡æ¯"></a>ç»„ç»‡æœºæ„ä¿¡æ¯</h3><p>èµåŠ©è€…ï¼šSIGSAC</p>
<p>ç»„ç»‡è€…ï¼šACM</p>
<p>ç»„ç»‡å§”å‘˜ä¼šï¼šCommittee on Publication Ethics (COPE)</p>
<p>å­¦æœ¯å§”å‘˜ä¼šï¼šACM</p>
<p>å…¶ä»–å§”å‘˜ä¼šï¼š</p>
<h3 id="å‚ä¸è€…ä¿¡æ¯"><a href="#å‚ä¸è€…ä¿¡æ¯" class="headerlink" title="å‚ä¸è€…ä¿¡æ¯"></a>å‚ä¸è€…ä¿¡æ¯</h3><p>å‚ä¸è€…æ•°é‡ï¼š</p>
<p>å‚ä¼šè€…è¦æ±‚ï¼š</p>
<p>ä¼šè®®VIP</p>
<p>å…¶ä»–æˆå‘˜</p>
<h3 id="ä¼šè®®ç¨‹åº"><a href="#ä¼šè®®ç¨‹åº" class="headerlink" title="ä¼šè®®ç¨‹åº"></a>ä¼šè®®ç¨‹åº</h3><p>ä¼šè®®æ‰‹å†Œï¼š</p>
<p>é‚€è¯·ï¼š</p>
<blockquote>
<p>  We invite submissions from academia, government, and industry presenting novel research on all theoretical and practical aspects of computer security, as well as case studies and implementation experiences.</p>
</blockquote>
<p>å¾æ–‡ï¼š<a href="https://www.acm.org/publications/authors/calls-for-papers">https://www.acm.org/publications/authors/calls-for-papers</a></p>
<hr>
<h2 id="2-USENIX-Security"><a href="#2-USENIX-Security" class="headerlink" title="2. USENIX Security"></a>2. <a href="https://www.usenix.org/conference/usenixsecurity21">USENIX Security</a></h2><h3 id="é€šç”¨ä¿¡æ¯-1"><a href="#é€šç”¨ä¿¡æ¯-1" class="headerlink" title="é€šç”¨ä¿¡æ¯"></a>é€šç”¨ä¿¡æ¯</h3><p>åç§°ï¼šUSENIX å®‰å…¨</p>
<p>æ—¥æœŸï¼š1975-ä»Š</p>
<p>ä½ç½®ï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">USENIX Association</span><br><span class="line">2560 Ninth St., Suite 215</span><br><span class="line">Berkeley, CA 94710</span><br><span class="line">USA</span><br></pre></td></tr></table></figure>
<h3 id="è®ºæ–‡æäº¤ä¿¡æ¯-1"><a href="#è®ºæ–‡æäº¤ä¿¡æ¯-1" class="headerlink" title="è®ºæ–‡æäº¤ä¿¡æ¯"></a>è®ºæ–‡æäº¤ä¿¡æ¯</h3><p>æ‘˜è¦ï¼š</p>
<p>å…¨æ–‡ï¼š</p>
<p>æ¼”ç¤ºæ–¹å¼ï¼š</p>
<h3 id="ç»„ç»‡æœºæ„ä¿¡æ¯-1"><a href="#ç»„ç»‡æœºæ„ä¿¡æ¯-1" class="headerlink" title="ç»„ç»‡æœºæ„ä¿¡æ¯"></a>ç»„ç»‡æœºæ„ä¿¡æ¯</h3><p>èµåŠ©è€…ï¼šUSENIX</p>
<p>ç»„ç»‡è€…ï¼šMichael Bailey, Rachel Greenstadt</p>
<p>ç»„ç»‡å§”å‘˜ä¼šï¼šYousra Aafer, <em>University of Waterloo</em>, Ruba Abu-Salma, <em>University College London and Inria</em> â€¦</p>
<p>å­¦æœ¯å§”å‘˜ä¼šï¼š</p>
<p>å…¶ä»–å§”å‘˜ä¼šï¼šSrdjan Capkun, <em>ETH Zurich</em></p>
<h3 id="å‚ä¸è€…ä¿¡æ¯-1"><a href="#å‚ä¸è€…ä¿¡æ¯-1" class="headerlink" title="å‚ä¸è€…ä¿¡æ¯"></a>å‚ä¸è€…ä¿¡æ¯</h3><p>å‚ä¸è€…æ•°é‡ï¼š</p>
<p>å‚ä¼šè€…è¦æ±‚ï¼š</p>
<p>ä¼šè®®VIPï¼š</p>
<p>å…¶ä»–æˆå‘˜</p>
<h3 id="ä¼šè®®ç¨‹åº-1"><a href="#ä¼šè®®ç¨‹åº-1" class="headerlink" title="ä¼šè®®ç¨‹åº"></a>ä¼šè®®ç¨‹åº</h3><p>ä¼šè®®æ‰‹å†Œï¼š<a href="https://www.usenix.org/conferences/coc">https://www.usenix.org/conferences/coc</a></p>
<p>é‚€è¯·ï¼š</p>
<blockquote>
<p>Invited talks and panel discussions will be held in parallel with the refereed paper sessions. Please submit topic suggestions and talk and panel proposals via email to <a href="mailto:sec21it@usenix.org">sec21it@usenix.org</a> by Thursday, February 4, 2021.</p>
</blockquote>
<p>å¾æ–‡ï¼š<a href="https://www.usenix.org/conference/usenixsecurity21/call-for-papers">https://www.usenix.org/conference/usenixsecurity21/call-for-papers</a></p>
<hr>
<h2 id="3-IEEE-Symposium-on-Security-and-Privacy"><a href="#3-IEEE-Symposium-on-Security-and-Privacy" class="headerlink" title="3. IEEE Symposium on Security and Privacy"></a>3. <a href="http://www.ieee-security.org/TC/SP-Index.html">IEEE Symposium on Security and Privacy</a></h2><h3 id="é€šç”¨ä¿¡æ¯-2"><a href="#é€šç”¨ä¿¡æ¯-2" class="headerlink" title="é€šç”¨ä¿¡æ¯"></a>é€šç”¨ä¿¡æ¯</h3><p>åç§°ï¼šIEEE å®‰å…¨éšç§ç ”è®¨ä¼š</p>
<p>æ—¥æœŸï¼š1980-ä»Š</p>
<p>ä½ç½®ï¼šç¾å›½</p>
<h3 id="è®ºæ–‡æäº¤ä¿¡æ¯-2"><a href="#è®ºæ–‡æäº¤ä¿¡æ¯-2" class="headerlink" title="è®ºæ–‡æäº¤ä¿¡æ¯"></a>è®ºæ–‡æäº¤ä¿¡æ¯</h3><p>æ‘˜è¦ï¼š</p>
<p>å…¨æ–‡ï¼š</p>
<p>æ¼”ç¤ºæ–¹å¼ï¼š</p>
<h3 id="ç»„ç»‡æœºæ„ä¿¡æ¯-2"><a href="#ç»„ç»‡æœºæ„ä¿¡æ¯-2" class="headerlink" title="ç»„ç»‡æœºæ„ä¿¡æ¯"></a>ç»„ç»‡æœºæ„ä¿¡æ¯</h3><p>èµåŠ©è€…ï¼šIEEE Computer Security Technical Committee on Security and Privacy</p>
<p>ç»„ç»‡è€…ï¼š2019ï¼šSean Peisert</p>
<p>ç»„ç»‡å§”å‘˜ä¼šï¼šIEEE Computer Security Technical Committee</p>
<p>å­¦æœ¯å§”å‘˜ä¼šï¼šTechnical Committee on Security and Privacy</p>
<p>å…¶ä»–å§”å‘˜ä¼šï¼š</p>
<h3 id="å‚ä¸è€…ä¿¡æ¯-2"><a href="#å‚ä¸è€…ä¿¡æ¯-2" class="headerlink" title="å‚ä¸è€…ä¿¡æ¯"></a>å‚ä¸è€…ä¿¡æ¯</h3><p>å‚ä¸è€…æ•°é‡ï¼š</p>
<p>å‚ä¼šè€…è¦æ±‚ï¼š</p>
<p>ä¼šè®®VIPï¼š</p>
<p>å…¶ä»–æˆå‘˜</p>
<h3 id="ä¼šè®®ç¨‹åº-2"><a href="#ä¼šè®®ç¨‹åº-2" class="headerlink" title="ä¼šè®®ç¨‹åº"></a>ä¼šè®®ç¨‹åº</h3><p>ä¼šè®®æ‰‹å†Œï¼š<a href="https://www.usenix.org/conferences/coc">https://www.usenix.org/conferences/coc</a></p>
<p>é‚€è¯·ï¼š</p>
<p>å¾æ–‡ï¼š<a href="https://www.ieee-security.org/TC/SP2021/cfpapers.html">https://www.ieee-security.org/TC/SP2021/cfpapers.html</a></p>
<hr>
<h2 id="4-NDSS"><a href="#4-NDSS" class="headerlink" title="4. NDSS"></a>4. <a href="https://www.ndss-symposium.org/">NDSS</a></h2><h3 id="é€šç”¨ä¿¡æ¯-3"><a href="#é€šç”¨ä¿¡æ¯-3" class="headerlink" title="é€šç”¨ä¿¡æ¯"></a>é€šç”¨ä¿¡æ¯</h3><p>åç§°ï¼šNetwork and Distributed System Security Symposium</p>
<p>æ—¥æœŸï¼š1992-ä»Š</p>
<p>ä½ç½®ï¼šç¾å›½</p>
<h3 id="è®ºæ–‡æäº¤ä¿¡æ¯-3"><a href="#è®ºæ–‡æäº¤ä¿¡æ¯-3" class="headerlink" title="è®ºæ–‡æäº¤ä¿¡æ¯"></a>è®ºæ–‡æäº¤ä¿¡æ¯</h3><p>æ‘˜è¦ï¼š<a href="https://www.ndss-symposium.org/ndss2020/templates/">https://www.ndss-symposium.org/ndss2020/templates/</a></p>
<p>å…¨æ–‡ï¼š</p>
<p>æ¼”ç¤ºæ–¹å¼ï¼š</p>
<h3 id="ç»„ç»‡æœºæ„ä¿¡æ¯-3"><a href="#ç»„ç»‡æœºæ„ä¿¡æ¯-3" class="headerlink" title="ç»„ç»‡æœºæ„ä¿¡æ¯"></a>ç»„ç»‡æœºæ„ä¿¡æ¯</h3><p>èµåŠ©è€…ï¼šNFSã€Googleã€Intelã€Internet Societyã€CISCO</p>
<p>ç»„ç»‡è€…ï¼šNDSS 2020</p>
<p>ç»„ç»‡å§”å‘˜ä¼šï¼šTrent Jaeger, co-chair, <em>Pennsylvania State University</em></p>
<p>å­¦æœ¯å§”å‘˜ä¼šï¼šNDSS 2020 Program Committee</p>
<p>å…¶ä»–å§”å‘˜ä¼šï¼š</p>
<h3 id="å‚ä¸è€…ä¿¡æ¯-3"><a href="#å‚ä¸è€…ä¿¡æ¯-3" class="headerlink" title="å‚ä¸è€…ä¿¡æ¯"></a>å‚ä¸è€…ä¿¡æ¯</h3><p>å‚ä¸è€…æ•°é‡ï¼š</p>
<p>å‚ä¼šè€…è¦æ±‚ï¼š</p>
<ol>
<li><p>University Researchers and Educators</p>
</li>
<li><p>Chief Technology and Privacy Officers</p>
</li>
<li><p>Security Analysts and System Administrators</p>
</li>
<li><p>Operations and Security Managers</p>
</li>
</ol>
<p><em>Attendance is limited to foster maximum exchange of information and ideas.</em></p>
<p>ä¼šè®®VIPï¼š</p>
<p>å…¶ä»–æˆå‘˜</p>
<h3 id="ä¼šè®®ç¨‹åº-3"><a href="#ä¼šè®®ç¨‹åº-3" class="headerlink" title="ä¼šè®®ç¨‹åº"></a>ä¼šè®®ç¨‹åº</h3><p>ä¼šè®®æ‰‹å†Œï¼š<a href="https://www.ndss-symposium.org/ndss2020/coronavirus-covid-19-update/">https://www.ndss-symposium.org/ndss2020/coronavirus-covid-19-update/</a></p>
<p>é‚€è¯·ï¼š</p>
<p>å¾æ–‡ï¼š<a href="https://www.ndss-symposium.org/ndss-2021/call-for-papers/">https://www.ndss-symposium.org/ndss-2021/call-for-papers/</a></p>
]]></content>
      <categories>
        <category>ä¿¡æ¯å®‰å…¨</category>
      </categories>
      <tags>
        <tag>åˆå‡ºèŒ…åº</tag>
        <tag>ä¿¡æ¯å®‰å…¨ä¼šè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>é…ç½®Hexo</title>
    <url>/2020/08/29/%E9%85%8D%E7%BD%AEHexo/</url>
    <content><![CDATA[<p><strong>é…ç½®æ–‡ä»¶ <code>_config.yml</code></strong></p>
<p>åœ¨ <code>Hexo</code> çš„å®‰è£…ç›®å½•ä¸‹ï¼Œ æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>_config.yml</code> ï¼ˆä»¥åç§°ä¸º <strong>Hexo é…ç½®æ–‡ä»¶</strong> ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å¯¹ä»¥ä»¥ä¸‹å†…å®¹è¿›è¡Œé…ç½®ã€‚</p>
<a id="more"></a>
<h2 id="1-ç«™ç‚¹ä¿¡æ¯"><a href="#1-ç«™ç‚¹ä¿¡æ¯" class="headerlink" title="1. ç«™ç‚¹ä¿¡æ¯"></a>1. ç«™ç‚¹ä¿¡æ¯</h2><p>åœ¨è¿™ä¸ªé…ç½®ä¸­ï¼Œå¯ä»¥å¯¹ç«™ç‚¹çš„åŸºæœ¬ä¿¡æ¯è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">CHerrY</span> <span class="comment"># ç«™ç‚¹æ ‡é¢˜</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;é—¨å‰å¤§æ¡¥ä¸‹ï¼ŒC#C++ï¼Œå¿«æ¥å¿«æ¥æ•°ä¸€æ•°ï¼ŒJavaç…®é’è›™~&#x27;</span>  <span class="comment"># å­æ ‡é¢˜</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;ç®—æ³•åˆ†æï¼ŒåŸºç¡€æ¶æ„&#x27;</span> <span class="comment"># ç«™ç‚¹æè¿°ï¼Œç”¨æ¥å±•ç¤ºç»™è®¿å®¢çš„</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">&#x27;ç®—æ³•åˆ†æåˆ†äº«ï¼ŒæŠ€æœ¯åšå®¢ï¼ŒLeetCodeï¼Œä¸ªäººåšå®¢&#x27;</span>  <span class="comment"># ç»™æœç´¢å¼•æ“ç”¨çš„</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">CHerrY</span>  <span class="comment"># ä½œè€…ä¿¡æ¯ï¼Œåšå®¢ä¸­çš„ä½œè€…é»˜è®¤ç½²å</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span> <span class="comment"># è¯­è¨€ä¿¡æ¯ï¼ŒHexoæ”¯æŒå¤šç§è¯­è¨€</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span>    <span class="comment"># æ—¶åŒºé…ç½®ï¼Œé»˜è®¤ä½¿ç”¨è®¡ç®—æœºçš„å½“åœ°æ—¶é—´</span></span><br></pre></td></tr></table></figure>
<h2 id="2-URL-é…ç½®"><a href="#2-URL-é…ç½®" class="headerlink" title="2. URL é…ç½®"></a>2. <code>URL</code> é…ç½®</h2><p>è¯¥é…ç½®å°†ä¼šå½±å“åˆ°åšå®¢å†… <strong>å›¾ç‰‡</strong> çš„è®¿é—®ã€å¤–é“¾ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://hxz1998.github.io/</span> <span class="comment"># ç«™ç‚¹åŸŸåï¼Œå¦‚æœæœ‰çš„è¯å¯ä»¥è®¾ç½®è‡ªå·±çš„åŸŸå</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span>                         <span class="comment"># é…ç½®æ ¹ç›®å½•</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span>  <span class="comment"># URL ç»„æˆæ ¼å¼</span></span><br></pre></td></tr></table></figure>
<h2 id="3-æ‰©å±•"><a href="#3-æ‰©å±•" class="headerlink" title="3. æ‰©å±•"></a>3. æ‰©å±•</h2><p>å¯¹ <code>Hexo</code> è¿›è¡Œæ‰©å±•æ‰€ç”¨åˆ°çš„é…ç½®ï¼Œæ¯ä¸€ä¸ªæ’ä»¶éœ€è¦å»æŸ¥çœ‹æ’ä»¶è‡ªå·±çš„è¯´æ˜æ–‡æ¡£ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ’ä»¶æ‰©å±•åˆ°ï¼š https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment"># ä¸»é¢˜æ‰©å±•åˆ°ï¼š https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span> <span class="comment"># è®¾ç½®ä¸»é¢˜ä¸º next</span></span><br></pre></td></tr></table></figure>
<h2 id="4-éƒ¨ç½²åˆ†å‘"><a href="#4-éƒ¨ç½²åˆ†å‘" class="headerlink" title="4. éƒ¨ç½²åˆ†å‘"></a>4. éƒ¨ç½²åˆ†å‘</h2><p>å°†åšå®¢éƒ¨ç½²åˆ°å“ªé‡Œï¼Œå°±é…ç½®è¿™é‡Œ~</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span> <span class="comment"># éƒ¨ç½²æœåŠ¡ç±»å‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ Github å’Œ Giteeï¼Œå› æ­¤é€‰ git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># ä»“åº“åç§°â€œä»¬â€ï¼Œä¹‹æ‰€ä»¥ä½¿ç”¨â€œä»¬â€ï¼Œæ˜¯å› ä¸ºå¯ä»¥åŒæ­¥å¤šä¸ªgitä»“åº“</span></span><br><span class="line">    <span class="attr">gitee:</span> <span class="string">https://gitee.com/hxz1998/hxz1998.git</span>  </span><br><span class="line">    <span class="attr">github:</span> <span class="string">https://github.com/hxz1998/hxz1998.github.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<h2 id="5-å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿ï¼ˆå¯é€‰ï¼‰"><a href="#5-å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="5. å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿ï¼ˆå¯é€‰ï¼‰"></a>5. å­—æ•°ç»Ÿè®¡ï¼Œé˜…è¯»æ—¶é•¿ï¼ˆå¯é€‰ï¼‰</h2><p><strong>ä¸‹é¢å†…å®¹åœ¨Hexoé…ç½®æ–‡ä»¶ä¸­å¹¶ä¸å­˜åœ¨ï¼Œåˆ«å®³æ€•ï¼Œè‡ªå·±æ·»åŠ å°±å®Œäº‹å„¿äº†ã€‚</strong> è¿™é‡Œä¸»è¦å¯¹åšå®¢çš„ä¸€äº›é¢å¤–çš„åŠŸèƒ½è¿›è¡Œé…ç½®ï¼Œéœ€è¦ç»“åˆ <code>hexo-symbols-count-time</code> æ’ä»¶è¿›è¡Œä½¿ç”¨ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">symbols:</span> <span class="literal">true</span>                <span class="comment"># æ–‡ç« å­—æ•°ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">time:</span> <span class="literal">true</span>                   <span class="comment"># æ–‡ç« é˜…è¯»æ—¶é•¿</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">true</span>          <span class="comment"># ç«™ç‚¹æ€»å­—æ•°ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">true</span>             <span class="comment"># ç«™ç‚¹æ€»é˜…è¯»æ—¶é•¿</span></span><br><span class="line">  <span class="attr">exclude_codeblock:</span> <span class="literal">false</span>     <span class="comment"># æ’é™¤ä»£ç å­—æ•°ç»Ÿè®¡</span></span><br></pre></td></tr></table></figure>
<h3 id="5-1-hexo-symbols-count-time-å®‰è£…"><a href="#5-1-hexo-symbols-count-time-å®‰è£…" class="headerlink" title="5.1 hexo-symbols-count-time å®‰è£…"></a>5.1 <code>hexo-symbols-count-time</code> å®‰è£…</h3><p>æ‰“å¼€å¿ƒå¿ƒå¿µå¿µçš„å‘½ä»¤è¡Œç»ˆç«¯ï¼Œè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-symbols-count-time	<span class="comment"># è¿‡ç¨‹å¾ˆå¿«ï¼Œæ²¡æœ‰å¤šå¤§</span></span><br></pre></td></tr></table></figure>
<p>ç­‰å¾…å®‰è£…å®Œæˆï¼Œ<strong>é‡æ–°ç”Ÿæˆ</strong> ã€å¯åŠ¨ <code>Hexo</code> å³å¯æŸ¥çœ‹æ•ˆæœã€‚</p>
<h3 id="5-2-é…ç½®-NexT-ä¸­çš„å†…å®¹"><a href="#5-2-é…ç½®-NexT-ä¸­çš„å†…å®¹" class="headerlink" title="5.2 é…ç½® NexT ä¸­çš„å†…å®¹"></a>5.2 é…ç½® <code>NexT</code> ä¸­çš„å†…å®¹</h3><p>å°† <code>symbol_count_time</code> å¯ç”¨ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span>   <span class="comment"># åˆ†éš”çš„å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span>   <span class="comment"># æ–‡ç« å­—æ•° </span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">false</span> <span class="comment"># æ€»å­—æ•°</span></span><br><span class="line">  <span class="attr">awl:</span> <span class="number">4</span>                 <span class="comment"># å¹³å‡å­—é•¿ï¼ˆå­—ç¬¦ä»¥å­—ä¸ºå•ä½ï¼‰</span></span><br><span class="line">  <span class="attr">wpm:</span> <span class="number">275</span>               <span class="comment"># æ¯åˆ†é’Ÿå­—æ•°</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æ•°å­—éƒ½å¯ä»¥ä¿®æ”¹ï¼Œå½“ç„¶ï¼Œè¿˜å¯ä»¥å‚è€ƒæ¥è‡ª <a href="https://github.com/theme-next/hexo-symbols-count-time">å®˜æ–¹</a> æŒ‡å¯¼ï¼š</p>
<blockquote>
<p><strong>æ³¨æ„å¯¹äºä¸­å›½ç”¨æˆ·ï¼š</strong>å› ä¸ºåœ¨æœ‰å…³ä¸­å›½è¯­æ–‡å¹³å‡å­—é•¿<code>~1.5</code>ï¼Œå¦‚æœä½ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå†™ä¸­å›½çš„èŒä½ï¼ˆä¸å«æ··åˆè‹±æ–‡ï¼‰ï¼Œå»ºè®®è®¾ç½®<code>awl</code>åˆ°<code>2</code>å’Œ<code>wpm</code>åˆ°<code>300</code>ã€‚<br>ä½†æ˜¯ï¼Œå¦‚æœæ‚¨é€šå¸¸å°†è‡ªå·±çš„å¸–å­ä¸è‹±è¯­æ··åœ¨ä¸€èµ·ï¼Œåˆ™<code>awl</code>to <code>4</code>å’Œ<code>wpm</code>to <code>275</code>ä¼šå¾ˆå¥½ã€‚</p>
</blockquote>
<h2 id="6-æœç´¢ï¼ˆå¯é€‰ï¼‰"><a href="#6-æœç´¢ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="6. æœç´¢ï¼ˆå¯é€‰ï¼‰"></a>6. æœç´¢ï¼ˆå¯é€‰ï¼‰</h2><p>åŒæ ·çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨ <strong>Hexoé…ç½®æ–‡ä»¶ä¸­å¹¶ä¸å­˜åœ¨çš„å†…å®¹ï¼Œéœ€è¦é¢å¤–æ·»åŠ ã€‚</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span> </span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span>  <span class="comment"># å°†æœç´¢ç´¢å¼•æ”¾åˆ°å“ªé‡Œ</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span>       <span class="comment"># æœç´¢å­—æ®µ</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span>     <span class="comment"># æ˜¯å¦æ£€ç´¢å†…å®¹</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span>      <span class="comment"># ç”Ÿæˆæ ¼å¼</span></span><br></pre></td></tr></table></figure>
<p> é…ç½®å®Œä¹‹åï¼Œä»ç„¶éœ€è¦é¢å¤–é…ç½® <code>NexT</code> ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ <code>next\_config.xml</code> æ‰å¯ä»¥ç”Ÿæ•ˆã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span>	</span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	</span><br></pre></td></tr></table></figure>
<h3 id="6-1-hexo-generator-searchdb-å®‰è£…"><a href="#6-1-hexo-generator-searchdb-å®‰è£…" class="headerlink" title="6.1 hexo-generator-searchdb å®‰è£…"></a>6.1 <code>hexo-generator-searchdb</code> å®‰è£…</h3><p>ç»§ç»­ä½¿ç”¨ä¸Šé¢å¿ƒå¿ƒå¿µå¿µçš„ç»ˆç«¯ï¼Œè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure>
<p>ç­‰å¾…å®‰è£…å®Œæˆï¼Œ<strong>é‡æ–°ç”Ÿæˆ</strong> ã€å†æ¬¡å¯åŠ¨ <code>Hexo</code> å³å¯æŸ¥çœ‹æ•ˆæœã€‚</p>
<h2 id="7-æ ‡ç­¾äº‘"><a href="#7-æ ‡ç­¾äº‘" class="headerlink" title="7. æ ‡ç­¾äº‘"></a>7. æ ‡ç­¾äº‘</h2><p>é¦–å…ˆè¦å»ºç«‹å­˜æ”¾æ ‡ç­¾çš„é¡µé¢ï¼Œæ‰“å¼€å–œæ¬¢ç”¨çš„å‘½ä»¤è¡Œç»ˆç«¯ï¼Œå¹¶è¾“å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new page &quot;tags&quot;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥åœ¨ <code>Hexo_home\source\</code> æ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°æœ‰ <code>tags\index.md</code> æ–‡ä»¶ï¼Œå¯¹è¯¥æ–‡ä»¶è¿›è¡Œä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">title: æ ‡ç­¾äº‘              # å±•ç¤ºæ ‡é¢˜</span><br><span class="line">date: 2020-08-27 23:03:38 # åˆ›å»ºæ—¶é—´ï¼Œä¸€èˆ¬ä¸éœ€è¦æ”¹</span><br><span class="line">type: &quot;tags&quot;              # <span class="xml"><span class="tag">&lt;<span class="name">---</span> è¿™ä¸ªæ‰æ˜¯æ·»åŠ çš„é‡ç‚¹ï¼</span></span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååˆ·æ–°å°±å¯ä»¥åœ¨ä¸»é¡µé¢èœå•ä¸­çœ‹åˆ° <strong>æ ‡ç­¾</strong> è¿™ä¸€æ äº†ã€‚</p>
<h2 id="8-åˆ†ç±»"><a href="#8-åˆ†ç±»" class="headerlink" title="8. åˆ†ç±»"></a>8. åˆ†ç±»</h2><p>å¯¹äºåˆ†ç±»é¡µé¢çš„å»ºç«‹ï¼Œå’Œä¸Šé¢ <strong>ç¬¬ä¸ƒæ¡</strong> ä¸€æ ·ã€‚</p>
]]></content>
      <categories>
        <category>æ£é¼“å°ç©æ„å„¿</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>ZUCç®—æ³•äº†è§£</title>
    <url>/2020/09/22/ZUC%E7%AE%97%E6%B3%95%E4%BA%86%E8%A7%A3/</url>
    <content><![CDATA[<p>ZUCç®—æ³•æ˜¯ä¸€ä¸ª<strong>é¢å‘å­—çš„æµåŠ å¯†</strong>ç®—æ³•ã€‚å®ƒä½¿ç”¨ä¸€ä¸ª<strong>128</strong>ä½çš„åˆå§‹å¯†é’¥ <code>key</code> å’Œä¸€ä¸ª<strong>128</strong>ä½çš„åˆå§‹å‘é‡ <code>iv</code> æ¥ä½œä¸ºè¾“å…¥ï¼Œå¯ä»¥è¾“å‡ºè‹¥å¹²ä¸ª<strong>32</strong>ä½å­—çš„å¯†é’¥æµï¼Œä¹Ÿå°±å°±æ˜¯è¯´æ¯<strong>32</strong>ä½å­—åœ¨è¿™é‡Œç§°ä¸ºä¸€ä¸ªå¯†é’¥å­—ã€‚è¿™æ ·äº§ç”Ÿçš„å¯†é’¥æµå¯ä»¥ç”¨äºåŠ å¯†å’Œè§£å¯†ã€‚</p>
<a id="more"></a>
<blockquote>
<p>  ä»¥ä¸‹å†…å®¹å‚è€ƒè‡ª ZUC æ ‡å‡†æ–‡æ¡£</p>
</blockquote>
<h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h1><p>åœ¨ZUCç®—æ³•ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ‰§è¡Œé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯<strong>åˆå§‹åŒ–é˜¶æ®µ</strong>å’Œ<strong>å·¥ä½œé˜¶æ®µ</strong>ã€‚åœ¨åˆå§‹åŒ–é˜¶æ®µä¸­ï¼Œ <code>key</code> å’Œ <code>iv</code> è¢«åˆå§‹åŒ–å®Œæˆã€‚åœ¨å·¥ä½œé˜¶æ®µä¸­ï¼Œæ¯ä¸ª<strong>æ—¶é’Ÿè„‰å†²</strong>éƒ½èƒ½äº§ç”Ÿä¸€ä¸ª<strong>32ä½å­—</strong>çš„å¯†é’¥æµè¾“å‡ºã€‚</p>
<h1 id="2-ç¬¦å·ä¸çº¦å®š"><a href="#2-ç¬¦å·ä¸çº¦å®š" class="headerlink" title="2. ç¬¦å·ä¸çº¦å®š"></a>2. ç¬¦å·ä¸çº¦å®š</h1><h2 id="2-1-æ•°åˆ¶è¡¨ç¤º"><a href="#2-1-æ•°åˆ¶è¡¨ç¤º" class="headerlink" title="2.1 æ•°åˆ¶è¡¨ç¤º"></a>2.1 æ•°åˆ¶è¡¨ç¤º</h2><p>ä¸‹æ–‡ä½¿ç”¨<strong>åè¿›åˆ¶</strong>ã€<strong>åå…­è¿›åˆ¶</strong>ã€<strong>äºŒè¿›åˆ¶</strong>è¿›è¡Œè¡¨ç¤ºä¾‹å¦‚ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
a &= 123456 \space\space\space\spaceåè¿›åˆ¶è¡¨ç¤ºæ³•\\\\ 
&= 0x1E240\space\space\space\space åå…­è¿›åˆ¶è¡¨ç¤º\\\\
&= 00011110001001000000_2 äºŒè¿›åˆ¶è¡¨ç¤º
\end{align*}</script><h2 id="2-2-æ¯”ç‰¹åº"><a href="#2-2-æ¯”ç‰¹åº" class="headerlink" title="2.2 æ¯”ç‰¹åº"></a>2.2 æ¯”ç‰¹åº</h2><p>åœ¨ä¸‹æ–‡ä¸­ï¼Œæ‰€æœ‰æ•°æ®å˜é‡çš„å·¦ä¾§æ˜¯é«˜æœ‰æ•ˆä½ï¼ˆå­—èŠ‚ï¼‰ï¼Œå³ä¾§ä¸ºä½æœ‰æ•ˆä½ï¼ˆå­—èŠ‚ï¼‰ã€‚ä¾‹å¦‚ï¼š$a = 100110101100110010100100_2$ï¼Œé‚£ä¹ˆå®ƒçš„æœ€é«˜æœ‰æ•ˆä½æ˜¯$1$ï¼ˆæœ€å·¦ä¾§çš„ï¼‰ï¼Œæœ€ä½æœ‰æ•ˆä½æ˜¯$0$ï¼ˆæœ€å³ä¾§çš„ï¼‰ã€‚</p>
<h2 id="2-3-ç¬¦å·çº¦å®š"><a href="#2-3-ç¬¦å·çº¦å®š" class="headerlink" title="2.3 ç¬¦å·çº¦å®š"></a>2.3 ç¬¦å·çº¦å®š</h2><script type="math/tex; mode=display">
\begin{align*}
+ &| ä¸¤ä¸ªæ•´æ•°ç›¸åŠ \\\\
ab &| ä¸¤ä¸ªæ•´æ•°ç›¸ä¹˜ \\\\
= &| èµ‹å€¼\\\\
mod &| æ¨¡äºŒåŠ \\\\
\oplus &| å¼‚æˆ–è¿ç®—\\\\
\boxplus &| æ¨¡ 2^32 åŠ æ³•è¿ç®—\\\\
a||b &| å°†å­—ç¬¦ä¸² a å’Œ b ä¸²è” \\\\
a_H &| a çš„é«˜**16**ä¸º\\\\
a_L &| a çš„ä½**16**ä½\\\\
a <<<_n k &| å¾ªç¯å·¦ç§»\\\\
a>>1 &| å³ç§»\\\\
(a_1, a_2, ..., a_n,)\to(b_1, b_2, ... b_n) &| å°†å‘é‡ a_i æŒ¨ä¸ªèµ‹å€¼ç»™ b_i\\\\
\end{align*}</script><h1 id="3-ç®—æ³•æè¿°"><a href="#3-ç®—æ³•æè¿°" class="headerlink" title="3. ç®—æ³•æè¿°"></a>3. ç®—æ³•æè¿°</h1><h2 id="3-1-ç®—æ³•ç»“æ„"><a href="#3-1-ç®—æ³•ç»“æ„" class="headerlink" title="3.1 ç®—æ³•ç»“æ„"></a>3.1 ç®—æ³•ç»“æ„</h2><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ<code>ZUC</code> ç®—æ³•æœ‰ä¸‰å±‚ç»“æ„ï¼Œç¬¬ä¸€å±‚æ˜¯ä¸€ä¸ª16çº§çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLSFRï¼Œlinear feedback shift registerï¼‰ã€‚ä¸­é—´æ˜¯ä¸€ä¸ªæ¯”ç‰¹é‡ç»„å±‚ï¼ˆBRï¼Œbit-reorganizationï¼‰ã€‚æœ€ä¸‹å±‚æ˜¯ä¸€ä¸ªéçº¿æ€§å‡½æ•°$F$ã€‚</p>
<p><img data-src="https://s1.ax1x.com/2020/09/22/wOM9TU.jpg" alt="ZUCç®—æ³•ç»“æ„"></p>
<h2 id="3-2-çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLSFRï¼‰"><a href="#3-2-çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLSFRï¼‰" class="headerlink" title="3.2 çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLSFRï¼‰"></a>3.2 çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLSFRï¼‰</h2><p>çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLSFRï¼‰æœ‰<strong>16</strong>ä¸ª<strong>31</strong>æ¯”ç‰¹çš„å•å…ƒï¼ˆ$s_0, s_1, â€¦ , s_{15}, s_i\in {1, 2, 3, â€¦ , 2^{31}-1}$ï¼‰ï¼Œå®ƒçš„è¿è¡Œæœ‰ä¸¤ç§æ¨¡å¼ï¼šåˆå§‹åŒ–æ¨¡å¼å’Œå·¥ä½œæ¨¡å¼ã€‚</p>
<p>åœ¨<strong>åˆå§‹åŒ–é˜¶æ®µ</strong>ï¼ŒLFSRè¯»å…¥ä¸€ä¸ª<strong>31</strong>ä½çš„è¾“å…¥å­— <code>u</code> ï¼Œå®ƒé€šè¿‡ä»éçº¿æ€§å‡½æ•° <code>F</code> çš„<strong>32</strong>ä½è¾“å‡º <code>W</code> ä¸­åˆ é™¤æœ€å³è¾¹çš„ä½æ¥è·å¾—ï¼Œä¾‹å¦‚ï¼š<code>u = W &gt;&gt; 1</code>ï¼Œå…·ä½“çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
& \space LSFRWithInitializationMode(u): \\\\
& 1. \qquad v = 2^{15}s_{15}+2^{17}s_{13}+2^{21}s_{10}+2^{20}s_{4}+(1 + 2^8)s_0\space mod(2^{31}-1) \\\\
& 2. \qquad s_{16} = (v + u)\space mod(2^{31} - 1) \\\\
& 3. \qquad if s_{16}=0, then\space set\space s_{16}=2^{31} - 1 \\\\
& 4. \qquad(s_1, s_2, ... s_{16})\to(s_0, s_1, ... , s_{15})\\\\
\end{align*}</script><p>åœ¨<strong>å·¥ä½œé˜¶æ®µ</strong>ï¼ŒLSFRä¸ä¼šæ¥æ”¶ä»»ä½•è¾“å…¥ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸‹é¢æ–¹å¼å·¥ä½œï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&LFSRWithWorkMode() \\\\
&1. \qquad s_{16} = 2^{15}s_{15}+2^{17}s_{13}+2^{21}s_{10}+2^{20}s_{4}+(1+2^8)s_0\space mod(2^{31} - 1)\\\\
&2. \qquad if\space s_{16}=0,\space then \space set \space s_{16}=2^{31} - 1\\\\
&3. \qquad(s_1, s_2, ... s_{16})\to(s_0, s_1, ... , s_{15})\\\\
\end{align*}</script><p><strong>Tipsï¼š</strong>åœ¨ <code>LFSRWithInitializationMode</code> å‡½æ•°ä¸­çš„ Step.1 ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ“ä½œæ¥å®ç°ï¼š</p>
<script type="math/tex; mode=display">
v=(s_{15}<<<_{31}15)+(s_{13}<<<_{31}17)+(s_{10}<<<_{31}21)+(s_{4}<<<_{31}20)+(s_{0}<<<_{31}8)+s_{0}\space mod(2^{31}-1)</script><p>å½“ç„¶ï¼Œå¯ä»¥ç±»æ¯”ç€å¯¹ <code>LFSRWithWordMode()</code> ä¸­çš„ Step.1 è¿›è¡Œå®ç°ã€‚</p>
<h2 id="3-3-æ¯”ç‰¹é‡ç»„ï¼ˆBRï¼‰"><a href="#3-3-æ¯”ç‰¹é‡ç»„ï¼ˆBRï¼‰" class="headerlink" title="3.3 æ¯”ç‰¹é‡ç»„ï¼ˆBRï¼‰"></a>3.3 æ¯”ç‰¹é‡ç»„ï¼ˆBRï¼‰</h2><p>ä¸­é—´å±‚æ˜¯ä¸€ä¸ªæ¯”ç‰¹é‡ç»„ç®—æ³•ã€‚å®ƒä»<strong>LFSR</strong>ä¸­æå–å‡ºæ¥ <code>128</code> æ¯”ç‰¹ï¼Œç„¶åç»„æˆ <code>4</code> ä¸ª <code>32</code> ä½çš„å­—ï¼Œå‰ä¸‰ä¸ªå­—æ˜¯æä¾›ç»™åº•å±‚éçº¿æ€§ <code>F</code> å‡½æ•°ä½¿ç”¨çš„ï¼Œæœ€åä¸€ä¸ªå­—ç”¨æ¥ç”Ÿæˆå¯†é’¥æµã€‚é‡ç»„åçš„ $X_0, X_1, X_2, X_3$ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&Bitreorganization() \\\\
&1. \qquad X_0 = s_{15H}||s_{14L}\\\\
&2. \qquad X_1 = s_{11L}||s_{9H}\\\\
&3. \qquad X_2 = s_{7L}||s_{5H}\\\\
&4. \qquad X_3 = s_{2L}||s_{0H}
\end{align*}</script><p>æ³¨æ„ï¼šè¿™é‡Œçš„ $s_i$ æ˜¯ <code>31</code> æ¯”ç‰¹çš„æ•´æ•°ç±»å‹ï¼Œæ‰€ä»¥ $s_{iH}$ è¡¨ç¤ºçš„æ˜¯ $s_i$ çš„ <code>30...15</code> ä½è€Œä¸æ˜¯ <code>31...16</code> ä½ã€‚</p>
<h2 id="3-4-éçº¿æ€§å‡½æ•°-F"><a href="#3-4-éçº¿æ€§å‡½æ•°-F" class="headerlink" title="3.4 éçº¿æ€§å‡½æ•° F"></a>3.4 éçº¿æ€§å‡½æ•° F</h2><p>éçº¿æ€§å‡½æ•° <code>F</code> æœ‰ä¸¤ä¸ª <code>32</code> æ¯”ç‰¹çš„è®°å¿†å•å…ƒ $R_1$ å’Œ $R_2$ï¼Œè¾“å…¥ä¸º <code>3</code> ä¸ª <code>32</code> æ¯”ç‰¹çš„å­—ï¼š$X_0, X_1, X_2$ï¼Œè¾“å‡ºä¸€ä¸ª <code>32</code> æ¯”ç‰¹çš„å­— <code>W</code>ã€‚å…·ä½“æè¿°å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&F(X_0, X_1, X_2) \\\\
&1. \qquad W = (X_0\oplus R_1)\boxplus R_2 \\\\
&2. \qquad W_1 = (R_1\boxplus X_1) \\\\
&3. \qquad W_2 = (R_2\oplus X_2) \\\\
&4. \qquad R_1 = S(L_1(W_{1L}||W_{2H})) \\\\
&5. \qquad R_2 = S(L_2(W_{2L}||W_{1H}))
\end{align*}</script><p>è¿™é‡Œçš„ <code>S</code> æ˜¯ä¸€ä¸ª <code>32*32</code> å¤§å°çš„ <code>S-Box</code>ï¼Œè€Œ $L_1$ï¼Œ$L_2$ æ˜¯çº¿æ€§å˜æ¢ã€‚</p>
<h3 id="3-4-1-S-Box"><a href="#3-4-1-S-Box" class="headerlink" title="3.4.1 S-Box"></a>3.4.1 S-Box</h3><p><code>32*32</code>å¤§å°çš„ <code>S-Box</code>ï¼ˆ<code>S</code>ï¼‰ï¼Œå…¶å®æ˜¯å››ä¸ªå¤§å°ä¸º <code>8*8</code>çš„ <code>S-boxes</code> å¹¶ç½®è€Œæˆï¼Œä¾‹å¦‚ï¼š$S=(S_0, S_1, S_2, S_3)$ï¼Œè¿™é‡Œçš„ $S_0 = S_2,S_1 = S_3$ã€‚é‚£ä¹ˆ $S_0$ å’Œ $S_1$ å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> S0[<span class="number">256</span>] = &#123;</span><br><span class="line">    <span class="number">0x3e</span>,<span class="number">0x72</span>,<span class="number">0x5b</span>,<span class="number">0x47</span>,<span class="number">0xca</span>,<span class="number">0xe0</span>,<span class="number">0x00</span>,<span class="number">0x33</span>,<span class="number">0x04</span>,<span class="number">0xd1</span>,<span class="number">0x54</span>,<span class="number">0x98</span>,<span class="number">0x09</span>,<span class="number">0xb9</span>,<span class="number">0x6d</span>,<span class="number">0xcb</span>,</span><br><span class="line">    <span class="number">0x7b</span>,<span class="number">0x1b</span>,<span class="number">0xf9</span>,<span class="number">0x32</span>,<span class="number">0xaf</span>,<span class="number">0x9d</span>,<span class="number">0x6a</span>,<span class="number">0xa5</span>,<span class="number">0xb8</span>,<span class="number">0x2d</span>,<span class="number">0xfc</span>,<span class="number">0x1d</span>,<span class="number">0x08</span>,<span class="number">0x53</span>,<span class="number">0x03</span>,<span class="number">0x90</span>,</span><br><span class="line">    <span class="number">0x4d</span>,<span class="number">0x4e</span>,<span class="number">0x84</span>,<span class="number">0x99</span>,<span class="number">0xe4</span>,<span class="number">0xce</span>,<span class="number">0xd9</span>,<span class="number">0x91</span>,<span class="number">0xdd</span>,<span class="number">0xb6</span>,<span class="number">0x85</span>,<span class="number">0x48</span>,<span class="number">0x8b</span>,<span class="number">0x29</span>,<span class="number">0x6e</span>,<span class="number">0xac</span>,</span><br><span class="line">    <span class="number">0xcd</span>,<span class="number">0xc1</span>,<span class="number">0xf8</span>,<span class="number">0x1e</span>,<span class="number">0x73</span>,<span class="number">0x43</span>,<span class="number">0x69</span>,<span class="number">0xc6</span>,<span class="number">0xb5</span>,<span class="number">0xbd</span>,<span class="number">0xfd</span>,<span class="number">0x39</span>,<span class="number">0x63</span>,<span class="number">0x20</span>,<span class="number">0xd4</span>,<span class="number">0x38</span>,</span><br><span class="line">    <span class="number">0x76</span>,<span class="number">0x7d</span>,<span class="number">0xb2</span>,<span class="number">0xa7</span>,<span class="number">0xcf</span>,<span class="number">0xed</span>,<span class="number">0x57</span>,<span class="number">0xc5</span>,<span class="number">0xf3</span>,<span class="number">0x2c</span>,<span class="number">0xbb</span>,<span class="number">0x14</span>,<span class="number">0x21</span>,<span class="number">0x06</span>,<span class="number">0x55</span>,<span class="number">0x9b</span>,</span><br><span class="line">    <span class="number">0xe3</span>,<span class="number">0xef</span>,<span class="number">0x5e</span>,<span class="number">0x31</span>,<span class="number">0x4f</span>,<span class="number">0x7f</span>,<span class="number">0x5a</span>,<span class="number">0xa4</span>,<span class="number">0x0d</span>,<span class="number">0x82</span>,<span class="number">0x51</span>,<span class="number">0x49</span>,<span class="number">0x5f</span>,<span class="number">0xba</span>,<span class="number">0x58</span>,<span class="number">0x1c</span>,</span><br><span class="line">    <span class="number">0x4a</span>,<span class="number">0x16</span>,<span class="number">0xd5</span>,<span class="number">0x17</span>,<span class="number">0xa8</span>,<span class="number">0x92</span>,<span class="number">0x24</span>,<span class="number">0x1f</span>,<span class="number">0x8c</span>,<span class="number">0xff</span>,<span class="number">0xd8</span>,<span class="number">0xae</span>,<span class="number">0x2e</span>,<span class="number">0x01</span>,<span class="number">0xd3</span>,<span class="number">0xad</span>,</span><br><span class="line">    <span class="number">0x3b</span>,<span class="number">0x4b</span>,<span class="number">0xda</span>,<span class="number">0x46</span>,<span class="number">0xeb</span>,<span class="number">0xc9</span>,<span class="number">0xde</span>,<span class="number">0x9a</span>,<span class="number">0x8f</span>,<span class="number">0x87</span>,<span class="number">0xd7</span>,<span class="number">0x3a</span>,<span class="number">0x80</span>,<span class="number">0x6f</span>,<span class="number">0x2f</span>,<span class="number">0xc8</span>,</span><br><span class="line">    <span class="number">0xb1</span>,<span class="number">0xb4</span>,<span class="number">0x37</span>,<span class="number">0xf7</span>,<span class="number">0x0a</span>,<span class="number">0x22</span>,<span class="number">0x13</span>,<span class="number">0x28</span>,<span class="number">0x7c</span>,<span class="number">0xcc</span>,<span class="number">0x3c</span>,<span class="number">0x89</span>,<span class="number">0xc7</span>,<span class="number">0xc3</span>,<span class="number">0x96</span>,<span class="number">0x56</span>,</span><br><span class="line">    <span class="number">0x07</span>,<span class="number">0xbf</span>,<span class="number">0x7e</span>,<span class="number">0xf0</span>,<span class="number">0x0b</span>,<span class="number">0x2b</span>,<span class="number">0x97</span>,<span class="number">0x52</span>,<span class="number">0x35</span>,<span class="number">0x41</span>,<span class="number">0x79</span>,<span class="number">0x61</span>,<span class="number">0xa6</span>,<span class="number">0x4c</span>,<span class="number">0x10</span>,<span class="number">0xfe</span>,</span><br><span class="line">    <span class="number">0xbc</span>,<span class="number">0x26</span>,<span class="number">0x95</span>,<span class="number">0x88</span>,<span class="number">0x8a</span>,<span class="number">0xb0</span>,<span class="number">0xa3</span>,<span class="number">0xfb</span>,<span class="number">0xc0</span>,<span class="number">0x18</span>,<span class="number">0x94</span>,<span class="number">0xf2</span>,<span class="number">0xe1</span>,<span class="number">0xe5</span>,<span class="number">0xe9</span>,<span class="number">0x5d</span>,</span><br><span class="line">    <span class="number">0xd0</span>,<span class="number">0xdc</span>,<span class="number">0x11</span>,<span class="number">0x66</span>,<span class="number">0x64</span>,<span class="number">0x5c</span>,<span class="number">0xec</span>,<span class="number">0x59</span>,<span class="number">0x42</span>,<span class="number">0x75</span>,<span class="number">0x12</span>,<span class="number">0xf5</span>,<span class="number">0x74</span>,<span class="number">0x9c</span>,<span class="number">0xaa</span>,<span class="number">0x23</span>,</span><br><span class="line">    <span class="number">0x0e</span>,<span class="number">0x86</span>,<span class="number">0xab</span>,<span class="number">0xbe</span>,<span class="number">0x2a</span>,<span class="number">0x02</span>,<span class="number">0xe7</span>,<span class="number">0x67</span>,<span class="number">0xe6</span>,<span class="number">0x44</span>,<span class="number">0xa2</span>,<span class="number">0x6c</span>,<span class="number">0xc2</span>,<span class="number">0x93</span>,<span class="number">0x9f</span>,<span class="number">0xf1</span>,</span><br><span class="line">    <span class="number">0xf6</span>,<span class="number">0xfa</span>,<span class="number">0x36</span>,<span class="number">0xd2</span>,<span class="number">0x50</span>,<span class="number">0x68</span>,<span class="number">0x9e</span>,<span class="number">0x62</span>,<span class="number">0x71</span>,<span class="number">0x15</span>,<span class="number">0x3d</span>,<span class="number">0xd6</span>,<span class="number">0x40</span>,<span class="number">0xc4</span>,<span class="number">0xe2</span>,<span class="number">0x0f</span>,</span><br><span class="line">    <span class="number">0x8e</span>,<span class="number">0x83</span>,<span class="number">0x77</span>,<span class="number">0x6b</span>,<span class="number">0x25</span>,<span class="number">0x05</span>,<span class="number">0x3f</span>,<span class="number">0x0c</span>,<span class="number">0x30</span>,<span class="number">0xea</span>,<span class="number">0x70</span>,<span class="number">0xb7</span>,<span class="number">0xa1</span>,<span class="number">0xe8</span>,<span class="number">0xa9</span>,<span class="number">0x65</span>,</span><br><span class="line">    <span class="number">0x8d</span>,<span class="number">0x27</span>,<span class="number">0x1a</span>,<span class="number">0xdb</span>,<span class="number">0x81</span>,<span class="number">0xb3</span>,<span class="number">0xa0</span>,<span class="number">0xf4</span>,<span class="number">0x45</span>,<span class="number">0x7a</span>,<span class="number">0x19</span>,<span class="number">0xdf</span>,<span class="number">0xee</span>,<span class="number">0x78</span>,<span class="number">0x34</span>,<span class="number">0x60</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> S1[<span class="number">256</span>] = &#123;</span><br><span class="line">    <span class="number">0x55</span>,<span class="number">0xc2</span>,<span class="number">0x63</span>,<span class="number">0x71</span>,<span class="number">0x3b</span>,<span class="number">0xc8</span>,<span class="number">0x47</span>,<span class="number">0x86</span>,<span class="number">0x9f</span>,<span class="number">0x3c</span>,<span class="number">0xda</span>,<span class="number">0x5b</span>,<span class="number">0x29</span>,<span class="number">0xaa</span>,<span class="number">0xfd</span>,<span class="number">0x77</span>,</span><br><span class="line">    <span class="number">0x8c</span>,<span class="number">0xc5</span>,<span class="number">0x94</span>,<span class="number">0x0c</span>,<span class="number">0xa6</span>,<span class="number">0x1a</span>,<span class="number">0x13</span>,<span class="number">0x00</span>,<span class="number">0xe3</span>,<span class="number">0xa8</span>,<span class="number">0x16</span>,<span class="number">0x72</span>,<span class="number">0x40</span>,<span class="number">0xf9</span>,<span class="number">0xf8</span>,<span class="number">0x42</span>,</span><br><span class="line">    <span class="number">0x44</span>,<span class="number">0x26</span>,<span class="number">0x68</span>,<span class="number">0x96</span>,<span class="number">0x81</span>,<span class="number">0xd9</span>,<span class="number">0x45</span>,<span class="number">0x3e</span>,<span class="number">0x10</span>,<span class="number">0x76</span>,<span class="number">0xc6</span>,<span class="number">0xa7</span>,<span class="number">0x8b</span>,<span class="number">0x39</span>,<span class="number">0x43</span>,<span class="number">0xe1</span>,</span><br><span class="line">    <span class="number">0x3a</span>,<span class="number">0xb5</span>,<span class="number">0x56</span>,<span class="number">0x2a</span>,<span class="number">0xc0</span>,<span class="number">0x6d</span>,<span class="number">0xb3</span>,<span class="number">0x05</span>,<span class="number">0x22</span>,<span class="number">0x66</span>,<span class="number">0xbf</span>,<span class="number">0xdc</span>,<span class="number">0x0b</span>,<span class="number">0xfa</span>,<span class="number">0x62</span>,<span class="number">0x48</span>,</span><br><span class="line">    <span class="number">0xdd</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x06</span>,<span class="number">0x36</span>,<span class="number">0xc9</span>,<span class="number">0xc1</span>,<span class="number">0xcf</span>,<span class="number">0xf6</span>,<span class="number">0x27</span>,<span class="number">0x52</span>,<span class="number">0xbb</span>,<span class="number">0x69</span>,<span class="number">0xf5</span>,<span class="number">0xd4</span>,<span class="number">0x87</span>,</span><br><span class="line">    <span class="number">0x7f</span>,<span class="number">0x84</span>,<span class="number">0x4c</span>,<span class="number">0xd2</span>,<span class="number">0x9c</span>,<span class="number">0x57</span>,<span class="number">0xa4</span>,<span class="number">0xbc</span>,<span class="number">0x4f</span>,<span class="number">0x9a</span>,<span class="number">0xdf</span>,<span class="number">0xfe</span>,<span class="number">0xd6</span>,<span class="number">0x8d</span>,<span class="number">0x7a</span>,<span class="number">0xeb</span>,</span><br><span class="line">    <span class="number">0x2b</span>,<span class="number">0x53</span>,<span class="number">0xd8</span>,<span class="number">0x5c</span>,<span class="number">0xa1</span>,<span class="number">0x14</span>,<span class="number">0x17</span>,<span class="number">0xfb</span>,<span class="number">0x23</span>,<span class="number">0xd5</span>,<span class="number">0x7d</span>,<span class="number">0x30</span>,<span class="number">0x67</span>,<span class="number">0x73</span>,<span class="number">0x08</span>,<span class="number">0x09</span>,</span><br><span class="line">    <span class="number">0xee</span>,<span class="number">0xb7</span>,<span class="number">0x70</span>,<span class="number">0x3f</span>,<span class="number">0x61</span>,<span class="number">0xb2</span>,<span class="number">0x19</span>,<span class="number">0x8e</span>,<span class="number">0x4e</span>,<span class="number">0xe5</span>,<span class="number">0x4b</span>,<span class="number">0x93</span>,<span class="number">0x8f</span>,<span class="number">0x5d</span>,<span class="number">0xdb</span>,<span class="number">0xa9</span>,</span><br><span class="line">    <span class="number">0xad</span>,<span class="number">0xf1</span>,<span class="number">0xae</span>,<span class="number">0x2e</span>,<span class="number">0xcb</span>,<span class="number">0x0d</span>,<span class="number">0xfc</span>,<span class="number">0xf4</span>,<span class="number">0x2d</span>,<span class="number">0x46</span>,<span class="number">0x6e</span>,<span class="number">0x1d</span>,<span class="number">0x97</span>,<span class="number">0xe8</span>,<span class="number">0xd1</span>,<span class="number">0xe9</span>,</span><br><span class="line">    <span class="number">0x4d</span>,<span class="number">0x37</span>,<span class="number">0xa5</span>,<span class="number">0x75</span>,<span class="number">0x5e</span>,<span class="number">0x83</span>,<span class="number">0x9e</span>,<span class="number">0xab</span>,<span class="number">0x82</span>,<span class="number">0x9d</span>,<span class="number">0xb9</span>,<span class="number">0x1c</span>,<span class="number">0xe0</span>,<span class="number">0xcd</span>,<span class="number">0x49</span>,<span class="number">0x89</span>,</span><br><span class="line">    <span class="number">0x01</span>,<span class="number">0xb6</span>,<span class="number">0xbd</span>,<span class="number">0x58</span>,<span class="number">0x24</span>,<span class="number">0xa2</span>,<span class="number">0x5f</span>,<span class="number">0x38</span>,<span class="number">0x78</span>,<span class="number">0x99</span>,<span class="number">0x15</span>,<span class="number">0x90</span>,<span class="number">0x50</span>,<span class="number">0xb8</span>,<span class="number">0x95</span>,<span class="number">0xe4</span>,</span><br><span class="line">    <span class="number">0xd0</span>,<span class="number">0x91</span>,<span class="number">0xc7</span>,<span class="number">0xce</span>,<span class="number">0xed</span>,<span class="number">0x0f</span>,<span class="number">0xb4</span>,<span class="number">0x6f</span>,<span class="number">0xa0</span>,<span class="number">0xcc</span>,<span class="number">0xf0</span>,<span class="number">0x02</span>,<span class="number">0x4a</span>,<span class="number">0x79</span>,<span class="number">0xc3</span>,<span class="number">0xde</span>,</span><br><span class="line">    <span class="number">0xa3</span>,<span class="number">0xef</span>,<span class="number">0xea</span>,<span class="number">0x51</span>,<span class="number">0xe6</span>,<span class="number">0x6b</span>,<span class="number">0x18</span>,<span class="number">0xec</span>,<span class="number">0x1b</span>,<span class="number">0x2c</span>,<span class="number">0x80</span>,<span class="number">0xf7</span>,<span class="number">0x74</span>,<span class="number">0xe7</span>,<span class="number">0xff</span>,<span class="number">0x21</span>,</span><br><span class="line">    <span class="number">0x5a</span>,<span class="number">0x6a</span>,<span class="number">0x54</span>,<span class="number">0x1e</span>,<span class="number">0x41</span>,<span class="number">0x31</span>,<span class="number">0x92</span>,<span class="number">0x35</span>,<span class="number">0xc4</span>,<span class="number">0x33</span>,<span class="number">0x07</span>,<span class="number">0x0a</span>,<span class="number">0xba</span>,<span class="number">0x7e</span>,<span class="number">0x0e</span>,<span class="number">0x34</span>,</span><br><span class="line">    <span class="number">0x88</span>,<span class="number">0xb1</span>,<span class="number">0x98</span>,<span class="number">0x7c</span>,<span class="number">0xf3</span>,<span class="number">0x3d</span>,<span class="number">0x60</span>,<span class="number">0x6c</span>,<span class="number">0x7b</span>,<span class="number">0xca</span>,<span class="number">0xd3</span>,<span class="number">0x1f</span>,<span class="number">0x32</span>,<span class="number">0x65</span>,<span class="number">0x04</span>,<span class="number">0x28</span>,</span><br><span class="line">    <span class="number">0x64</span>,<span class="number">0xbe</span>,<span class="number">0x85</span>,<span class="number">0x9b</span>,<span class="number">0x2f</span>,<span class="number">0x59</span>,<span class="number">0x8a</span>,<span class="number">0xd7</span>,<span class="number">0xb0</span>,<span class="number">0x25</span>,<span class="number">0xac</span>,<span class="number">0xaf</span>,<span class="number">0x12</span>,<span class="number">0x03</span>,<span class="number">0xe2</span>,<span class="number">0xf2</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="3-4-2-çº¿æ€§å˜æ¢"><a href="#3-4-2-çº¿æ€§å˜æ¢" class="headerlink" title="3.4.2 çº¿æ€§å˜æ¢"></a>3.4.2 çº¿æ€§å˜æ¢</h3><p>å¯¹äº $L_1$ å’Œ $L_2$ çº¿æ€§å˜æ¢è€Œè¨€ï¼Œéƒ½æ˜¯å°† <code>32</code> ä½çš„å­—è½¬æ¢æˆå¦ä¸€ä¸ª <code>32</code> ä½çš„å­—ï¼Œå…·ä½“è½¬æ¢å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
L_1(X)=X\oplus (X<<<_{32}2)\oplus (X<<<_{32}10)\oplus (X<<<_{32}18) \oplus(X<<<_{32}24)\\\\
L_2(X)=X\oplus (X<<<_{32}8)\oplus (X<<<_{32}14)\oplus (X<<<_{32}22) \oplus(X<<<_{32}30)</script><h2 id="3-5-å¯†é’¥è£…å…¥"><a href="#3-5-å¯†é’¥è£…å…¥" class="headerlink" title="3.5 å¯†é’¥è£…å…¥"></a>3.5 å¯†é’¥è£…å…¥</h2><p>å¯†é’¥è£…å…¥è¿‡ç¨‹ï¼Œå°†ä¼šæŠŠåˆå§‹å¯†é’¥ <code>k(128 bits)</code> å’Œ <code>iv(128 bits)</code> æ‰©å±•æˆ <code>16</code> ä¸ª <code>31</code> ä½æ•´æ•°ï¼Œä½œä¸º <code>LFSR</code> çš„åˆå§‹çŠ¶æ€ã€‚</p>
<p>è£…è½½è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
k = k_0||k_1||k_2||...||k_{15}</script><p>å’Œï¼š</p>
<script type="math/tex; mode=display">
iv=iv_0||iv_1||...||iv_{15}</script><p>è¿™é‡Œçš„ $k_i$ å’Œ $iv_i$ å‡ä¸º <code>8</code> ä½çš„å­—èŠ‚ï¼Œç„¶åæ„é€  <code>D</code>ï¼Œ <code>D</code> ä¸º <code>240</code> æ¯”ç‰¹çš„å¸¸é‡ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼åˆ†æˆ <code>16</code> ä¸ª <code>15</code> ä½çš„å­ä¸²ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
d_0 = 100010011010111_2, \\\\
d_1 = 010011010111100_2,\\\\
d_2 = 110001001101011_2,\\\\
d_3 = 001001101011110_2,\\\\
d_4 = 101011110001001_2,\\\\
d_5 = 011010111100010_2,\\\\
d_6 = 111000100110101_2,\\\\
d_7 = 000100110101111_2,\\\\
d_8= 100110101111000_2,\\\\
d_9 = 010111100010011_2,\\\\
d_{10} = 110101111000100_2,\\\\
d_{11} = 001101011110001_2,\\\\
\end{align*}</script><p>é‚£ä¹ˆ $D=d_0||d_1||â€¦||d_{15}$ã€‚</p>
<p>å¯¹äº $s_i$ï¼Œæœ‰ï¼š$s_i = k_i||d_i||iv_i$ã€‚</p>
<h1 id="3-6-ZUCç®—æ³•æ‰§è¡Œè¿‡ç¨‹"><a href="#3-6-ZUCç®—æ³•æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="3.6 ZUCç®—æ³•æ‰§è¡Œè¿‡ç¨‹"></a>3.6 ZUCç®—æ³•æ‰§è¡Œè¿‡ç¨‹</h1><p>ä¸¤ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µå’Œå·¥ä½œé˜¶æ®µã€‚</p>
<h2 id="3-6-1-åˆå§‹åŒ–é˜¶æ®µ"><a href="#3-6-1-åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="3.6.1 åˆå§‹åŒ–é˜¶æ®µ"></a>3.6.1 åˆå§‹åŒ–é˜¶æ®µ</h2><p>åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œç®—æ³•å°† <code>128</code> æ¯”ç‰¹çš„ <code>key</code> å’Œ <code>iv</code> è½½å…¥å¹¶å¤„ç†ï¼Œç„¶åè£…å…¥åˆ° <code>LFSR</code> ä¸­ï¼Œä¸æ­¤åŒæ—¶ï¼Œè®¾ç½® <code>32</code> æ¯”ç‰¹çš„è®°å¿†å•å…ƒ $R_1$ å’Œ $R_2$ï¼ˆåˆå§‹åŒ–ä¸º <code>0</code>ï¼‰ã€‚ç„¶åæ‰§è¡Œä¸‹é¢çš„æ“ä½œ <code>31</code> æ¬¡ã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
&1. \qquad Bitreorganization()\\\\
&2. \qquad w=F(X_0,X_1,X_2)\\\\
&3. \qquad LFSRWithInitializationMode(w>>1)\\\\
\end{align*}</script><h3 id="3-6-2-å·¥ä½œé˜¶æ®µ"><a href="#3-6-2-å·¥ä½œé˜¶æ®µ" class="headerlink" title="3.6.2 å·¥ä½œé˜¶æ®µ"></a>3.6.2 å·¥ä½œé˜¶æ®µ</h3><p>åˆå§‹åŒ–å®Œæˆåï¼Œç®—æ³•ç«‹åˆ»è¿›å…¥å·¥ä½œé˜¶æ®µã€‚åœ¨è¯¥é˜¶æ®µï¼Œç®—æ³•æ‰§è¡Œä¸‹é¢æ“ä½œä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸¢æ‰ <code>F</code> çš„è¾“å‡º <code>W</code>ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
&1. \qquad Bitreorganization()\\\\
&2. \qquad F(X_0,X_1,X_2) \\\\
&3. \qquad LFSRWithWorkMode()\\\\
\end{align*}</script><p>ç„¶åç®—æ³•å†è¿›å…¥å¯†é’¥æµäº§ç”Ÿé˜¶æ®µï¼Œåœ¨æ¯æ¬¡è¿­ä»£æ—¶ï¼Œä¸‹é¢æ“ä½œæ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶è¾“å‡ºä¸€æ¬¡ <code>32</code> æ¯”ç‰¹çš„å­— <code>Z</code> ä½œä¸ºè¾“å‡ºã€‚</p>
<script type="math/tex; mode=display">
\begin{align*}
&1. \qquad Bitreorganization()\\\\
&2. \qquad Z=F(X_0,X_1,X_2)\oplus X_3 \\\\
&3. \qquad LFSRWithWorkMode()\\\\
\end{align*}</script><h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><h2 id="A-Cè¯­è¨€å®ç°"><a href="#A-Cè¯­è¨€å®ç°" class="headerlink" title="A. Cè¯­è¨€å®ç°"></a>A. Cè¯­è¨€å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ZUC.h&quot;</span></span></span><br><span class="line"><span class="comment">/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> u8;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> u32;</span><br><span class="line"><span class="comment">/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- */</span></span><br><span class="line"><span class="comment">/* the state registers of LFSR */</span></span><br><span class="line">u32 LFSR_S0;</span><br><span class="line">u32 LFSR_S1;</span><br><span class="line">u32 LFSR_S2;</span><br><span class="line">u32 LFSR_S3;</span><br><span class="line">u32 LFSR_S4;</span><br><span class="line">u32 LFSR_S5;</span><br><span class="line">u32 LFSR_S6;</span><br><span class="line">u32 LFSR_S7;</span><br><span class="line">u32 LFSR_S8;</span><br><span class="line">u32 LFSR_S9;</span><br><span class="line">u32 LFSR_S10;</span><br><span class="line">u32 LFSR_S11;</span><br><span class="line">u32 LFSR_S12;</span><br><span class="line">u32 LFSR_S13;</span><br><span class="line">u32 LFSR_S14;</span><br><span class="line">u32 LFSR_S15;</span><br><span class="line"><span class="comment">/* the registers of F */</span></span><br><span class="line">u32 F_R1;</span><br><span class="line">u32 F_R2;</span><br><span class="line"><span class="comment">/* the outputs of BitReorganization */</span></span><br><span class="line">u32 BRC_X0;</span><br><span class="line">u32 BRC_X1;</span><br><span class="line">u32 BRC_X2;</span><br><span class="line">u32 BRC_X3;</span><br><span class="line"><span class="comment">/* the s-boxes */</span></span><br><span class="line">u8 S0[<span class="number">256</span>] = &#123;</span><br><span class="line">        <span class="number">0x3e</span>, <span class="number">0x72</span>, <span class="number">0x5b</span>, <span class="number">0x47</span>, <span class="number">0xca</span>, <span class="number">0xe0</span>, <span class="number">0x00</span>, <span class="number">0x33</span>, <span class="number">0x04</span>, <span class="number">0xd1</span>, <span class="number">0x54</span>, <span class="number">0x98</span>, <span class="number">0x09</span>, <span class="number">0xb9</span>, <span class="number">0x6d</span>, <span class="number">0xcb</span>,</span><br><span class="line">        <span class="number">0x7b</span>, <span class="number">0x1b</span>, <span class="number">0xf9</span>, <span class="number">0x32</span>, <span class="number">0xaf</span>, <span class="number">0x9d</span>, <span class="number">0x6a</span>, <span class="number">0xa5</span>, <span class="number">0xb8</span>, <span class="number">0x2d</span>, <span class="number">0xfc</span>, <span class="number">0x1d</span>, <span class="number">0x08</span>, <span class="number">0x53</span>, <span class="number">0x03</span>, <span class="number">0x90</span>,</span><br><span class="line">        <span class="number">0x4d</span>, <span class="number">0x4e</span>, <span class="number">0x84</span>, <span class="number">0x99</span>, <span class="number">0xe4</span>, <span class="number">0xce</span>, <span class="number">0xd9</span>, <span class="number">0x91</span>, <span class="number">0xdd</span>, <span class="number">0xb6</span>, <span class="number">0x85</span>, <span class="number">0x48</span>, <span class="number">0x8b</span>, <span class="number">0x29</span>, <span class="number">0x6e</span>, <span class="number">0xac</span>,</span><br><span class="line">        <span class="number">0xcd</span>, <span class="number">0xc1</span>, <span class="number">0xf8</span>, <span class="number">0x1e</span>, <span class="number">0x73</span>, <span class="number">0x43</span>, <span class="number">0x69</span>, <span class="number">0xc6</span>, <span class="number">0xb5</span>, <span class="number">0xbd</span>, <span class="number">0xfd</span>, <span class="number">0x39</span>, <span class="number">0x63</span>, <span class="number">0x20</span>, <span class="number">0xd4</span>, <span class="number">0x38</span>,</span><br><span class="line">        <span class="number">0x76</span>, <span class="number">0x7d</span>, <span class="number">0xb2</span>, <span class="number">0xa7</span>, <span class="number">0xcf</span>, <span class="number">0xed</span>, <span class="number">0x57</span>, <span class="number">0xc5</span>, <span class="number">0xf3</span>, <span class="number">0x2c</span>, <span class="number">0xbb</span>, <span class="number">0x14</span>, <span class="number">0x21</span>, <span class="number">0x06</span>, <span class="number">0x55</span>, <span class="number">0x9b</span>,</span><br><span class="line">        <span class="number">0xe3</span>, <span class="number">0xef</span>, <span class="number">0x5e</span>, <span class="number">0x31</span>, <span class="number">0x4f</span>, <span class="number">0x7f</span>, <span class="number">0x5a</span>, <span class="number">0xa4</span>, <span class="number">0x0d</span>, <span class="number">0x82</span>, <span class="number">0x51</span>, <span class="number">0x49</span>, <span class="number">0x5f</span>, <span class="number">0xba</span>, <span class="number">0x58</span>, <span class="number">0x1c</span>,</span><br><span class="line">        <span class="number">0x4a</span>, <span class="number">0x16</span>, <span class="number">0xd5</span>, <span class="number">0x17</span>, <span class="number">0xa8</span>, <span class="number">0x92</span>, <span class="number">0x24</span>, <span class="number">0x1f</span>, <span class="number">0x8c</span>, <span class="number">0xff</span>, <span class="number">0xd8</span>, <span class="number">0xae</span>, <span class="number">0x2e</span>, <span class="number">0x01</span>, <span class="number">0xd3</span>, <span class="number">0xad</span>,</span><br><span class="line">        <span class="number">0x3b</span>, <span class="number">0x4b</span>, <span class="number">0xda</span>, <span class="number">0x46</span>, <span class="number">0xeb</span>, <span class="number">0xc9</span>, <span class="number">0xde</span>, <span class="number">0x9a</span>, <span class="number">0x8f</span>, <span class="number">0x87</span>, <span class="number">0xd7</span>, <span class="number">0x3a</span>, <span class="number">0x80</span>, <span class="number">0x6f</span>, <span class="number">0x2f</span>, <span class="number">0xc8</span>,</span><br><span class="line">        <span class="number">0xb1</span>, <span class="number">0xb4</span>, <span class="number">0x37</span>, <span class="number">0xf7</span>, <span class="number">0x0a</span>, <span class="number">0x22</span>, <span class="number">0x13</span>, <span class="number">0x28</span>, <span class="number">0x7c</span>, <span class="number">0xcc</span>, <span class="number">0x3c</span>, <span class="number">0x89</span>, <span class="number">0xc7</span>, <span class="number">0xc3</span>, <span class="number">0x96</span>, <span class="number">0x56</span>,</span><br><span class="line">        <span class="number">0x07</span>, <span class="number">0xbf</span>, <span class="number">0x7e</span>, <span class="number">0xf0</span>, <span class="number">0x0b</span>, <span class="number">0x2b</span>, <span class="number">0x97</span>, <span class="number">0x52</span>, <span class="number">0x35</span>, <span class="number">0x41</span>, <span class="number">0x79</span>, <span class="number">0x61</span>, <span class="number">0xa6</span>, <span class="number">0x4c</span>, <span class="number">0x10</span>, <span class="number">0xfe</span>,</span><br><span class="line">        <span class="number">0xbc</span>, <span class="number">0x26</span>, <span class="number">0x95</span>, <span class="number">0x88</span>, <span class="number">0x8a</span>, <span class="number">0xb0</span>, <span class="number">0xa3</span>, <span class="number">0xfb</span>, <span class="number">0xc0</span>, <span class="number">0x18</span>, <span class="number">0x94</span>, <span class="number">0xf2</span>, <span class="number">0xe1</span>, <span class="number">0xe5</span>, <span class="number">0xe9</span>, <span class="number">0x5d</span>,</span><br><span class="line">        <span class="number">0xd0</span>, <span class="number">0xdc</span>, <span class="number">0x11</span>, <span class="number">0x66</span>, <span class="number">0x64</span>, <span class="number">0x5c</span>, <span class="number">0xec</span>, <span class="number">0x59</span>, <span class="number">0x42</span>, <span class="number">0x75</span>, <span class="number">0x12</span>, <span class="number">0xf5</span>, <span class="number">0x74</span>, <span class="number">0x9c</span>, <span class="number">0xaa</span>, <span class="number">0x23</span>,</span><br><span class="line">        <span class="number">0x0e</span>, <span class="number">0x86</span>, <span class="number">0xab</span>, <span class="number">0xbe</span>, <span class="number">0x2a</span>, <span class="number">0x02</span>, <span class="number">0xe7</span>, <span class="number">0x67</span>, <span class="number">0xe6</span>, <span class="number">0x44</span>, <span class="number">0xa2</span>, <span class="number">0x6c</span>, <span class="number">0xc2</span>, <span class="number">0x93</span>, <span class="number">0x9f</span>, <span class="number">0xf1</span>,</span><br><span class="line">        <span class="number">0xf6</span>, <span class="number">0xfa</span>, <span class="number">0x36</span>, <span class="number">0xd2</span>, <span class="number">0x50</span>, <span class="number">0x68</span>, <span class="number">0x9e</span>, <span class="number">0x62</span>, <span class="number">0x71</span>, <span class="number">0x15</span>, <span class="number">0x3d</span>, <span class="number">0xd6</span>, <span class="number">0x40</span>, <span class="number">0xc4</span>, <span class="number">0xe2</span>, <span class="number">0x0f</span>,</span><br><span class="line">        <span class="number">0x8e</span>, <span class="number">0x83</span>, <span class="number">0x77</span>, <span class="number">0x6b</span>, <span class="number">0x25</span>, <span class="number">0x05</span>, <span class="number">0x3f</span>, <span class="number">0x0c</span>, <span class="number">0x30</span>, <span class="number">0xea</span>, <span class="number">0x70</span>, <span class="number">0xb7</span>, <span class="number">0xa1</span>, <span class="number">0xe8</span>, <span class="number">0xa9</span>, <span class="number">0x65</span>,</span><br><span class="line">        <span class="number">0x8d</span>, <span class="number">0x27</span>, <span class="number">0x1a</span>, <span class="number">0xdb</span>, <span class="number">0x81</span>, <span class="number">0xb3</span>, <span class="number">0xa0</span>, <span class="number">0xf4</span>, <span class="number">0x45</span>, <span class="number">0x7a</span>, <span class="number">0x19</span>, <span class="number">0xdf</span>, <span class="number">0xee</span>, <span class="number">0x78</span>, <span class="number">0x34</span>, <span class="number">0x60</span></span><br><span class="line">&#125;;</span><br><span class="line">u8 S1[<span class="number">256</span>] = &#123;</span><br><span class="line">        <span class="number">0x55</span>, <span class="number">0xc2</span>, <span class="number">0x63</span>, <span class="number">0x71</span>, <span class="number">0x3b</span>, <span class="number">0xc8</span>, <span class="number">0x47</span>, <span class="number">0x86</span>, <span class="number">0x9f</span>, <span class="number">0x3c</span>, <span class="number">0xda</span>, <span class="number">0x5b</span>, <span class="number">0x29</span>, <span class="number">0xaa</span>, <span class="number">0xfd</span>, <span class="number">0x77</span>,</span><br><span class="line">        <span class="number">0x8c</span>, <span class="number">0xc5</span>, <span class="number">0x94</span>, <span class="number">0x0c</span>, <span class="number">0xa6</span>, <span class="number">0x1a</span>, <span class="number">0x13</span>, <span class="number">0x00</span>, <span class="number">0xe3</span>, <span class="number">0xa8</span>, <span class="number">0x16</span>, <span class="number">0x72</span>, <span class="number">0x40</span>, <span class="number">0xf9</span>, <span class="number">0xf8</span>, <span class="number">0x42</span>,</span><br><span class="line">        <span class="number">0x44</span>, <span class="number">0x26</span>, <span class="number">0x68</span>, <span class="number">0x96</span>, <span class="number">0x81</span>, <span class="number">0xd9</span>, <span class="number">0x45</span>, <span class="number">0x3e</span>, <span class="number">0x10</span>, <span class="number">0x76</span>, <span class="number">0xc6</span>, <span class="number">0xa7</span>, <span class="number">0x8b</span>, <span class="number">0x39</span>, <span class="number">0x43</span>, <span class="number">0xe1</span>,</span><br><span class="line">        <span class="number">0x3a</span>, <span class="number">0xb5</span>, <span class="number">0x56</span>, <span class="number">0x2a</span>, <span class="number">0xc0</span>, <span class="number">0x6d</span>, <span class="number">0xb3</span>, <span class="number">0x05</span>, <span class="number">0x22</span>, <span class="number">0x66</span>, <span class="number">0xbf</span>, <span class="number">0xdc</span>, <span class="number">0x0b</span>, <span class="number">0xfa</span>, <span class="number">0x62</span>, <span class="number">0x48</span>,</span><br><span class="line">        <span class="number">0xdd</span>, <span class="number">0x20</span>, <span class="number">0x11</span>, <span class="number">0x06</span>, <span class="number">0x36</span>, <span class="number">0xc9</span>, <span class="number">0xc1</span>, <span class="number">0xcf</span>, <span class="number">0xf6</span>, <span class="number">0x27</span>, <span class="number">0x52</span>, <span class="number">0xbb</span>, <span class="number">0x69</span>, <span class="number">0xf5</span>, <span class="number">0xd4</span>, <span class="number">0x87</span>,</span><br><span class="line">        <span class="number">0x7f</span>, <span class="number">0x84</span>, <span class="number">0x4c</span>, <span class="number">0xd2</span>, <span class="number">0x9c</span>, <span class="number">0x57</span>, <span class="number">0xa4</span>, <span class="number">0xbc</span>, <span class="number">0x4f</span>, <span class="number">0x9a</span>, <span class="number">0xdf</span>, <span class="number">0xfe</span>, <span class="number">0xd6</span>, <span class="number">0x8d</span>, <span class="number">0x7a</span>, <span class="number">0xeb</span>,</span><br><span class="line">        <span class="number">0x2b</span>, <span class="number">0x53</span>, <span class="number">0xd8</span>, <span class="number">0x5c</span>, <span class="number">0xa1</span>, <span class="number">0x14</span>, <span class="number">0x17</span>, <span class="number">0xfb</span>, <span class="number">0x23</span>, <span class="number">0xd5</span>, <span class="number">0x7d</span>, <span class="number">0x30</span>, <span class="number">0x67</span>, <span class="number">0x73</span>, <span class="number">0x08</span>, <span class="number">0x09</span>,</span><br><span class="line">        <span class="number">0xee</span>, <span class="number">0xb7</span>, <span class="number">0x70</span>, <span class="number">0x3f</span>, <span class="number">0x61</span>, <span class="number">0xb2</span>, <span class="number">0x19</span>, <span class="number">0x8e</span>, <span class="number">0x4e</span>, <span class="number">0xe5</span>, <span class="number">0x4b</span>, <span class="number">0x93</span>, <span class="number">0x8f</span>, <span class="number">0x5d</span>, <span class="number">0xdb</span>, <span class="number">0xa9</span>,</span><br><span class="line">        <span class="number">0xad</span>, <span class="number">0xf1</span>, <span class="number">0xae</span>, <span class="number">0x2e</span>, <span class="number">0xcb</span>, <span class="number">0x0d</span>, <span class="number">0xfc</span>, <span class="number">0xf4</span>, <span class="number">0x2d</span>, <span class="number">0x46</span>, <span class="number">0x6e</span>, <span class="number">0x1d</span>, <span class="number">0x97</span>, <span class="number">0xe8</span>, <span class="number">0xd1</span>, <span class="number">0xe9</span>,</span><br><span class="line">        <span class="number">0x4d</span>, <span class="number">0x37</span>, <span class="number">0xa5</span>, <span class="number">0x75</span>, <span class="number">0x5e</span>, <span class="number">0x83</span>, <span class="number">0x9e</span>, <span class="number">0xab</span>, <span class="number">0x82</span>, <span class="number">0x9d</span>, <span class="number">0xb9</span>, <span class="number">0x1c</span>, <span class="number">0xe0</span>, <span class="number">0xcd</span>, <span class="number">0x49</span>, <span class="number">0x89</span>,</span><br><span class="line">        <span class="number">0x01</span>, <span class="number">0xb6</span>, <span class="number">0xbd</span>, <span class="number">0x58</span>, <span class="number">0x24</span>, <span class="number">0xa2</span>, <span class="number">0x5f</span>, <span class="number">0x38</span>, <span class="number">0x78</span>, <span class="number">0x99</span>, <span class="number">0x15</span>, <span class="number">0x90</span>, <span class="number">0x50</span>, <span class="number">0xb8</span>, <span class="number">0x95</span>, <span class="number">0xe4</span>,</span><br><span class="line">        <span class="number">0xd0</span>, <span class="number">0x91</span>, <span class="number">0xc7</span>, <span class="number">0xce</span>, <span class="number">0xed</span>, <span class="number">0x0f</span>, <span class="number">0xb4</span>, <span class="number">0x6f</span>, <span class="number">0xa0</span>, <span class="number">0xcc</span>, <span class="number">0xf0</span>, <span class="number">0x02</span>, <span class="number">0x4a</span>, <span class="number">0x79</span>, <span class="number">0xc3</span>, <span class="number">0xde</span>,</span><br><span class="line">        <span class="number">0xa3</span>, <span class="number">0xef</span>, <span class="number">0xea</span>, <span class="number">0x51</span>, <span class="number">0xe6</span>, <span class="number">0x6b</span>, <span class="number">0x18</span>, <span class="number">0xec</span>, <span class="number">0x1b</span>, <span class="number">0x2c</span>, <span class="number">0x80</span>, <span class="number">0xf7</span>, <span class="number">0x74</span>, <span class="number">0xe7</span>, <span class="number">0xff</span>, <span class="number">0x21</span>,</span><br><span class="line">        <span class="number">0x5a</span>, <span class="number">0x6a</span>, <span class="number">0x54</span>, <span class="number">0x1e</span>, <span class="number">0x41</span>, <span class="number">0x31</span>, <span class="number">0x92</span>, <span class="number">0x35</span>, <span class="number">0xc4</span>, <span class="number">0x33</span>, <span class="number">0x07</span>, <span class="number">0x0a</span>, <span class="number">0xba</span>, <span class="number">0x7e</span>, <span class="number">0x0e</span>, <span class="number">0x34</span>,</span><br><span class="line">        <span class="number">0x88</span>, <span class="number">0xb1</span>, <span class="number">0x98</span>, <span class="number">0x7c</span>, <span class="number">0xf3</span>, <span class="number">0x3d</span>, <span class="number">0x60</span>, <span class="number">0x6c</span>, <span class="number">0x7b</span>, <span class="number">0xca</span>, <span class="number">0xd3</span>, <span class="number">0x1f</span>, <span class="number">0x32</span>, <span class="number">0x65</span>, <span class="number">0x04</span>, <span class="number">0x28</span>,</span><br><span class="line">        <span class="number">0x64</span>, <span class="number">0xbe</span>, <span class="number">0x85</span>, <span class="number">0x9b</span>, <span class="number">0x2f</span>, <span class="number">0x59</span>, <span class="number">0x8a</span>, <span class="number">0xd7</span>, <span class="number">0xb0</span>, <span class="number">0x25</span>, <span class="number">0xac</span>, <span class="number">0xaf</span>, <span class="number">0x12</span>, <span class="number">0x03</span>, <span class="number">0xe2</span>, <span class="number">0xf2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* the constants D */</span></span><br><span class="line">u32 EK_d[<span class="number">16</span>] = &#123;</span><br><span class="line">        <span class="number">0x44D7</span>, <span class="number">0x26BC</span>, <span class="number">0x626B</span>, <span class="number">0x135E</span>, <span class="number">0x5789</span>, <span class="number">0x35E2</span>, <span class="number">0x7135</span>, <span class="number">0x09AF</span>,</span><br><span class="line">        <span class="number">0x4D78</span>, <span class="number">0x2F13</span>, <span class="number">0x6BC4</span>, <span class="number">0x1AF1</span>, <span class="number">0x5E26</span>, <span class="number">0x3C4D</span>, <span class="number">0x789A</span>, <span class="number">0x47AC</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- */</span></span><br><span class="line"><span class="comment">/* c = a + b mod (2^31 â€“ 1) */</span></span><br><span class="line"><span class="function">u32 <span class="title">AddM</span><span class="params">(u32 a, u32 b)</span> </span>&#123;</span><br><span class="line">    u32 c = a + b;</span><br><span class="line">    <span class="keyword">return</span> (c &amp; <span class="number">0x7FFFFFFF</span>) + (c &gt;&gt; <span class="number">31</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* LFSR with initialization mode */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MulByPow2(x, k) ((((x) <span class="meta-string">&lt;&lt; k) | ((x) &gt;&gt; (31 - k))) &amp; 0x7FFFFFFF)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LFSRWithInitialisationMode</span><span class="params">(u32 u)</span> </span>&#123;</span><br><span class="line">    u32 f, v;</span><br><span class="line">    f = LFSR_S0;</span><br><span class="line">    v = MulByPow2(LFSR_S0, <span class="number">8</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S4, <span class="number">20</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S10, <span class="number">21</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S13, <span class="number">17</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S15, <span class="number">15</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    f = AddM(f, u);</span><br><span class="line"><span class="comment">/* update the state */</span></span><br><span class="line">    LFSR_S0 = LFSR_S1;</span><br><span class="line">    LFSR_S1 = LFSR_S2;</span><br><span class="line">    LFSR_S2 = LFSR_S3;</span><br><span class="line">    LFSR_S3 = LFSR_S4;</span><br><span class="line">    LFSR_S4 = LFSR_S5;</span><br><span class="line">    LFSR_S5 = LFSR_S6;</span><br><span class="line">    LFSR_S6 = LFSR_S7;</span><br><span class="line">    LFSR_S7 = LFSR_S8;</span><br><span class="line">    LFSR_S8 = LFSR_S9;</span><br><span class="line">    LFSR_S9 = LFSR_S10;</span><br><span class="line">    LFSR_S10 = LFSR_S11;</span><br><span class="line">    LFSR_S11 = LFSR_S12;</span><br><span class="line">    LFSR_S12 = LFSR_S13;</span><br><span class="line">    LFSR_S13 = LFSR_S14;</span><br><span class="line">    LFSR_S14 = LFSR_S15;</span><br><span class="line">    LFSR_S15 = f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* LFSR with work mode */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LFSRWithWorkMode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    u32 f, v;</span><br><span class="line">    f = LFSR_S0;</span><br><span class="line">    v = MulByPow2(LFSR_S0, <span class="number">8</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S4, <span class="number">20</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S10, <span class="number">21</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S13, <span class="number">17</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line">    v = MulByPow2(LFSR_S15, <span class="number">15</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"><span class="comment">/* update the state */</span></span><br><span class="line">    LFSR_S0 = LFSR_S1;</span><br><span class="line">    LFSR_S1 = LFSR_S2;</span><br><span class="line">    LFSR_S2 = LFSR_S3;</span><br><span class="line">    LFSR_S3 = LFSR_S4;</span><br><span class="line">    LFSR_S4 = LFSR_S5;</span><br><span class="line">    LFSR_S5 = LFSR_S6;</span><br><span class="line">    LFSR_S6 = LFSR_S7;</span><br><span class="line">    LFSR_S7 = LFSR_S8;</span><br><span class="line">    LFSR_S8 = LFSR_S9;</span><br><span class="line">    LFSR_S9 = LFSR_S10;</span><br><span class="line">    LFSR_S10 = LFSR_S11;</span><br><span class="line">    LFSR_S11 = LFSR_S12;</span><br><span class="line">    LFSR_S12 = LFSR_S13;</span><br><span class="line">    LFSR_S13 = LFSR_S14;</span><br><span class="line">    LFSR_S14 = LFSR_S15;</span><br><span class="line">    LFSR_S15 = f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* BitReorganization */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BitReorganization</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    BRC_X0 = ((LFSR_S15 &amp; <span class="number">0x7FFF8000</span>) &lt;&lt; <span class="number">1</span>) | (LFSR_S14 &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">    BRC_X1 = ((LFSR_S11 &amp; <span class="number">0xFFFF</span>) &lt;&lt; <span class="number">16</span>) | (LFSR_S9 &gt;&gt; <span class="number">15</span>);</span><br><span class="line">    BRC_X2 = ((LFSR_S7 &amp; <span class="number">0xFFFF</span>) &lt;&lt; <span class="number">16</span>) | (LFSR_S5 &gt;&gt; <span class="number">15</span>);</span><br><span class="line">    BRC_X3 = ((LFSR_S2 &amp; <span class="number">0xFFFF</span>) &lt;&lt; <span class="number">16</span>) | (LFSR_S0 &gt;&gt; <span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ROT(a, k) (((a) <span class="meta-string">&lt;&lt; k) | ((a) &gt;&gt; (32 - k)))</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* L1 */</span></span><br><span class="line"><span class="function">u32 <span class="title">L1</span><span class="params">(u32 X)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (X ^ ROT(X, <span class="number">2</span>) ^ ROT(X, <span class="number">10</span>) ^ ROT(X, <span class="number">18</span>) ^ ROT(X, <span class="number">24</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* L2 */</span></span><br><span class="line"><span class="function">u32 <span class="title">L2</span><span class="params">(u32 X)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (X ^ ROT(X, <span class="number">8</span>) ^ ROT(X, <span class="number">14</span>) ^ ROT(X, <span class="number">22</span>) ^ ROT(X, <span class="number">30</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAKEU32(a, b, c, d) (((u32)(a) &lt;&lt; 24) | ((u32)(b) &lt;&lt; 16)| ((u32)(c) &lt;&lt; 8) | ((u32)(d)))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* F */</span></span><br><span class="line"><span class="function">u32 <span class="title">F</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    u32 W, W1, W2, u, v;</span><br><span class="line">    W = (BRC_X0 ^ F_R1) + F_R2;</span><br><span class="line">    W1 = F_R1 + BRC_X1;</span><br><span class="line">    W2 = F_R2 ^ BRC_X2;</span><br><span class="line">    u = L1((W1 &lt;&lt; <span class="number">16</span>) | (W2 &gt;&gt; <span class="number">16</span>));</span><br><span class="line">    v = L2((W2 &lt;&lt; <span class="number">16</span>) | (W1 &gt;&gt; <span class="number">16</span>));</span><br><span class="line">    F_R1 = MAKEU32(S0[u &gt;&gt; <span class="number">24</span>], S1[(u &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>],</span><br><span class="line">                   S0[(u &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>], S1[u &amp; <span class="number">0xFF</span>]);</span><br><span class="line">    F_R2 = MAKEU32(S0[v &gt;&gt; <span class="number">24</span>], S1[(v &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>],</span><br><span class="line">                   S0[(v &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>], S1[v &amp; <span class="number">0xFF</span>]);</span><br><span class="line">    <span class="keyword">return</span> W;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAKEU31(a, b, c) (((u32)(a) &lt;&lt; 23) | ((u32)(b) &lt;&lt; 8) | (u32)(c))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* initialize */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Initialization</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> *k, <span class="keyword">unsigned</span> <span class="keyword">char</span> *iv)</span> </span>&#123;</span><br><span class="line">    u32 w, nCount;</span><br><span class="line"><span class="comment">/* expand key */</span></span><br><span class="line">    LFSR_S0 = MAKEU31(k[<span class="number">0</span>], EK_d[<span class="number">0</span>], iv[<span class="number">0</span>]);</span><br><span class="line">    LFSR_S1 = MAKEU31(k[<span class="number">1</span>], EK_d[<span class="number">1</span>], iv[<span class="number">1</span>]);</span><br><span class="line">    LFSR_S2 = MAKEU31(k[<span class="number">2</span>], EK_d[<span class="number">2</span>], iv[<span class="number">2</span>]);</span><br><span class="line">    LFSR_S3 = MAKEU31(k[<span class="number">3</span>], EK_d[<span class="number">3</span>], iv[<span class="number">3</span>]);</span><br><span class="line">    LFSR_S4 = MAKEU31(k[<span class="number">4</span>], EK_d[<span class="number">4</span>], iv[<span class="number">4</span>]);</span><br><span class="line">    LFSR_S5 = MAKEU31(k[<span class="number">5</span>], EK_d[<span class="number">5</span>], iv[<span class="number">5</span>]);</span><br><span class="line">    LFSR_S6 = MAKEU31(k[<span class="number">6</span>], EK_d[<span class="number">6</span>], iv[<span class="number">6</span>]);</span><br><span class="line">    LFSR_S7 = MAKEU31(k[<span class="number">7</span>], EK_d[<span class="number">7</span>], iv[<span class="number">7</span>]);</span><br><span class="line">    LFSR_S8 = MAKEU31(k[<span class="number">8</span>], EK_d[<span class="number">8</span>], iv[<span class="number">8</span>]);</span><br><span class="line">    LFSR_S9 = MAKEU31(k[<span class="number">9</span>], EK_d[<span class="number">9</span>], iv[<span class="number">9</span>]);</span><br><span class="line">    LFSR_S10 = MAKEU31(k[<span class="number">10</span>], EK_d[<span class="number">10</span>], iv[<span class="number">10</span>]);</span><br><span class="line">    LFSR_S11 = MAKEU31(k[<span class="number">11</span>], EK_d[<span class="number">11</span>], iv[<span class="number">11</span>]);</span><br><span class="line">    LFSR_S12 = MAKEU31(k[<span class="number">12</span>], EK_d[<span class="number">12</span>], iv[<span class="number">12</span>]);</span><br><span class="line">    LFSR_S13 = MAKEU31(k[<span class="number">13</span>], EK_d[<span class="number">13</span>], iv[<span class="number">13</span>]);</span><br><span class="line">    LFSR_S14 = MAKEU31(k[<span class="number">14</span>], EK_d[<span class="number">14</span>], iv[<span class="number">14</span>]);</span><br><span class="line">    LFSR_S15 = MAKEU31(k[<span class="number">15</span>], EK_d[<span class="number">15</span>], iv[<span class="number">15</span>]);</span><br><span class="line"><span class="comment">/* set F_R1 and F_R2 to zero */</span></span><br><span class="line">    F_R1 = <span class="number">0</span>;</span><br><span class="line">    F_R2 = <span class="number">0</span>;</span><br><span class="line">    nCount = <span class="number">32</span>;</span><br><span class="line">    <span class="keyword">while</span> (nCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        BitReorganization();</span><br><span class="line">        w = F();</span><br><span class="line">        LFSRWithInitialisationMode(w &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        nCount--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GenerateKeyStream</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> *pKeyStream, <span class="keyword">unsigned</span> <span class="keyword">int</span> KeyStreamLen)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    &#123;</span><br><span class="line">        BitReorganization();</span><br><span class="line">        F(); <span class="comment">/* discard the output of F */</span></span><br><span class="line">        LFSRWithWorkMode();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; KeyStreamLen; i++) &#123;</span><br><span class="line">        BitReorganization();</span><br><span class="line">        pKeyStream[i] = F() ^ BRC_X3;</span><br><span class="line">        LFSRWithWorkMode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="B-C-å®ç°ï¼ˆå’ŒCåŸºæœ¬ä¸€æ ·ï¼‰"><a href="#B-C-å®ç°ï¼ˆå’ŒCåŸºæœ¬ä¸€æ ·ï¼‰" class="headerlink" title="B. C++å®ç°ï¼ˆå’ŒCåŸºæœ¬ä¸€æ ·ï¼‰"></a>B. C++å®ç°ï¼ˆå’ŒCåŸºæœ¬ä¸€æ ·ï¼‰</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ZUC.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* state registers LFSR */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> LFSR_S[<span class="number">16</span>] ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* F registers */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> F_R1 ;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> F_R2 ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* output of BR procedure */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> BRC_X[<span class="number">4</span>] ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* S-boxes */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> S0[<span class="number">256</span>] = &#123;</span><br><span class="line">    <span class="number">0x3e</span>,<span class="number">0x72</span>,<span class="number">0x5b</span>,<span class="number">0x47</span>,<span class="number">0xca</span>,<span class="number">0xe0</span>,<span class="number">0x00</span>,<span class="number">0x33</span>,<span class="number">0x04</span>,<span class="number">0xd1</span>,<span class="number">0x54</span>,<span class="number">0x98</span>,<span class="number">0x09</span>,<span class="number">0xb9</span>,<span class="number">0x6d</span>,<span class="number">0xcb</span>,</span><br><span class="line">    <span class="number">0x7b</span>,<span class="number">0x1b</span>,<span class="number">0xf9</span>,<span class="number">0x32</span>,<span class="number">0xaf</span>,<span class="number">0x9d</span>,<span class="number">0x6a</span>,<span class="number">0xa5</span>,<span class="number">0xb8</span>,<span class="number">0x2d</span>,<span class="number">0xfc</span>,<span class="number">0x1d</span>,<span class="number">0x08</span>,<span class="number">0x53</span>,<span class="number">0x03</span>,<span class="number">0x90</span>,</span><br><span class="line">    <span class="number">0x4d</span>,<span class="number">0x4e</span>,<span class="number">0x84</span>,<span class="number">0x99</span>,<span class="number">0xe4</span>,<span class="number">0xce</span>,<span class="number">0xd9</span>,<span class="number">0x91</span>,<span class="number">0xdd</span>,<span class="number">0xb6</span>,<span class="number">0x85</span>,<span class="number">0x48</span>,<span class="number">0x8b</span>,<span class="number">0x29</span>,<span class="number">0x6e</span>,<span class="number">0xac</span>,</span><br><span class="line">    <span class="number">0xcd</span>,<span class="number">0xc1</span>,<span class="number">0xf8</span>,<span class="number">0x1e</span>,<span class="number">0x73</span>,<span class="number">0x43</span>,<span class="number">0x69</span>,<span class="number">0xc6</span>,<span class="number">0xb5</span>,<span class="number">0xbd</span>,<span class="number">0xfd</span>,<span class="number">0x39</span>,<span class="number">0x63</span>,<span class="number">0x20</span>,<span class="number">0xd4</span>,<span class="number">0x38</span>,</span><br><span class="line">    <span class="number">0x76</span>,<span class="number">0x7d</span>,<span class="number">0xb2</span>,<span class="number">0xa7</span>,<span class="number">0xcf</span>,<span class="number">0xed</span>,<span class="number">0x57</span>,<span class="number">0xc5</span>,<span class="number">0xf3</span>,<span class="number">0x2c</span>,<span class="number">0xbb</span>,<span class="number">0x14</span>,<span class="number">0x21</span>,<span class="number">0x06</span>,<span class="number">0x55</span>,<span class="number">0x9b</span>,</span><br><span class="line">    <span class="number">0xe3</span>,<span class="number">0xef</span>,<span class="number">0x5e</span>,<span class="number">0x31</span>,<span class="number">0x4f</span>,<span class="number">0x7f</span>,<span class="number">0x5a</span>,<span class="number">0xa4</span>,<span class="number">0x0d</span>,<span class="number">0x82</span>,<span class="number">0x51</span>,<span class="number">0x49</span>,<span class="number">0x5f</span>,<span class="number">0xba</span>,<span class="number">0x58</span>,<span class="number">0x1c</span>,</span><br><span class="line">    <span class="number">0x4a</span>,<span class="number">0x16</span>,<span class="number">0xd5</span>,<span class="number">0x17</span>,<span class="number">0xa8</span>,<span class="number">0x92</span>,<span class="number">0x24</span>,<span class="number">0x1f</span>,<span class="number">0x8c</span>,<span class="number">0xff</span>,<span class="number">0xd8</span>,<span class="number">0xae</span>,<span class="number">0x2e</span>,<span class="number">0x01</span>,<span class="number">0xd3</span>,<span class="number">0xad</span>,</span><br><span class="line">    <span class="number">0x3b</span>,<span class="number">0x4b</span>,<span class="number">0xda</span>,<span class="number">0x46</span>,<span class="number">0xeb</span>,<span class="number">0xc9</span>,<span class="number">0xde</span>,<span class="number">0x9a</span>,<span class="number">0x8f</span>,<span class="number">0x87</span>,<span class="number">0xd7</span>,<span class="number">0x3a</span>,<span class="number">0x80</span>,<span class="number">0x6f</span>,<span class="number">0x2f</span>,<span class="number">0xc8</span>,</span><br><span class="line">    <span class="number">0xb1</span>,<span class="number">0xb4</span>,<span class="number">0x37</span>,<span class="number">0xf7</span>,<span class="number">0x0a</span>,<span class="number">0x22</span>,<span class="number">0x13</span>,<span class="number">0x28</span>,<span class="number">0x7c</span>,<span class="number">0xcc</span>,<span class="number">0x3c</span>,<span class="number">0x89</span>,<span class="number">0xc7</span>,<span class="number">0xc3</span>,<span class="number">0x96</span>,<span class="number">0x56</span>,</span><br><span class="line">    <span class="number">0x07</span>,<span class="number">0xbf</span>,<span class="number">0x7e</span>,<span class="number">0xf0</span>,<span class="number">0x0b</span>,<span class="number">0x2b</span>,<span class="number">0x97</span>,<span class="number">0x52</span>,<span class="number">0x35</span>,<span class="number">0x41</span>,<span class="number">0x79</span>,<span class="number">0x61</span>,<span class="number">0xa6</span>,<span class="number">0x4c</span>,<span class="number">0x10</span>,<span class="number">0xfe</span>,</span><br><span class="line">    <span class="number">0xbc</span>,<span class="number">0x26</span>,<span class="number">0x95</span>,<span class="number">0x88</span>,<span class="number">0x8a</span>,<span class="number">0xb0</span>,<span class="number">0xa3</span>,<span class="number">0xfb</span>,<span class="number">0xc0</span>,<span class="number">0x18</span>,<span class="number">0x94</span>,<span class="number">0xf2</span>,<span class="number">0xe1</span>,<span class="number">0xe5</span>,<span class="number">0xe9</span>,<span class="number">0x5d</span>,</span><br><span class="line">    <span class="number">0xd0</span>,<span class="number">0xdc</span>,<span class="number">0x11</span>,<span class="number">0x66</span>,<span class="number">0x64</span>,<span class="number">0x5c</span>,<span class="number">0xec</span>,<span class="number">0x59</span>,<span class="number">0x42</span>,<span class="number">0x75</span>,<span class="number">0x12</span>,<span class="number">0xf5</span>,<span class="number">0x74</span>,<span class="number">0x9c</span>,<span class="number">0xaa</span>,<span class="number">0x23</span>,</span><br><span class="line">    <span class="number">0x0e</span>,<span class="number">0x86</span>,<span class="number">0xab</span>,<span class="number">0xbe</span>,<span class="number">0x2a</span>,<span class="number">0x02</span>,<span class="number">0xe7</span>,<span class="number">0x67</span>,<span class="number">0xe6</span>,<span class="number">0x44</span>,<span class="number">0xa2</span>,<span class="number">0x6c</span>,<span class="number">0xc2</span>,<span class="number">0x93</span>,<span class="number">0x9f</span>,<span class="number">0xf1</span>,</span><br><span class="line">    <span class="number">0xf6</span>,<span class="number">0xfa</span>,<span class="number">0x36</span>,<span class="number">0xd2</span>,<span class="number">0x50</span>,<span class="number">0x68</span>,<span class="number">0x9e</span>,<span class="number">0x62</span>,<span class="number">0x71</span>,<span class="number">0x15</span>,<span class="number">0x3d</span>,<span class="number">0xd6</span>,<span class="number">0x40</span>,<span class="number">0xc4</span>,<span class="number">0xe2</span>,<span class="number">0x0f</span>,</span><br><span class="line">    <span class="number">0x8e</span>,<span class="number">0x83</span>,<span class="number">0x77</span>,<span class="number">0x6b</span>,<span class="number">0x25</span>,<span class="number">0x05</span>,<span class="number">0x3f</span>,<span class="number">0x0c</span>,<span class="number">0x30</span>,<span class="number">0xea</span>,<span class="number">0x70</span>,<span class="number">0xb7</span>,<span class="number">0xa1</span>,<span class="number">0xe8</span>,<span class="number">0xa9</span>,<span class="number">0x65</span>,</span><br><span class="line">    <span class="number">0x8d</span>,<span class="number">0x27</span>,<span class="number">0x1a</span>,<span class="number">0xdb</span>,<span class="number">0x81</span>,<span class="number">0xb3</span>,<span class="number">0xa0</span>,<span class="number">0xf4</span>,<span class="number">0x45</span>,<span class="number">0x7a</span>,<span class="number">0x19</span>,<span class="number">0xdf</span>,<span class="number">0xee</span>,<span class="number">0x78</span>,<span class="number">0x34</span>,<span class="number">0x60</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> S1[<span class="number">256</span>] = &#123;</span><br><span class="line">    <span class="number">0x55</span>,<span class="number">0xc2</span>,<span class="number">0x63</span>,<span class="number">0x71</span>,<span class="number">0x3b</span>,<span class="number">0xc8</span>,<span class="number">0x47</span>,<span class="number">0x86</span>,<span class="number">0x9f</span>,<span class="number">0x3c</span>,<span class="number">0xda</span>,<span class="number">0x5b</span>,<span class="number">0x29</span>,<span class="number">0xaa</span>,<span class="number">0xfd</span>,<span class="number">0x77</span>,</span><br><span class="line">    <span class="number">0x8c</span>,<span class="number">0xc5</span>,<span class="number">0x94</span>,<span class="number">0x0c</span>,<span class="number">0xa6</span>,<span class="number">0x1a</span>,<span class="number">0x13</span>,<span class="number">0x00</span>,<span class="number">0xe3</span>,<span class="number">0xa8</span>,<span class="number">0x16</span>,<span class="number">0x72</span>,<span class="number">0x40</span>,<span class="number">0xf9</span>,<span class="number">0xf8</span>,<span class="number">0x42</span>,</span><br><span class="line">    <span class="number">0x44</span>,<span class="number">0x26</span>,<span class="number">0x68</span>,<span class="number">0x96</span>,<span class="number">0x81</span>,<span class="number">0xd9</span>,<span class="number">0x45</span>,<span class="number">0x3e</span>,<span class="number">0x10</span>,<span class="number">0x76</span>,<span class="number">0xc6</span>,<span class="number">0xa7</span>,<span class="number">0x8b</span>,<span class="number">0x39</span>,<span class="number">0x43</span>,<span class="number">0xe1</span>,</span><br><span class="line">    <span class="number">0x3a</span>,<span class="number">0xb5</span>,<span class="number">0x56</span>,<span class="number">0x2a</span>,<span class="number">0xc0</span>,<span class="number">0x6d</span>,<span class="number">0xb3</span>,<span class="number">0x05</span>,<span class="number">0x22</span>,<span class="number">0x66</span>,<span class="number">0xbf</span>,<span class="number">0xdc</span>,<span class="number">0x0b</span>,<span class="number">0xfa</span>,<span class="number">0x62</span>,<span class="number">0x48</span>,</span><br><span class="line">    <span class="number">0xdd</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x06</span>,<span class="number">0x36</span>,<span class="number">0xc9</span>,<span class="number">0xc1</span>,<span class="number">0xcf</span>,<span class="number">0xf6</span>,<span class="number">0x27</span>,<span class="number">0x52</span>,<span class="number">0xbb</span>,<span class="number">0x69</span>,<span class="number">0xf5</span>,<span class="number">0xd4</span>,<span class="number">0x87</span>,</span><br><span class="line">    <span class="number">0x7f</span>,<span class="number">0x84</span>,<span class="number">0x4c</span>,<span class="number">0xd2</span>,<span class="number">0x9c</span>,<span class="number">0x57</span>,<span class="number">0xa4</span>,<span class="number">0xbc</span>,<span class="number">0x4f</span>,<span class="number">0x9a</span>,<span class="number">0xdf</span>,<span class="number">0xfe</span>,<span class="number">0xd6</span>,<span class="number">0x8d</span>,<span class="number">0x7a</span>,<span class="number">0xeb</span>,</span><br><span class="line">    <span class="number">0x2b</span>,<span class="number">0x53</span>,<span class="number">0xd8</span>,<span class="number">0x5c</span>,<span class="number">0xa1</span>,<span class="number">0x14</span>,<span class="number">0x17</span>,<span class="number">0xfb</span>,<span class="number">0x23</span>,<span class="number">0xd5</span>,<span class="number">0x7d</span>,<span class="number">0x30</span>,<span class="number">0x67</span>,<span class="number">0x73</span>,<span class="number">0x08</span>,<span class="number">0x09</span>,</span><br><span class="line">    <span class="number">0xee</span>,<span class="number">0xb7</span>,<span class="number">0x70</span>,<span class="number">0x3f</span>,<span class="number">0x61</span>,<span class="number">0xb2</span>,<span class="number">0x19</span>,<span class="number">0x8e</span>,<span class="number">0x4e</span>,<span class="number">0xe5</span>,<span class="number">0x4b</span>,<span class="number">0x93</span>,<span class="number">0x8f</span>,<span class="number">0x5d</span>,<span class="number">0xdb</span>,<span class="number">0xa9</span>,</span><br><span class="line">    <span class="number">0xad</span>,<span class="number">0xf1</span>,<span class="number">0xae</span>,<span class="number">0x2e</span>,<span class="number">0xcb</span>,<span class="number">0x0d</span>,<span class="number">0xfc</span>,<span class="number">0xf4</span>,<span class="number">0x2d</span>,<span class="number">0x46</span>,<span class="number">0x6e</span>,<span class="number">0x1d</span>,<span class="number">0x97</span>,<span class="number">0xe8</span>,<span class="number">0xd1</span>,<span class="number">0xe9</span>,</span><br><span class="line">    <span class="number">0x4d</span>,<span class="number">0x37</span>,<span class="number">0xa5</span>,<span class="number">0x75</span>,<span class="number">0x5e</span>,<span class="number">0x83</span>,<span class="number">0x9e</span>,<span class="number">0xab</span>,<span class="number">0x82</span>,<span class="number">0x9d</span>,<span class="number">0xb9</span>,<span class="number">0x1c</span>,<span class="number">0xe0</span>,<span class="number">0xcd</span>,<span class="number">0x49</span>,<span class="number">0x89</span>,</span><br><span class="line">    <span class="number">0x01</span>,<span class="number">0xb6</span>,<span class="number">0xbd</span>,<span class="number">0x58</span>,<span class="number">0x24</span>,<span class="number">0xa2</span>,<span class="number">0x5f</span>,<span class="number">0x38</span>,<span class="number">0x78</span>,<span class="number">0x99</span>,<span class="number">0x15</span>,<span class="number">0x90</span>,<span class="number">0x50</span>,<span class="number">0xb8</span>,<span class="number">0x95</span>,<span class="number">0xe4</span>,</span><br><span class="line">    <span class="number">0xd0</span>,<span class="number">0x91</span>,<span class="number">0xc7</span>,<span class="number">0xce</span>,<span class="number">0xed</span>,<span class="number">0x0f</span>,<span class="number">0xb4</span>,<span class="number">0x6f</span>,<span class="number">0xa0</span>,<span class="number">0xcc</span>,<span class="number">0xf0</span>,<span class="number">0x02</span>,<span class="number">0x4a</span>,<span class="number">0x79</span>,<span class="number">0xc3</span>,<span class="number">0xde</span>,</span><br><span class="line">    <span class="number">0xa3</span>,<span class="number">0xef</span>,<span class="number">0xea</span>,<span class="number">0x51</span>,<span class="number">0xe6</span>,<span class="number">0x6b</span>,<span class="number">0x18</span>,<span class="number">0xec</span>,<span class="number">0x1b</span>,<span class="number">0x2c</span>,<span class="number">0x80</span>,<span class="number">0xf7</span>,<span class="number">0x74</span>,<span class="number">0xe7</span>,<span class="number">0xff</span>,<span class="number">0x21</span>,</span><br><span class="line">    <span class="number">0x5a</span>,<span class="number">0x6a</span>,<span class="number">0x54</span>,<span class="number">0x1e</span>,<span class="number">0x41</span>,<span class="number">0x31</span>,<span class="number">0x92</span>,<span class="number">0x35</span>,<span class="number">0xc4</span>,<span class="number">0x33</span>,<span class="number">0x07</span>,<span class="number">0x0a</span>,<span class="number">0xba</span>,<span class="number">0x7e</span>,<span class="number">0x0e</span>,<span class="number">0x34</span>,</span><br><span class="line">    <span class="number">0x88</span>,<span class="number">0xb1</span>,<span class="number">0x98</span>,<span class="number">0x7c</span>,<span class="number">0xf3</span>,<span class="number">0x3d</span>,<span class="number">0x60</span>,<span class="number">0x6c</span>,<span class="number">0x7b</span>,<span class="number">0xca</span>,<span class="number">0xd3</span>,<span class="number">0x1f</span>,<span class="number">0x32</span>,<span class="number">0x65</span>,<span class="number">0x04</span>,<span class="number">0x28</span>,</span><br><span class="line">    <span class="number">0x64</span>,<span class="number">0xbe</span>,<span class="number">0x85</span>,<span class="number">0x9b</span>,<span class="number">0x2f</span>,<span class="number">0x59</span>,<span class="number">0x8a</span>,<span class="number">0xd7</span>,<span class="number">0xb0</span>,<span class="number">0x25</span>,<span class="number">0xac</span>,<span class="number">0xaf</span>,<span class="number">0x12</span>,<span class="number">0x03</span>,<span class="number">0xe2</span>,<span class="number">0xf2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* D constants */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> EK_d[<span class="number">16</span>] = &#123;</span><br><span class="line">    <span class="number">0x44D7</span>, <span class="number">0x26BC</span>, <span class="number">0x626B</span>, <span class="number">0x135E</span>, <span class="number">0x5789</span>, <span class="number">0x35E2</span>, <span class="number">0x7135</span>, <span class="number">0x09AF</span>,</span><br><span class="line">    <span class="number">0x4D78</span>, <span class="number">0x2F13</span>, <span class="number">0x6BC4</span>, <span class="number">0x1AF1</span>, <span class="number">0x5E26</span>, <span class="number">0x3C4D</span>, <span class="number">0x789A</span>, <span class="number">0x47AC</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">AddM</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> a, <span class="keyword">unsigned</span> <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> c = a + b;</span><br><span class="line">	<span class="keyword">return</span> (c &amp; <span class="number">0x7FFFFFFF</span>) + (c &gt;&gt; <span class="number">31</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MulByPow2(x, k) ((((x) <span class="meta-string">&lt;&lt; k) | ((x) &gt;&gt; (31 - k))) &amp; 0x7FFFFFFF)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* LFSR */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LFSRWithInitializationMode</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> f, v;</span><br><span class="line"></span><br><span class="line">    f = LFSR_S[<span class="number">0</span>];</span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">0</span>], <span class="number">8</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">4</span>], <span class="number">20</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">10</span>], <span class="number">21</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">13</span>], <span class="number">17</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">15</span>], <span class="number">15</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    f = AddM(f, u);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* update the state */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; ++i) &#123;</span><br><span class="line">        LFSR_S[i] = LFSR_S[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    LFSR_S[<span class="number">15</span>] = f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* LFSR with work mode */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LFSRWithWorkMode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> f, v;</span><br><span class="line"></span><br><span class="line">    f = LFSR_S[<span class="number">0</span>];</span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">0</span>], <span class="number">8</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">4</span>], <span class="number">20</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">10</span>], <span class="number">21</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">13</span>], <span class="number">17</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    v = MulByPow2(LFSR_S[<span class="number">15</span>], <span class="number">15</span>);</span><br><span class="line">    f = AddM(f, v);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* update state */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; ++i) &#123;</span><br><span class="line">        LFSR_S[i] = LFSR_S[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    LFSR_S[<span class="number">15</span>] = f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Bit Reorganization Procedure */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BitReorganization</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    BRC_X[<span class="number">0</span>] = ((LFSR_S[<span class="number">15</span>] &amp; <span class="number">0x7FFF8000</span>) &lt;&lt; <span class="number">1</span>) | (LFSR_S[<span class="number">14</span>] &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">    BRC_X[<span class="number">1</span>] = ((LFSR_S[<span class="number">11</span>] &amp; <span class="number">0xFFFF</span>) &lt;&lt; <span class="number">16</span>) | (LFSR_S[<span class="number">9</span>] &gt;&gt; <span class="number">15</span>);</span><br><span class="line">    BRC_X[<span class="number">2</span>] = ((LFSR_S[<span class="number">7</span>] &amp; <span class="number">0xFFFF</span>) &lt;&lt; <span class="number">16</span>) | (LFSR_S[<span class="number">5</span>] &gt;&gt; <span class="number">15</span>);</span><br><span class="line">    BRC_X[<span class="number">3</span>] = ((LFSR_S[<span class="number">2</span>] &amp; <span class="number">0xFFFF</span>) &lt;&lt; <span class="number">16</span>) | (LFSR_S[<span class="number">0</span>] &gt;&gt; <span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ROT(a, k) (((a) <span class="meta-string">&lt;&lt; k) | ((a) &gt;&gt; (32 - k)))</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* linear transformation L1 */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">L1</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> X)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (X ^ ROT(X, <span class="number">2</span>) ^ ROT(X, <span class="number">10</span>) ^ ROT(X, <span class="number">18</span>) ^ ROT(X, <span class="number">24</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* linear transformation L2 */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">L2</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> X)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (X ^ ROT(X, <span class="number">8</span>) ^ ROT(X, <span class="number">14</span>) ^ ROT(X, <span class="number">22</span>) ^ ROT(X, <span class="number">30</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* create 32-bit word */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAKEU32(a, b, c ,d) (\</span></span><br><span class="line">((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(a) &lt;&lt; <span class="number">24</span>) \</span><br><span class="line">| ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(b) &lt;&lt; <span class="number">16</span>) \</span><br><span class="line">| ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(c) &lt;&lt; <span class="number">8</span>) \</span><br><span class="line">| ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(d)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* non-linear function F */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">F</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> W, W1, W2, u, v;</span><br><span class="line"></span><br><span class="line">    W = (BRC_X[<span class="number">0</span>] ^ F_R1) + F_R2;</span><br><span class="line">    W1 = F_R1 + BRC_X[<span class="number">1</span>];</span><br><span class="line">    W2 = F_R2 ^ BRC_X[<span class="number">2</span>];</span><br><span class="line">    u = L1((W1 &lt;&lt; <span class="number">16</span>) | (W2 &gt;&gt; <span class="number">16</span>));</span><br><span class="line">    v = L2((W2 &lt;&lt; <span class="number">16</span>) | (W1 &gt;&gt; <span class="number">16</span>));</span><br><span class="line">    F_R1 = MAKEU32(S0[u &gt;&gt; <span class="number">24</span>], S1[(u &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>], S0[(u &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>], S1[u &amp; <span class="number">0xFF</span>]);</span><br><span class="line">    F_R2 = MAKEU32(S0[v &gt;&gt; <span class="number">24</span>], S1[(v &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFF</span>], S0[(v &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>], S1[v &amp; <span class="number">0xFF</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> W;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAKEU31(a, b, c) ( \</span></span><br><span class="line">    ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(<span class="number">0</span>) \</span><br><span class="line">    | (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(a)) &lt;&lt; <span class="number">23</span>) \</span><br><span class="line">    | ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(b) &lt;&lt; <span class="number">8</span>) \</span><br><span class="line">    | (<span class="keyword">unsigned</span> <span class="keyword">int</span>)((<span class="keyword">unsigned</span> <span class="keyword">int</span>)(<span class="number">0</span>) \</span><br><span class="line">    | (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(c)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Initialization</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> *k, <span class="keyword">unsigned</span> <span class="keyword">char</span> *iv)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> w;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* expand key */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">        LFSR_S[i] = MAKEU31(k[i], EK_d[i], iv[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* set F_R1 and F_R2 to zero */</span></span><br><span class="line">    F_R1 = <span class="number">0</span>;</span><br><span class="line">    F_R2 = <span class="number">0</span>;	</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> nCount = <span class="number">32</span>;</span><br><span class="line">    <span class="keyword">while</span> (nCount &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        BitReorganization();</span><br><span class="line">        w = F();</span><br><span class="line">        LFSRWithInitializationMode(w &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        nCount--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    BitReorganization();</span><br><span class="line">    F();</span><br><span class="line">    LFSRWithWorkMode();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GenerateKeyStream</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> *pKeyStream, <span class="keyword">unsigned</span> <span class="keyword">int</span> KeyStreamLen)</span></span>&#123;</span><br><span class="line">    <span class="comment">/* working cycles */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; KeyStreamLen; ++i)&#123;</span><br><span class="line">        BitReorganization();</span><br><span class="line">        pKeyStream[i] = F() ^ BRC_X[<span class="number">3</span>];</span><br><span class="line">        LFSRWithWorkMode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ä¿¡æ¯å®‰å…¨</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
        <tag>ZUC</tag>
        <tag>åŠ å¯†ç®—æ³•</tag>
        <tag>ä¿¡æ¯å®‰å…¨</tag>
        <tag>å¯†ç å­¦</tag>
      </tags>
  </entry>
</search>
